<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ğŸ§React | å‰ç«¯çŸ¥è¯†åº“@æ•²ä»£ç çš„å°æç´æ‰‹</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="logo.jpg">
    <meta name="description" content="å‰ç«¯erçš„é¢è¯•å¿…å¤‡çŸ¥è¯†â€”â€”å‰ç«¯ç®—æ³•ä¸å‰ç«¯é¢è¯•é¢˜ï¼">
    
    <link rel="preload" href="/frontend-knowledge-base/assets/css/0.styles.1e7c64ec.css" as="style"><link rel="preload" href="/frontend-knowledge-base/assets/js/app.fcf437a8.js" as="script"><link rel="preload" href="/frontend-knowledge-base/assets/js/3.ceeb50c6.js" as="script"><link rel="preload" href="/frontend-knowledge-base/assets/js/1.8451d83f.js" as="script"><link rel="preload" href="/frontend-knowledge-base/assets/js/23.9e124323.js" as="script"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/10.c53ecfbf.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/11.719e2e4d.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/12.6791d3d2.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/13.d93f6042.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/14.7704fd11.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/15.79bbd93a.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/16.c4c8517c.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/17.bb85eb87.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/18.8d2fd8ae.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/19.39fed223.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/20.c6713908.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/21.694a1dd3.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/22.7c275bab.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/24.a21b072d.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/25.db0ab649.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/26.ccc2a5ff.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/27.708abdd3.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/4.71c43d04.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/5.93f6240a.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/6.f3f5344e.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/7.76416851.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/8.d0d15fbd.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/9.a4cfbc82.js">
    <link rel="stylesheet" href="/frontend-knowledge-base/assets/css/0.styles.1e7c64ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>å‰ç«¯çŸ¥è¯†åº“@æ•²ä»£ç çš„å°æç´æ‰‹</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>å‰ç«¯erçš„é¢è¯•å¿…å¤‡çŸ¥è¯†â€”â€”å‰ç«¯ç®—æ³•ä¸å‰ç«¯é¢è¯•é¢˜ï¼</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
          Â Â 
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-knowledge-base/" class="home-link router-link-active"><!----> <span class="site-name">å‰ç«¯çŸ¥è¯†åº“@æ•²ä»£ç çš„å°æç´æ‰‹</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontend-knowledge-base/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      more about @æ•²ä»£ç çš„å°æç´æ‰‹
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/FangzhouSu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  myGithub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/18064101621133" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  myJuejin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/FangzhouSu/frontend-knowledge-base" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  thisRepo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>16</h3> <h6 data-v-39576ba9>æ–‡ç« </h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>æ ‡ç­¾</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/frontend-knowledge-base/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      more about @æ•²ä»£ç çš„å°æç´æ‰‹
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/FangzhouSu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  myGithub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/18064101621133" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  myJuejin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/FangzhouSu/frontend-knowledge-base" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  thisRepo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/frontend-knowledge-base/" class="sidebar-heading clickable router-link-active"><span>Hey!This is æ•²ä»£ç çš„å°æç´æ‰‹!</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge-base/" aria-current="page" class="sidebar-link">æ¬¢è¿æ¥åˆ°æˆ‘çš„å‰ç«¯çŸ¥è¯†åº“ï¼ğŸ˜„</a></li><li><a href="/frontend-knowledge-base/study-way/myStudyProcess.html" class="sidebar-link">æˆ‘çš„å‰ç«¯å­¦ä¹ ä¹‹è·¯ğŸ¤”</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/frontend-knowledge-base/knowledgeBase/start" class="sidebar-heading clickable open"><span>å‰ç«¯çŸ¥è¯†åº“</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge-base/knowledgeBase/layout.html" class="sidebar-link">ğŸ´å‰ç«¯åŸºç¡€-layout</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html" class="sidebar-link">ğŸ¦„å‰ç«¯åŸºç¡€-JavaScript</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/network.html" class="sidebar-link">ğŸ…è®¡ç®—æœºç½‘ç»œ</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/browser.html" class="sidebar-link">ğŸ¬æµè§ˆå™¨</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/react.html" aria-current="page" class="active sidebar-link">ğŸ§React</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/coding.html" class="sidebar-link">ğŸ²æ‰‹å†™ä»£ç é—®é¢˜(é€ ~è½®~å­~)</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/optimize.html" class="sidebar-link">ğŸ•â€ğŸ¦ºæ€§èƒ½ä¼˜åŒ–é—®é¢˜</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/experience.html" class="sidebar-link">ğŸªå·¥ä½œç»éªŒæ±‡æ€»</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/interview.html" class="sidebar-link">ğŸœé¢è¯•ç»éªŒ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/frontend-knowledge-base/handbook/start" class="sidebar-heading clickable"><span>å‰ç«¯erå¿…ä¼šçš„æ•°æ®ç»“æ„ä¸ç®—æ³•</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge-base/handbook/struct.html" class="sidebar-link">å‰ç«¯å¿…ä¼šæ•°æ®ç»“æ„</a></li><li><a href="/frontend-knowledge-base/handbook/algorithm.html" class="sidebar-link">å‰ç«¯å¿…ä¼šç®—æ³•æŠ€å·§</a></li><li><a href="/frontend-knowledge-base/handbook/leetcode.html" class="sidebar-link">æ¨èåˆ·é¢˜å†…å®¹</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/frontend-knowledge-base/study-everyday/study-everyday" class="sidebar-heading clickable"><span>å‰ç«¯æ ¡æ‹›erå¿…ä¼šçš„å‰ç«¯çŸ¥è¯†ç‚¹</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge-base/study-everyday/22-1-study.html" class="sidebar-link">22å¹´ç¬¬ä¸€å­£åº¦çš„æ¯æ—¥ä¸€é¢˜</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
          Â Â 
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">ğŸ§React</h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="ğŸ§react"><a href="#ğŸ§react" class="header-anchor">#</a> ğŸ§React</h1> <h2 id="reactçŸ¥è¯†ä½“ç³»"><a href="#reactçŸ¥è¯†ä½“ç³»" class="header-anchor">#</a> ReactçŸ¥è¯†ä½“ç³»</h2> <blockquote><p>å†™ä¸šåŠ¡</p></blockquote> <ul><li>ReactåŸºç¡€</li> <li>React Hooks</li> <li>React Router</li> <li>çŠ¶æ€ç®¡ç†å®¹å™¨
<ul><li>Redux</li> <li>MobX</li></ul></li> <li>UIç»„ä»¶åº“
<ul><li>Ant Design of React</li></ul></li></ul> <blockquote><p>æ€§èƒ½ä¼˜åŒ–</p></blockquote> <ul><li>Reactæºç è§£æï¼Œç›¸å…³åŸç†</li></ul> <blockquote><p>åŸºç¡€æ¶æ„</p></blockquote> <ul><li>è„šæ‰‹æ¶é…ç½®</li></ul> <h2 id="reactå­¦ä¹ èµ„æº"><a href="#reactå­¦ä¹ èµ„æº" class="header-anchor">#</a> Reactå­¦ä¹ èµ„æº</h2> <h3 id="å…¥é—¨"><a href="#å…¥é—¨" class="header-anchor">#</a> å…¥é—¨</h3> <blockquote><p>å…¥é—¨å­¦ä¹ é˜¶æ®µï¼Œå‚è€ƒå­¦ä¹ èµ„æºâ€”â€”</p> <ul><li><a href="https://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="noopener noreferrer">é˜®å¤§çš„ Reactå…¥é—¨å®ä¾‹æ•™ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://react.docschina.org/docs/hello-world.html" target="_blank" rel="noopener noreferrer">Reactå®˜ç½‘åŸºç¡€æ•™ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Bç«™å°šç¡…è°·è¯¾ç¨‹</li></ul> <p>21/10-11</p> <blockquote><p>è¿™é‡Œçœ‹å‡ºæ¥æ˜¯åˆå­¦äº† æœ‰äº›å•°å—¦ å›å¤´é‡è¯»ä¸‹æ–‡æ¡£ ç²¾ç®€ä¸€ä¸‹</p></blockquote></blockquote> <h3 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="header-anchor">#</a> è¿›é˜¶</h3> <blockquote><p>å¤è¯»å®˜æ–¹æ–‡æ¡£ï¼Œé«˜çº§éƒ¨åˆ†ã€APIéƒ¨åˆ†ã€Hookséƒ¨åˆ†éƒ½å¯ä»¥æ¶‰åŠ+é¡¹ç›®+é˜…è¯»æºç </p> <blockquote><p>å¯ä»¥å­¦ä¹ ä¸€äº›hooks3.0åº“çš„æºç </p></blockquote> <p>é˜…è¯»ç»å…¸ä¹¦ç±</p> <ul><li>ã€Šæ·±å…¥ReactæŠ€æœ¯æ ˆã€‹</li></ul></blockquote> <h2 id="reactåŸºç¡€çŸ¥è¯†"><a href="#reactåŸºç¡€çŸ¥è¯†" class="header-anchor">#</a> ReactåŸºç¡€çŸ¥è¯†</h2> <h3 id="html3"><a href="#html3" class="header-anchor">#</a> HTML3</h3> <blockquote><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../build/react.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../build/react-dom.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../build/browser.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>example<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      // ** Our code goes here! **
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></blockquote> <p><code>&lt;script&gt;</code> æ ‡ç­¾çš„ <code>type</code> å±æ€§ä¸º <code>text/babel</code> ã€‚</p> <p>è¿™æ˜¯å› ä¸º React ç‹¬æœ‰çš„ JSX è¯­æ³•ï¼Œè·Ÿ JavaScript ä¸å…¼å®¹ã€‚å‡¡æ˜¯ä½¿ç”¨ JSX çš„åœ°æ–¹ï¼Œéƒ½è¦åŠ ä¸Š <code>type=&quot;text/babel&quot;</code> ã€‚</p> <p>ä¸Šé¢ä»£ç ä¸€å…±ç”¨äº†ä¸‰ä¸ªåº“ï¼š <code>react.js</code> ã€<code>react-dom.js</code> å’Œ <code>Browser.js</code> ï¼Œå®ƒä»¬å¿…é¡»é¦–å…ˆåŠ è½½ã€‚å…¶ä¸­</p> <ul><li><code>react.js</code> æ˜¯ React çš„æ ¸å¿ƒåº“</li> <li><code>react-dom.js</code> æ˜¯æä¾›ä¸ DOM ç›¸å…³çš„åŠŸèƒ½</li> <li><code>Browser.js</code> çš„ä½œç”¨æ˜¯å°† JSX è¯­æ³•è½¬ä¸º JavaScript è¯­æ³•ï¼Œè¿™ä¸€æ­¥å¾ˆæ¶ˆè€—æ—¶é—´ï¼Œå®é™…ä¸Šçº¿çš„æ—¶å€™ï¼Œåº”è¯¥å°†å®ƒæ”¾åˆ°æœåŠ¡å™¨å®Œæˆã€‚</li></ul> <h3 id="reactdom-render"><a href="#reactdom-render" class="header-anchor">#</a> <code>ReactDOM.render()</code></h3> <p><code>ReactDOM.render</code> æ˜¯ React çš„æœ€åŸºæœ¬æ–¹æ³•ï¼Œç”¨äºå°†æ¨¡æ¿è½¬ä¸º HTML è¯­è¨€ï¼Œå¹¶æ’å…¥æŒ‡å®šçš„ DOM èŠ‚ç‚¹ã€‚</p> <blockquote><div class="language-jsx extra-class"><pre class="language-jsx"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, world!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç å°†ä¸€ä¸ª <code>h1</code> æ ‡é¢˜ï¼Œæ’å…¥ <code>example</code> èŠ‚ç‚¹ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo01/index.html" target="_blank" rel="noopener noreferrer"><code>demo01</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚</p> <p><img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015033109.png" alt="img"></p> <h3 id="jsx"><a href="#jsx" class="header-anchor">#</a> JSX</h3> <h4 id="jsxè¯­æ³•"><a href="#jsxè¯­æ³•" class="header-anchor">#</a> JSXè¯­æ³•</h4> <p>HTML è¯­è¨€ç›´æ¥å†™åœ¨ JavaScript è¯­è¨€ä¹‹ä¸­ï¼Œä¸åŠ ä»»ä½•å¼•å·ï¼Œè¿™å°±æ˜¯ <a href="https://facebook.github.io/react/docs/displaying-data.html#jsx-syntax" target="_blank" rel="noopener noreferrer">JSX çš„è¯­æ³•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œå®ƒå…è®¸ HTML ä¸ JavaScript çš„æ··å†™ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo02/index.html" target="_blank" rel="noopener noreferrer"><code>Demo02</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼‰ã€‚</p> <blockquote><p>æ—§ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Emily'</span><span class="token punctuation">,</span> <span class="token string">'Kate'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span>
    names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token plain-text">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <blockquote><p>æ–°ç‰ˆæœ¬</p> <p>æ¶‰åŠäº†keyçš„å†…å®¹</p> <blockquote><p>éœ€è¦æ³¨æ„ï¼å¦‚æœæ¶‰åŠåˆ°éå†åˆ—è¡¨çš„éœ€æ±‚ï¼Œkeyæœ€å¥½ä¸è¦ç”¨indexï¼</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110261147195.png" alt="image-20211026114735118"></p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110261148929.png" alt="image-20211026114801860"></p> <p>å°ç»“ï¼šå¦‚æœä¸å­˜åœ¨å¯¹æ•°æ®çš„é€†åºæ·»åŠ ã€é€†åºåˆ é™¤ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ¸²æŸ“åˆ—è¡¨ç”¨äºå±•ç¤ºï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨indexä½œä¸ºkey</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110261149879.png" alt="image-20211026114904827"></p></blockquote> <blockquote><p>å¼€å‘ä¸­å¦‚ä½•é€‰å–keyï¼Ÿ</p> <p>æœ‰å”¯ä¸€æ ‡è¯†å°½é‡è¿˜æ˜¯ç”¨å”¯ä¸€æ ‡è¯†ï¼</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110261150005.png" alt="image-20211026115023933"></p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span>
    names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token plain-text">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç ä½“ç°äº† JSX çš„åŸºæœ¬è¯­æ³•è§„åˆ™ï¼šé‡åˆ° HTML æ ‡ç­¾ï¼ˆä»¥ <code>&lt;</code> å¼€å¤´ï¼‰ï¼Œå°±ç”¨ HTML è§„åˆ™è§£æï¼›é‡åˆ°ä»£ç å—ï¼ˆä»¥ <code>{</code> å¼€å¤´ï¼‰ï¼Œå°±ç”¨ JavaScript è§„åˆ™è§£æã€‚</p> <p><img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015033106.png" alt="img"></p> <h4 id="jsxä¸­ä¼šå±•å¼€æ•°ç»„"><a href="#jsxä¸­ä¼šå±•å¼€æ•°ç»„" class="header-anchor">#</a> JSXä¸­ä¼šå±•å¼€æ•°ç»„</h4> <p>JSX å…è®¸ç›´æ¥åœ¨æ¨¡æ¿æ’å…¥ JavaScript å˜é‡ã€‚å¦‚æœè¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™ä¼šå±•å¼€è¿™ä¸ªæ•°ç»„çš„æ‰€æœ‰æˆå‘˜ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo03/index.html" target="_blank" rel="noopener noreferrer"><code>demo03</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼‰ã€‚</p> <blockquote><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>React is awesome<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>arr<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç çš„<code>arr</code>å˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç»“æœ JSX ä¼šæŠŠå®ƒçš„æ‰€æœ‰æˆå‘˜ï¼Œæ·»åŠ åˆ°æ¨¡æ¿ã€‚</p> <p><img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015033107.png" alt="img"></p> <h3 id="reacté¢å‘ç»„ä»¶ç¼–ç¨‹"><a href="#reacté¢å‘ç»„ä»¶ç¼–ç¨‹" class="header-anchor">#</a> Reacté¢å‘ç»„ä»¶ç¼–ç¨‹</h3> <h4 id="ç»„ä»¶ç±»"><a href="#ç»„ä»¶ç±»" class="header-anchor">#</a> â€œç»„ä»¶ç±»â€</h4> <p>React å…è®¸å°†ä»£ç å°è£…æˆç»„ä»¶ï¼ˆcomponentï¼‰ï¼Œç„¶ååƒæ’å…¥æ™®é€š HTML æ ‡ç­¾ä¸€æ ·ï¼Œåœ¨ç½‘é¡µä¸­æ’å…¥è¿™ä¸ªç»„ä»¶ã€‚<code>React.createClass</code> æ–¹æ³•å°±ç”¨äºç”Ÿæˆä¸€ä¸ªç»„ä»¶ç±»ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo04/index.html" target="_blank" rel="noopener noreferrer"><code>demo04</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ã€‚</p> <blockquote><p>æ—§ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> HelloMessage <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HelloMessage</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>John<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <blockquote><p>æ–°ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">HelloMessage</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç»„ä»¶â€œç±»â€</p></blockquote> <p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡ <code>HelloMessage</code> å°±æ˜¯ä¸€ä¸ªç»„ä»¶ç±»ã€‚æ¨¡æ¿æ’å…¥ <code>&lt;HelloMessage /&gt;</code> æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ <code>HelloMessage</code> çš„ä¸€ä¸ªå®ä¾‹ï¼ˆä¸‹æ–‡çš„&quot;ç»„ä»¶&quot;éƒ½æŒ‡ç»„ä»¶ç±»çš„å®ä¾‹ï¼‰</p> <blockquote><p>â€œè‡ªåŠ¨ç”Ÿæˆç»„ä»¶ç±»çš„ä¸€ä¸ªå®ä¾‹â€è¿™ä¸ªæ¦‚å¿µå¥½åƒä¹‹å‰æ²¡å¬è§è¿‡ï¼å­¦ä¹ äº†ï¼</p></blockquote> <h4 id="ç»„ä»¶ç±»ä½¿ç”¨renderæ–¹æ³•è¾“å‡ºç»„ä»¶"><a href="#ç»„ä»¶ç±»ä½¿ç”¨renderæ–¹æ³•è¾“å‡ºç»„ä»¶" class="header-anchor">#</a> ç»„ä»¶ç±»ä½¿ç”¨renderæ–¹æ³•è¾“å‡ºç»„ä»¶</h4> <p>æ‰€æœ‰ç»„ä»¶ç±»éƒ½å¿…é¡»æœ‰è‡ªå·±çš„ <code>render</code> æ–¹æ³•ï¼Œç”¨äºè¾“å‡ºç»„ä»¶ã€‚</p> <p>æ³¨æ„ï¼Œç»„ä»¶ç±»çš„ç¬¬ä¸€ä¸ªå­—æ¯å¿…é¡»å¤§å†™ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œæ¯”å¦‚<code>HelloMessage</code>ä¸èƒ½å†™æˆ<code>helloMessage</code>ã€‚</p> <blockquote><p>å¦å¤–ï¼Œç»„ä»¶ç±»åªèƒ½åŒ…å«ä¸€ä¸ªé¡¶å±‚æ ‡ç­¾ï¼Œå¦åˆ™ä¹Ÿä¼šæŠ¥é”™ã€‚</p> <blockquote><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> HelloMessage <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      Hello </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      some text
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>HelloMessage</code>ç»„ä»¶åŒ…å«äº†ä¸¤ä¸ªé¡¶å±‚æ ‡ç­¾ï¼š<code>h1</code>å’Œ<code>p</code>ã€‚</p></blockquote> <h4 id="ç»„ä»¶å®ä¾‹ä»ç»„ä»¶ç±»çš„this-propså¯¹è±¡è·å–å±æ€§"><a href="#ç»„ä»¶å®ä¾‹ä»ç»„ä»¶ç±»çš„this-propså¯¹è±¡è·å–å±æ€§" class="header-anchor">#</a> ç»„ä»¶å®ä¾‹ä»ç»„ä»¶ç±»çš„<code>this.props</code>å¯¹è±¡è·å–å±æ€§</h4> <p>ç»„ä»¶çš„ç”¨æ³•ä¸åŸç”Ÿçš„ HTML æ ‡ç­¾å®Œå…¨ä¸€è‡´ï¼Œå¯ä»¥ä»»æ„åŠ å…¥å±æ€§ï¼Œæ¯”å¦‚ <code>&lt;HelloMessage name=&quot;John&quot;&gt;</code> ï¼Œå°±æ˜¯ <code>HelloMessage</code> ç»„ä»¶åŠ å…¥ä¸€ä¸ª <code>name</code> å±æ€§ï¼Œå€¼ä¸º <code>John</code>ã€‚ç»„ä»¶çš„å±æ€§å¯ä»¥<strong>åœ¨ç»„ä»¶ç±»çš„ <code>this.props</code> å¯¹è±¡ä¸Šè·å–</strong>ï¼Œæ¯”å¦‚ <code>name</code> å±æ€§å°±å¯ä»¥é€šè¿‡ <code>this.props.name</code> è¯»å–ã€‚</p> <h4 id="ç»„ä»¶å±æ€§åçš„æ³¨æ„ç‚¹"><a href="#ç»„ä»¶å±æ€§åçš„æ³¨æ„ç‚¹" class="header-anchor">#</a> ç»„ä»¶å±æ€§åçš„æ³¨æ„ç‚¹</h4> <p>æ·»åŠ ç»„ä»¶å±æ€§ï¼Œæœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼Œå°±æ˜¯ <code>class</code> å±æ€§éœ€è¦å†™æˆ <code>className</code> ï¼Œ<code>for</code> å±æ€§éœ€è¦å†™æˆ <code>htmlFor</code> ï¼Œè¿™æ˜¯å› ä¸º <code>class</code> å’Œ <code>for</code> æ˜¯ JavaScript çš„ä¿ç•™å­—ã€‚</p> <h3 id="props"><a href="#props" class="header-anchor">#</a> Props</h3> <h4 id="this-props-children-ç»„ä»¶æ‰€æœ‰å­èŠ‚ç‚¹"><a href="#this-props-children-ç»„ä»¶æ‰€æœ‰å­èŠ‚ç‚¹" class="header-anchor">#</a> <code>this.props.children</code>-ç»„ä»¶æ‰€æœ‰å­èŠ‚ç‚¹</h4> <p><code>this.props</code> å¯¹è±¡çš„å±æ€§ä¸ç»„ä»¶çš„å±æ€§ä¸€ä¸€å¯¹åº”ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œå°±æ˜¯ <code>this.props.children</code> å±æ€§ã€‚å®ƒè¡¨ç¤ºç»„ä»¶çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo05/index.html" target="_blank" rel="noopener noreferrer"><code>demo05</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ã€‚</p> <blockquote><p>æ—§ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> NotesList <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>
        React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>child<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NotesList</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NotesList</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>body
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <blockquote><p>æ–°ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">NotesList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
        	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            	</span><span class="token punctuation">{</span>
                    React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>child<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç çš„ <code>NoteList</code> ç»„ä»¶æœ‰ä¸¤ä¸ª <code>span</code> å­èŠ‚ç‚¹ï¼Œå®ƒä»¬éƒ½å¯ä»¥é€šè¿‡ <code>this.props.children</code> è¯»å–ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚</p> <p><img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015033110.png" alt="img"></p> <h4 id="ç”¨react-children-mapéå†å­èŠ‚ç‚¹"><a href="#ç”¨react-children-mapéå†å­èŠ‚ç‚¹" class="header-anchor">#</a> ç”¨<code>React.Children.map</code>éå†å­èŠ‚ç‚¹</h4> <p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ <code>this.props.children</code> çš„å€¼æœ‰ä¸‰ç§å¯èƒ½ï¼š</p> <ul><li>å¦‚æœå½“å‰ç»„ä»¶æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå®ƒå°±æ˜¯ <code>undefined</code> ;</li> <li>å¦‚æœæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæ•°æ®ç±»å‹æ˜¯ <code>object</code> ï¼›</li> <li>å¦‚æœæœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæ•°æ®ç±»å‹å°±æ˜¯ <code>array</code> ã€‚</li></ul> <p>æ‰€ä»¥ï¼Œå¤„ç† <code>this.props.children</code> çš„æ—¶å€™è¦å°å¿ƒã€‚</p> <p>React æä¾›ä¸€ä¸ªå·¥å…·æ–¹æ³• <a href="https://zh-hans.reactjs.org/docs/react-api.html#reactchildren" target="_blank" rel="noopener noreferrer"><code>React.Children-ä¸­æ–‡æ–‡æ¡£</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¥å¤„ç† <code>this.props.children</code> ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <code>React.Children.map</code> æ¥éå†å­èŠ‚ç‚¹ï¼Œè€Œä¸ç”¨æ‹…å¿ƒ <code>this.props.children</code> çš„æ•°æ®ç±»å‹æ˜¯ <code>undefined</code> è¿˜æ˜¯ <code>object</code>ã€‚æ›´å¤šçš„ <code>React.Children</code> çš„æ–¹æ³•ï¼Œè¯·å‚è€ƒ<a href="https://reactjs.org/docs/react-api.html#reactchildren" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£-è‹±æ–‡åŸç‰ˆ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h4 id="proptypes-éªŒè¯ä½¿ç”¨ç»„ä»¶æ—¶æä¾›çš„å‚æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚"><a href="#proptypes-éªŒè¯ä½¿ç”¨ç»„ä»¶æ—¶æä¾›çš„å‚æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚" class="header-anchor">#</a> <code>PropTypes</code>-éªŒè¯ä½¿ç”¨ç»„ä»¶æ—¶æä¾›çš„å‚æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚</h4> <blockquote><p>è€ç‰ˆæœ¬ä¸­é˜®å¤§ä½¿ç”¨ <code>const Com React.createClass</code>åˆ›å»ºç»„ä»¶ï¼Œä¸æˆ‘ä¹‹å‰å­¦åˆ°çš„ï¼ˆæ›´æ¥è¿‘ES6è§„èŒƒçš„classå†™æ³•ï¼‰<code>class Com extends React.Component</code> ä¸å¤ªä¸€æ ·ï¼Œä¸”ä¸€äº›åœ°æ–¹çš„ç”¨æ³•ä¹Ÿä¸åŒ</p> <p>å¯ä»¥çœ‹çœ‹<a href="https://www.cnblogs.com/fightjianxian/p/12350499.html" target="_blank" rel="noopener noreferrer">è¿™ç¯‡æ–‡ç« <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ‰€é˜è¿°çš„è¿™ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>    <span class="token number">1</span>ã€è¯­æ³•åŒºåˆ«
    <span class="token number">2</span>ã€propType å’Œ getDefaultProps
    <span class="token number">3</span>ã€çŠ¶æ€çš„åŒºåˆ«
    <span class="token number">4</span>ã€<span class="token keyword">this</span>åŒºåˆ«
    <span class="token number">5</span>ã€Mixins
</code></pre></div></blockquote> <p>ç»„ä»¶çš„å±æ€§å¯ä»¥æ¥å—ä»»æ„å€¼ï¼Œå­—ç¬¦ä¸²ã€å¯¹è±¡ã€å‡½æ•°ç­‰ç­‰éƒ½å¯ä»¥ã€‚æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼ŒéªŒè¯åˆ«äººä½¿ç”¨ç»„ä»¶æ—¶ï¼Œæä¾›çš„å‚æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚</p> <p>ç»„ä»¶ç±»çš„<code>PropTypes</code>å±æ€§ï¼Œå°±æ˜¯ç”¨æ¥éªŒè¯ç»„ä»¶å®ä¾‹çš„å±æ€§æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo06/index.html" target="_blank" rel="noopener noreferrer"><code>demo06</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ã€‚</p> <blockquote><p>è€ç‰ˆæœ¬</p> <p>é€šè¿‡<code>proTypes</code>å¯¹è±¡å’Œ<code>getDefaultProps()</code>æ–¹æ³•æ¥è®¾ç½®å’Œè·å–<code>props</code>.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> MyTitle <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">propTypes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span>React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></blockquote> <blockquote><p>æ–°ç‰ˆæœ¬</p> <p>é€šè¿‡è®¾ç½®ä¸¤ä¸ªå±æ€§<code>propTypes</code>å’Œ<code>defaultProps</code></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">MyTitle</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token comment">//  æ”¹ä¸ºå±æ€§</span>
    <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> PropType<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <p>ä¸Šé¢çš„<code>Mytitle</code>ç»„ä»¶æœ‰ä¸€ä¸ª<code>title</code>å±æ€§ã€‚<code>PropTypes</code> å‘Šè¯‰ Reactï¼Œè¿™ä¸ª <code>title</code> å±æ€§æ˜¯å¿…é¡»çš„ï¼Œ<strong>è€Œä¸”å®ƒçš„å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²</strong>ã€‚</p> <p>ä¸¾ä¸ªåä¾‹æ¥æµ‹è¯•ä¸‹</p> <p>è®¾ç½® <code>title</code> å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªæ•°å€¼ã€‚</p> <blockquote><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyTitle</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>body
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <p>è¿™æ ·ä¸€æ¥ï¼Œ<code>title</code>å±æ€§å°±é€šä¸è¿‡éªŒè¯äº†ã€‚æ§åˆ¶å°ä¼šæ˜¾ç¤ºä¸€è¡Œé”™è¯¯ä¿¡æ¯ã€‚</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code>Warning: Failed propType: Invalid prop <span class="token variable"><span class="token variable">`</span>title<span class="token variable">`</span></span> of <span class="token builtin class-name">type</span> <span class="token variable"><span class="token variable">`</span>number<span class="token variable">`</span></span> supplied to <span class="token variable"><span class="token variable">`</span>MyTitle<span class="token variable">`</span></span>, expected <span class="token variable"><span class="token variable">`</span>string<span class="token variable">`</span></span><span class="token builtin class-name">.</span>
</code></pre></div></blockquote> <p>æ›´å¤šçš„<code>PropTypes</code>è®¾ç½®ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html#gatsby-focus-wrapper" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <blockquote><p><a href="https://chinese.freecodecamp.org/learn/front-end-development-libraries/react/use-proptypes-to-define-the-props-you-expect" target="_blank" rel="noopener noreferrer">ä¹‹å‰åœ¨fccä¸­å­¦ä¹ åˆ°çš„ å®šä¹‰Propsç±»å‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ˜¯åœ¨ç»„ä»¶ç±»ä¹‹å¤–</p> <p>ä¸Šé¢å­¦ä¹ åˆ°çš„ç›´æ¥åœ¨ç»„ä»¶ç±»é‡Œé¢å®šä¹‰ä¹Ÿå¾ˆæ˜¯ç®€å•ï¼</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">ShoppingCart</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">porps</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>Items <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Items</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">porps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Current Quantity <span class="token keyword">of</span> Items <span class="token keyword">in</span> <span class="token literal-property property">Cart</span><span class="token operator">:</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>quantity<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token comment">// è¿™é‡Œå®šä¹‰ propTypes å±æ€§ éªŒè¯ç»„ä»¶æ˜¯å¦æ¥æ”¶äº†æ­£ç¡®ç±»å‹çš„ props</span>
Items<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">quantity</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <h4 id="getdefaultprops-è®¾ç½®ç»„ä»¶å±æ€§çš„é»˜è®¤å€¼"><a href="#getdefaultprops-è®¾ç½®ç»„ä»¶å±æ€§çš„é»˜è®¤å€¼" class="header-anchor">#</a> <code>getDefaultProps</code>-è®¾ç½®ç»„ä»¶å±æ€§çš„é»˜è®¤å€¼</h4> <blockquote><p>æ—§ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> MyTitle <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">getDefaultProps</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span> <span class="token operator">:</span> <span class="token string">'Hello World'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyTitle</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>body
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <blockquote><p>æ–°ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">MyTitle</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span> 
        <span class="token comment">// as static property</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Hello World'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç ä¼šè¾“å‡º&quot;Hello World&quot;ã€‚</p> <h3 id="state"><a href="#state" class="header-anchor">#</a> State</h3> <h4 id="ç»„ä»¶ä¸ç”¨æˆ·çš„äº’åŠ¨-this-state"><a href="#ç»„ä»¶ä¸ç”¨æˆ·çš„äº’åŠ¨-this-state" class="header-anchor">#</a> ç»„ä»¶ä¸ç”¨æˆ·çš„äº’åŠ¨-<code>this.state</code></h4> <p>React çš„ä¸€å¤§åˆ›æ–°ï¼Œå°±æ˜¯å°†ç»„ä»¶çœ‹æˆæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œä¸€å¼€å§‹æœ‰ä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼Œç„¶åç”¨æˆ·äº’åŠ¨ï¼Œå¯¼è‡´çŠ¶æ€å˜åŒ–ï¼Œä»è€Œè§¦å‘é‡æ–°æ¸²æŸ“ UI ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo08/index.html" target="_blank" rel="noopener noreferrer"><code>demo08</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼‰ã€‚</p> <blockquote><p>æ—§ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> LikeButton <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/*getInitialState: function() {
    return {liked: false};
  },*/</span>
  <span class="token function-variable function">handleClick</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>liked<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>liked <span class="token operator">?</span> <span class="token string">'like'</span> <span class="token operator">:</span> <span class="token string">'haven\'t liked'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        You </span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token plain-text"> this. Click to toggle.
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LikeButton</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <blockquote><p>æ–°ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">LikeButton</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token comment">/*constructor(props){
        super(props);
        this.state = {
            liked : false
        }
        this.handleClick = this.handleClick.bind(this);// æ—¶åˆ»è®°ä½è¦ç»‘å®šè¿™ä¸ªæ–¹æ³•
    }*/</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>liked<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>liked <span class="token operator">?</span> <span class="token string">'like'</span> <span class="token operator">:</span> <span class="token string">'haven\'t liked'</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        		You </span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token plain-text"> this.Click to toggle
        	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ª <code>LikeButton</code> ç»„ä»¶ï¼Œ</p> <blockquote><p>å®ƒçš„ <code>getInitialState</code> æ–¹æ³•ç”¨äºå®šä¹‰â€”â€”</p> <ul><li>åˆå§‹çŠ¶æ€state(<strong>æ–°ç‰ˆæœ¬ä¸­ä½¿ç”¨æ„é€ å‡½æ•°æ¥å®šä¹‰state</strong>)ï¼Œä¹Ÿå°±æ˜¯<strong>ä¸€ä¸ªå¯¹è±¡</strong>ï¼Œè¿™ä¸ªå¯¹è±¡<u>å¯ä»¥é€šè¿‡ <code>this.state</code> å±æ€§è¯»å–</u>ã€‚</li></ul></blockquote> <p>å½“ç”¨æˆ·ç‚¹å‡»ç»„ä»¶ï¼Œå¯¼è‡´çŠ¶æ€å˜åŒ–ï¼Œ<code>this.setState</code> æ–¹æ³•å°±ä¿®æ”¹çŠ¶æ€å€¼ï¼Œæ¯æ¬¡ä¿®æ”¹ä»¥åï¼Œ<strong>è‡ªåŠ¨è°ƒç”¨ <code>this.render</code> æ–¹æ³•</strong>ï¼Œå†æ¬¡æ¸²æŸ“ç»„ä»¶ã€‚</p> <h4 id="åŒºåˆ†propsä¸state"><a href="#åŒºåˆ†propsä¸state" class="header-anchor">#</a> åŒºåˆ†propsä¸state</h4> <p>ç”±äº <code>this.props</code> å’Œ <code>this.state</code> éƒ½ç”¨äºæè¿°ç»„ä»¶çš„ç‰¹æ€§ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ··æ·†ã€‚</p> <p>ä¸€ä¸ªç®€å•çš„åŒºåˆ†æ–¹æ³•æ˜¯ï¼š</p> <ul><li><code>this.props</code> è¡¨ç¤ºé‚£äº›ä¸€æ—¦å®šä¹‰ï¼Œå°±ä¸å†æ”¹å˜çš„ç‰¹æ€§</li> <li>è€Œ <code>this.state</code> æ˜¯ä¼šéšç€ç”¨æˆ·äº’åŠ¨è€Œäº§ç”Ÿå˜åŒ–çš„ç‰¹æ€§ã€‚</li></ul> <p><a href="https://react.docschina.org/docs/faq-state.html#what-is-the-difference-between-state-and-props" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p> <blockquote><p>propsï¼ˆâ€œpropertiesâ€ çš„ç¼©å†™ï¼‰å’Œ state éƒ½æ˜¯<strong>æ™®é€šçš„ JavaScript å¯¹è±¡</strong>ã€‚
å®ƒä»¬éƒ½æ˜¯<strong>ç”¨æ¥ä¿å­˜ä¿¡æ¯</strong>çš„ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥æ§åˆ¶ç»„ä»¶çš„æ¸²æŸ“è¾“å‡ºï¼Œè€Œå®ƒä»¬çš„ä¸€ä¸ªé‡è¦çš„ä¸åŒç‚¹å°±æ˜¯ï¼š</p> <ul><li>props æ˜¯<strong>ä¼ é€’ç»™ç»„ä»¶</strong>çš„ï¼ˆç±»ä¼¼äºå‡½æ•°çš„å½¢å‚ï¼‰</li> <li>è€Œ state æ˜¯<strong>åœ¨ç»„ä»¶å†…è¢«ç»„ä»¶è‡ªå·±ç®¡ç†çš„</strong>ï¼ˆç±»ä¼¼äºåœ¨ä¸€ä¸ªå‡½æ•°å†…å£°æ˜çš„å˜é‡ï¼‰</li></ul></blockquote> <blockquote><p>å®˜æ–¹æ¨èé˜…è¯»ææ–™</p> <ul><li><a href="https://github.com/uberVU/react-guide/blob/master/props-vs-state.md" target="_blank" rel="noopener noreferrer">Props vs State<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://lucybain.com/blog/2016/react-state-vs-pros/" target="_blank" rel="noopener noreferrer">ReactJS: Props vs. State<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></blockquote> <h3 id="refs"><a href="#refs" class="header-anchor">#</a> <a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener noreferrer">Refs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>Refs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬<strong>è®¿é—® DOM èŠ‚ç‚¹æˆ–åœ¨ render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ </strong>ã€‚</p> <p>åœ¨å…¸å‹çš„ React æ•°æ®æµä¸­ï¼Œ<a href="https://zh-hans.reactjs.org/docs/components-and-props.html" target="_blank" rel="noopener noreferrer">props<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ˜¯çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶äº¤äº’çš„å”¯ä¸€æ–¹å¼ã€‚è¦ä¿®æ”¹ä¸€ä¸ªå­ç»„ä»¶ï¼Œä½ éœ€è¦ä½¿ç”¨æ–°çš„ props æ¥é‡æ–°æ¸²æŸ“å®ƒã€‚</p> <p>ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨å…¸å‹æ•°æ®æµä¹‹å¤–å¼ºåˆ¶ä¿®æ”¹å­ç»„ä»¶ã€‚è¢«ä¿®æ”¹çš„å­ç»„ä»¶å¯èƒ½æ˜¯ä¸€ä¸ª React ç»„ä»¶çš„å®ä¾‹ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚å¯¹äºè¿™ä¸¤ç§æƒ…å†µï¼ŒReact éƒ½æä¾›äº†è§£å†³åŠæ³•ã€‚</p> <h4 id="ä½•æ—¶ä½¿ç”¨-refs"><a href="#ä½•æ—¶ä½¿ç”¨-refs" class="header-anchor">#</a> ä½•æ—¶ä½¿ç”¨ Refs</h4> <p>ä¸‹é¢æ˜¯å‡ ä¸ªé€‚åˆä½¿ç”¨ refs çš„æƒ…å†µï¼š</p> <ul><li>ç®¡ç†ç„¦ç‚¹ï¼Œæ–‡æœ¬é€‰æ‹©æˆ–åª’ä½“æ’­æ”¾ã€‚</li> <li>è§¦å‘å¼ºåˆ¶åŠ¨ç”»ã€‚</li> <li>é›†æˆç¬¬ä¸‰æ–¹ DOM åº“ã€‚</li></ul> <p>é¿å…ä½¿ç”¨ refs æ¥åšä»»ä½•å¯ä»¥é€šè¿‡å£°æ˜å¼å®ç°æ¥å®Œæˆçš„äº‹æƒ…ã€‚</p> <p>ä¸¾ä¸ªä¾‹å­ï¼Œé¿å…åœ¨ <code>Dialog</code> ç»„ä»¶é‡Œæš´éœ² <code>open()</code> å’Œ <code>close()</code> æ–¹æ³•ï¼Œæœ€å¥½ä¼ é€’ <code>isOpen</code> å±æ€§ã€‚</p> <h4 id="å‹¿è¿‡åº¦ä½¿ç”¨-refs"><a href="#å‹¿è¿‡åº¦ä½¿ç”¨-refs" class="header-anchor">#</a> å‹¿è¿‡åº¦ä½¿ç”¨ Refs</h4> <p>ä½ å¯èƒ½é¦–å…ˆä¼šæƒ³åˆ°ä½¿ç”¨ refs åœ¨ä½ çš„ app ä¸­â€œè®©äº‹æƒ…å‘ç”Ÿâ€ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œè¯·èŠ±ä¸€ç‚¹æ—¶é—´ï¼Œè®¤çœŸå†è€ƒè™‘ä¸€ä¸‹ state å±æ€§åº”è¯¥è¢«å®‰æ’åœ¨å“ªä¸ªç»„ä»¶å±‚ä¸­ã€‚é€šå¸¸ä½ ä¼šæƒ³æ˜ç™½ï¼Œè®©æ›´é«˜çš„ç»„ä»¶å±‚çº§æ‹¥æœ‰è¿™ä¸ª stateï¼Œæ˜¯æ›´æ°å½“çš„ã€‚æŸ¥çœ‹ <a href="https://zh-hans.reactjs.org/docs/lifting-state-up.html" target="_blank" rel="noopener noreferrer">çŠ¶æ€æå‡<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä»¥è·å–æ›´å¤šæœ‰å…³ç¤ºä¾‹ã€‚</p> <h4 id="å®ä¾‹-åˆ›å»º-refs"><a href="#å®ä¾‹-åˆ›å»º-refs" class="header-anchor">#</a> å®ä¾‹-åˆ›å»º Refs</h4> <p>Refs æ˜¯ä½¿ç”¨ <code>React.createRef()</code> åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ <code>ref</code> å±æ€§é™„åŠ åˆ° React å…ƒç´ ã€‚åœ¨æ„é€ ç»„ä»¶æ—¶ï¼Œé€šå¸¸å°† Refs åˆ†é…ç»™å®ä¾‹å±æ€§ï¼Œä»¥ä¾¿å¯ä»¥åœ¨æ•´ä¸ªç»„ä»¶ä¸­å¼•ç”¨å®ƒä»¬ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>myRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="è®¿é—®-refs"><a href="#è®¿é—®-refs" class="header-anchor">#</a> è®¿é—® Refs</h4> <p>å½“ ref è¢«ä¼ é€’ç»™ <code>render</code> ä¸­çš„å…ƒç´ æ—¶ï¼Œ<u>å¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨å¯ä»¥åœ¨ ref çš„ <code>current</code> å±æ€§ä¸­è¢«è®¿é—®ã€‚</u></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
</code></pre></div><p>ref çš„å€¼æ ¹æ®èŠ‚ç‚¹çš„ç±»å‹è€Œæœ‰æ‰€ä¸åŒï¼š</p> <ul><li>å½“ <code>ref</code> å±æ€§ç”¨äº HTML å…ƒç´ æ—¶ï¼Œæ„é€ å‡½æ•°ä¸­ä½¿ç”¨ <code>React.createRef()</code> åˆ›å»ºçš„ <code>ref</code> æ¥æ”¶åº•å±‚ DOM å…ƒç´ ä½œä¸ºå…¶ <code>current</code> å±æ€§ã€‚</li> <li>å½“ <code>ref</code> å±æ€§ç”¨äºè‡ªå®šä¹‰ class ç»„ä»¶æ—¶ï¼Œ<code>ref</code> å¯¹è±¡æ¥æ”¶ç»„ä»¶çš„æŒ‚è½½å®ä¾‹ä½œä¸ºå…¶ <code>current</code> å±æ€§ã€‚</li> <li><strong>ä½ ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ <code>ref</code> å±æ€§</strong>ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰å®ä¾‹ã€‚</li></ul> <h4 id="å®ä¾‹-å°†è™šæ‹Ÿdomæ’å…¥æ–‡æ¡£-è·å–çœŸå®dom"><a href="#å®ä¾‹-å°†è™šæ‹Ÿdomæ’å…¥æ–‡æ¡£-è·å–çœŸå®dom" class="header-anchor">#</a> å®ä¾‹-å°†è™šæ‹ŸDOMæ’å…¥æ–‡æ¡£ï¼Œè·å–çœŸå®DOM</h4> <p>ç»„ä»¶å¹¶ä¸æ˜¯çœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œè€Œæ˜¯å­˜åœ¨äºå†…å­˜ä¹‹ä¸­çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå«åšè™šæ‹Ÿ DOM ï¼ˆvirtual DOMï¼‰ã€‚åªæœ‰å½“å®ƒæ’å…¥æ–‡æ¡£ä»¥åï¼Œæ‰ä¼šå˜æˆçœŸå®çš„ DOM ã€‚</p> <p>æ ¹æ® React çš„è®¾è®¡ï¼Œ<strong>æ‰€æœ‰çš„ DOM å˜åŠ¨ï¼Œéƒ½å…ˆåœ¨è™šæ‹Ÿ DOM ä¸Šå‘ç”Ÿï¼Œç„¶åå†å°†å®é™…å‘ç”Ÿå˜åŠ¨çš„éƒ¨åˆ†ï¼Œåæ˜ åœ¨çœŸå® DOMä¸Š</strong>ï¼Œè¿™ç§ç®—æ³•å«åš <a href="https://zh-hans.reactjs.org/docs/reconciliation.html#the-diffing-algorithm" target="_blank" rel="noopener noreferrer">DOM diff<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œå®ƒå¯ä»¥æå¤§æé«˜ç½‘é¡µçš„æ€§èƒ½è¡¨ç°ã€‚</p> <p>ä½†æ˜¯ï¼Œæœ‰æ—¶éœ€è¦ä»ç»„ä»¶è·å–çœŸå® DOM çš„èŠ‚ç‚¹ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ° <code>ref</code> å±æ€§ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo07/index.html" target="_blank" rel="noopener noreferrer">demo07<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼‰ã€‚</p> <blockquote><p>æ—§ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">handleClick</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>myTextInput<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myTextInput<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Focus the text input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>éœ€è¦æ³¨æ„ï¼Œæœ¬ä¾‹ä¸­æåˆ°çš„<a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html#legacy-api-string-refs" target="_blank" rel="noopener noreferrer">å­—ç¬¦å‹çš„refå±æ€§å·²ç»è¿‡æ—¶äº†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼ï¼ˆä¸»è¦æ˜¯å› ä¸ºæ•ˆç‡ä¸é«˜+å­˜åœ¨<a href="https://github.com/facebook/react/pull/8333#issuecomment-271648615" target="_blank" rel="noopener noreferrer">ä¸€äº›é—®é¢˜<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰</p> <p>ä¸è¿‡ç”¨è¿™ä¸ªçš„ç¨‹åºå‘˜å¯èƒ½è¿˜æŒºå¤š å› ä¸ºæ¯”è¾ƒç®€å•çœäº‹å„¿~</p> <p>ä¸¥è°¨èµ·è§ï¼Œå»ºè®®ä½¿ç”¨ä¸‹é¢æ–°ç‰ˆæœ¬ä¸­çš„<a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html#caveats-with-callback-refs" target="_blank" rel="noopener noreferrer">å›è°ƒå‡½æ•°æ–¹å¼<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼</p></blockquote> <blockquote><p><a href="https://github.com/ruanyf/react-demos/blob/master/demo07/index.html" target="_blank" rel="noopener noreferrer">æ–°ç‰ˆæœ¬<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ä½¿ç”¨äº†<a href="https://zh-hans.reactjs.org/docs/react-api.html#reactcreateref" target="_blank" rel="noopener noreferrer"><code>React.createRef</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œåˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿé€šè¿‡refå±æ€§é™„åŠ åˆ° React å…ƒç´ çš„ <a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener noreferrer">ref<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>myTextInput <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// myTextInputå°±æ˜¯åˆ›å»ºçš„Refs</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç»‘å®šç‚¹å‡»äº‹ä»¶</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//  ç‚¹å‡»äº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œä½œç”¨ï¼šåœ¨ç‚¹å‡»æŒ‰é’®ä¹‹åå¯¹â€œrenderä¸­çš„å…ƒç´ â€è¿›è¡Œèšç„¦</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>myTextInput<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span><span class="token comment">/* å°†refä¼ ç»™renderä¸­çš„å…ƒç´ ï¼Œå¯¹è¯¥èŠ‚ç‚¹ï¼ˆinputè¾“å…¥æ¡†ï¼‰çš„å¼•ç”¨å¯ä»¥åœ¨refçš„currentå±æ€§ä¸­è®¿é—®ï¼è§ä¸Šé¢ç¬¬9è¡Œçš„ä»£ç  */</span><span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>myTextInput<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"> 
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Focus te text input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç ä¸­ï¼Œç»„ä»¶ <code>MyComponent</code> çš„å­èŠ‚ç‚¹æœ‰ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†ï¼Œç”¨äºè·å–ç”¨æˆ·çš„è¾“å…¥ã€‚è¿™æ—¶å°±å¿…é¡»<strong>è·å–çœŸå®çš„ DOM èŠ‚ç‚¹</strong>ï¼Œè™šæ‹Ÿ DOM æ˜¯æ‹¿ä¸åˆ°ç”¨æˆ·è¾“å…¥çš„ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ–‡æœ¬è¾“å…¥æ¡†å¿…é¡»æœ‰ä¸€ä¸ª <code>ref</code> å±æ€§ï¼Œç„¶å <code>this.refs.[refName]</code> å°±ä¼šè¿”å›è¿™ä¸ªçœŸå®çš„ DOM èŠ‚ç‚¹ã€‚</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110261141127.png" alt="image-20211026114118072"></p> <blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äº <code>this.refs.[refName]</code> å±æ€§<strong>è·å–çš„æ˜¯çœŸå® DOM</strong> ï¼Œæ‰€ä»¥å¿…é¡»ç­‰åˆ°è™šæ‹Ÿ DOM æ’å…¥æ–‡æ¡£ä»¥åï¼Œæ‰èƒ½ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p> <p>ä¸Šé¢ä»£ç ä¸­ï¼Œé€šè¿‡ä¸ºç»„ä»¶æŒ‡å®š <code>Click</code> äº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œç¡®ä¿äº†åªæœ‰ç­‰åˆ°çœŸå® DOM å‘ç”Ÿ <code>Click</code> äº‹ä»¶ä¹‹åï¼Œæ‰ä¼šè¯»å– <code>this.refs.[refName]</code> å±æ€§ã€‚</p> <p>React ç»„ä»¶æ”¯æŒå¾ˆå¤šäº‹ä»¶ï¼Œé™¤äº† <code>Click</code> äº‹ä»¶ä»¥å¤–ï¼Œè¿˜æœ‰ <code>KeyDown</code> ã€<code>Copy</code>ã€<code>Scroll</code> ç­‰ï¼Œå®Œæ•´çš„äº‹ä»¶æ¸…å•è¯·æŸ¥çœ‹<a href="https://facebook.github.io/react/docs/events.html#supported-events" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p></blockquote> <h3 id="è¡¨å•"><a href="#è¡¨å•" class="header-anchor">#</a> è¡¨å•</h3> <h4 id="reactä¸­è¡¨å•å…ƒç´ -domå…ƒç´ æœ‰äº›ä¸åŒ"><a href="#reactä¸­è¡¨å•å…ƒç´ -domå…ƒç´ æœ‰äº›ä¸åŒ" class="header-anchor">#</a> Reactä¸­è¡¨å•å…ƒç´ &amp;DOMå…ƒç´ æœ‰äº›ä¸åŒï¼</h4> <p>åœ¨ React é‡Œï¼ŒHTML è¡¨å•å…ƒç´ çš„å·¥ä½œæ–¹å¼å’Œå…¶ä»–çš„ DOM å…ƒç´ æœ‰äº›ä¸åŒï¼Œè¿™æ˜¯å› ä¸ºè¡¨å•å…ƒç´ é€šå¸¸ä¼šä¿æŒä¸€äº›å†…éƒ¨çš„ stateã€‚ä¾‹å¦‚è¿™ä¸ªçº¯ HTML è¡¨å•åªæ¥å—ä¸€ä¸ªåç§°ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>
    åå­—:
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æäº¤<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ­¤è¡¨å•å…·æœ‰é»˜è®¤çš„ HTML è¡¨å•è¡Œä¸ºï¼Œå³åœ¨ç”¨æˆ·æäº¤è¡¨å•åæµè§ˆåˆ°æ–°é¡µé¢ã€‚å¦‚æœä½ åœ¨ React ä¸­æ‰§è¡Œç›¸åŒçš„ä»£ç ï¼Œå®ƒä¾ç„¶æœ‰æ•ˆã€‚ä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨ JavaScript å‡½æ•°å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¤„ç†è¡¨å•çš„æäº¤ï¼Œ åŒæ—¶è¿˜å¯ä»¥è®¿é—®ç”¨æˆ·å¡«å†™çš„è¡¨å•æ•°æ®ã€‚å®ç°è¿™ç§æ•ˆæœçš„æ ‡å‡†æ–¹å¼æ˜¯ä½¿ç”¨â€œå—æ§ç»„ä»¶â€ã€‚</p> <h4 id="ä½¿ç”¨å—æ§ç»„ä»¶è®¿é—®ç”¨æˆ·å¡«å†™çš„è¡¨å•æ•°æ®"><a href="#ä½¿ç”¨å—æ§ç»„ä»¶è®¿é—®ç”¨æˆ·å¡«å†™çš„è¡¨å•æ•°æ®" class="header-anchor">#</a> ä½¿ç”¨<strong>å—æ§ç»„ä»¶</strong>è®¿é—®ç”¨æˆ·å¡«å†™çš„è¡¨å•æ•°æ®</h4> <blockquote><p><a href="https://react.docschina.org/docs/forms.html#controlled-components" target="_blank" rel="noopener noreferrer">å—æ§ç»„ä»¶çš„æ¦‚å¿µ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼š</p> <ul><li>åœ¨ HTML ä¸­ï¼Œè¡¨å•å…ƒç´ ï¼ˆå¦‚<code>&lt;input&gt;</code>ã€ <code>&lt;textarea&gt;</code> å’Œ <code>&lt;select&gt;</code>ï¼‰ä¹‹ç±»çš„è¡¨å•å…ƒç´ é€šå¸¸è‡ªå·±ç»´æŠ¤ çŠ¶æ€ï¼Œå¹¶æ ¹æ®ç”¨æˆ·è¾“å…¥è¿›è¡Œæ›´æ–°ã€‚</li> <li>è€Œåœ¨ React ä¸­ï¼Œå¯å˜çŠ¶æ€ï¼ˆmutable stateï¼‰é€šå¸¸ä¿å­˜åœ¨ç»„ä»¶çš„ state å±æ€§ä¸­ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡ä½¿ç”¨ <a href="https://react.docschina.org/docs/react-component.html#setstate" target="_blank" rel="noopener noreferrer"><code>setState()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ¥æ›´æ–°ã€‚</li></ul> <p>æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œä½¿reactå¾—stateæˆä¸ºâ€œå”¯ä¸€æ•°æ®æºâ€ï¼›æ¸²æŸ“è¡¨å•çš„ React ç»„ä»¶è¿˜æ§åˆ¶ç€ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œã€‚</p> <p>è¢«React**ä»¥è¿™ç§æ–¹å¼æ§åˆ¶ï¼ˆç”¨<code>setState()</code>æ›´æ–°è¡¨å•å±æ€§å€¼ï¼‰**å–å€¼å¾—è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšâ€”â€”<strong>å—æ§ç»„ä»¶</strong></p></blockquote> <p>ç”¨æˆ·åœ¨è¡¨å•å¡«å…¥çš„å†…å®¹ï¼Œå±äºç”¨æˆ·è·Ÿç»„ä»¶çš„äº’åŠ¨ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ <code>this.props</code> è¯»å–ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo09/index.html" target="_blank" rel="noopener noreferrer"><code>demo9</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼‰ã€‚</p> <blockquote><p>æ—§ç‰ˆæœ¬</p> <p>æ²¡æœ‰æ„é€ å‡½æ•°çœ‹èµ·æ¥é›€æ°æœ‰ç‚¹æ€ªå“ˆ</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> Input <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">getInitialState</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'Hello!'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">handleChange</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <blockquote><p>æ–°ç‰ˆæœ¬</p> <p>è¿™é‡Œæˆ‘ç¨å¾®æ”¹äº†ä¸€ä¸‹stateä¸­å±æ€§çš„å˜é‡åï¼ŒåŸæ¥çš„è·Ÿ<code>event.target.value</code>ä¸­çš„valueé‡å äº†æœ‰ç‚¹éš¾å—XD</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Input</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">slogan</span><span class="token operator">:</span> <span class="token string">'Hi!This is bill~'</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">slogan</span><span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> slogan <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>slogan<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>slogan<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>slogan<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>æˆ‘ä»¬é€šè¿‡<code>event.target.value</code>æ¥è¯»å–ç”¨æˆ·è¾“å…¥çš„å€¼ï¼Œå¹¶ç”¨è¿™ä¸ªå€¼æ›´æ–°ç»„ä»¶stateä¸­çš„å¯¹åº”å±æ€§(value)</p></blockquote></blockquote> <p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ–‡æœ¬è¾“å…¥æ¡†çš„å€¼ï¼Œä¸èƒ½ç”¨ <code>this.props.value</code> è¯»å–ï¼Œè€Œè¦å®šä¹‰ä¸€ä¸ª <code>onChange</code> äº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œ<strong>é€šè¿‡ <code>event.target.value</code> è¯»å–ç”¨æˆ·è¾“å…¥çš„å€¼</strong>ã€‚</p> <p><code>textarea</code> å…ƒç´ ã€<code>select</code>å…ƒç´ ã€<code>radio</code>å…ƒç´ éƒ½å±äºè¿™ç§æƒ…å†µï¼Œæ›´å¤šä»‹ç»è¯·å‚è€ƒ<a href="https://facebook.github.io/react/docs/forms.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <ul><li>å°ç»“</li></ul> <p>å—æ§ç»„ä»¶ä½¿ç”¨stateæ¥å­˜æ•°æ®ï¼Œåˆ›å»º<strong>å›è°ƒå‡½æ•°</strong>å¹¶ä½¿ç”¨<code>setState({æ•°æ®:event.target.value})</code>æ¥æ›´æ–°æ•°æ®ï¼Œåœ¨è¡¨å•ä¸­ä½¿ç”¨äº‹ä»¶ç›‘å¬å¹¶è°ƒç”¨å›è°ƒå‡½æ•°ã€‚</p> <h4 id="å—æ§ç»„ä»¶çš„æ›¿ä»£å“-éå—æ§ç»„ä»¶"><a href="#å—æ§ç»„ä»¶çš„æ›¿ä»£å“-éå—æ§ç»„ä»¶" class="header-anchor">#</a> å—æ§ç»„ä»¶çš„æ›¿ä»£å“-éå—æ§ç»„ä»¶</h4> <p>æœ‰æ—¶ä½¿ç”¨å—æ§ç»„ä»¶ä¼šå¾ˆéº»çƒ¦ï¼Œå› ä¸ºä½ éœ€è¦ä¸º<strong>æ•°æ®å˜åŒ–çš„æ¯ç§æ–¹å¼</strong>éƒ½ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªReactç»„ä»¶ä¼ é€’æ‰€æœ‰çš„è¾“å…¥stateã€‚</p> <p>å½“ä½ å°†ä¹‹å‰çš„ä»£ç åº“è½¬æ¢ä¸º React æˆ–å°† React åº”ç”¨ç¨‹åºä¸é React åº“é›†æˆæ—¶ï¼Œè¿™å¯èƒ½ä¼šä»¤äººåŒçƒ¦ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›ä½¿ç”¨<a href="https://react.docschina.org/docs/uncontrolled-components.html" target="_blank" rel="noopener noreferrer">éå—æ§ç»„ä»¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, è¿™æ˜¯å®ç°è¾“å…¥è¡¨å•çš„å¦ä¸€ç§æ–¹å¼ã€‚</p> <blockquote><p><a href="https://react.docschina.org/docs/uncontrolled-components.html" target="_blank" rel="noopener noreferrer">éå—æ§ç»„ä»¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>åœ¨<u>å¤§å¤šæ•°æƒ…å†µ</u>ä¸‹ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ <a href="https://react.docschina.org/docs/forms.html#controlled-components" target="_blank" rel="noopener noreferrer">å—æ§ç»„ä»¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¥å¤„ç†è¡¨å•æ•°æ®ã€‚åœ¨ä¸€ä¸ªå—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•æ•°æ®æ˜¯ç”± React ç»„ä»¶æ¥ç®¡ç†çš„ã€‚å¦ä¸€ç§æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨éå—æ§ç»„ä»¶ï¼Œè¿™æ—¶è¡¨å•æ•°æ®å°†<strong>äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç†</strong>ã€‚</p></blockquote> <p>æœ‰æœ¨æœ‰å¾ˆè€³ç†Ÿï¼Ÿè®¿é—®DOMèŠ‚ç‚¹æ¥è·å–è¡¨å•æ•°æ®ï¼Ÿ</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110271118065.png" alt="image-20211027111800991"></p> <blockquote><p>è¦ç¼–å†™ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªçŠ¶æ€æ›´æ–°éƒ½ç¼–å†™æ•°æ®å¤„ç†å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ <a href="https://react.docschina.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener noreferrer">ä½¿ç”¨ ref<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ã€‚</p></blockquote> <h3 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h3> <h4 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ç®€å•ç†è§£"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ç®€å•ç†è§£" class="header-anchor">#</a> ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ç®€å•ç†è§£</h4> <ul><li>ç»„ä»¶ä»åˆ›å»ºåˆ°æ­»äº¡å®ƒä¼šç»å†ä¸€äº›ç‰¹å®šçš„é˜¶æ®µã€‚</li> <li>Reactç»„ä»¶ä¸­åŒ…å«ä¸€ç³»åˆ—å‹¾å­å‡½æ•°(ç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°), ä¼š<strong>åœ¨ç‰¹å®šçš„æ—¶åˆ»è°ƒç”¨</strong>ã€‚</li> <li>æˆ‘ä»¬åœ¨å®šä¹‰ç»„ä»¶æ—¶ï¼Œä¼šåœ¨ç‰¹å®šçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°ä¸­ï¼Œåšç‰¹å®šçš„å·¥ä½œã€‚</li></ul> <p>ç»„ä»¶çš„<a href="https://facebook.github.io/react/docs/working-with-the-browser.html#component-lifecycle" target="_blank" rel="noopener noreferrer">ç”Ÿå‘½å‘¨æœŸ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>åˆ†æˆä¸‰ä¸ªçŠ¶æ€ï¼š</p> <blockquote><ul><li>Mountingï¼šå·²æ’å…¥çœŸå® DOM</li> <li>Updatingï¼šæ­£åœ¨è¢«é‡æ–°æ¸²æŸ“</li> <li>Unmountingï¼šå·²ç§»å‡ºçœŸå® DOM</li></ul></blockquote> <p>React ä¸ºæ¯ä¸ªçŠ¶æ€éƒ½æä¾›äº†å¤„ç†å‡½æ•°ï¼Œ</p> <ul><li><code>will</code> å‡½æ•°åœ¨è¿›å…¥çŠ¶æ€ä¹‹å‰è°ƒç”¨</li> <li><code>did</code> å‡½æ•°åœ¨è¿›å…¥çŠ¶æ€ä¹‹åè°ƒç”¨</li> <li><code>unmount</code>å‡½æ•°åœ¨ç»“æŸçŠ¶æ€æ—¶è°ƒç”¨ï¼Œåšä¸€äº›æ”¶å°¾å·¥ä½œ</li></ul> <p>ä¸‰ç§çŠ¶æ€å…±è®¡äº”ç§å¤„ç†å‡½æ•°ï¼ˆé’©å­å‡½æ•° å³ä¸ºç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°ï¼‰ã€‚</p> <blockquote><ul><li><code>componentWillMount()</code> Ã—</li> <li><code>componentDidMount()</code>  âˆš</li> <li><code>componentWillUpdate(object nextProps, object nextState)</code> Ã—</li> <li><code>componentDidUpdate(object prevProps, object prevState)</code></li> <li><code>componentWillUnmount()</code> âˆš</li></ul></blockquote> <p>æ­¤å¤–ï¼ŒReact è¿˜æä¾›ä¸¤ç§ç‰¹æ®ŠçŠ¶æ€çš„å¤„ç†å‡½æ•°ã€‚</p> <blockquote><ul><li><code>componentWillReceiveProps(object nextProps)</code>ï¼šå·²åŠ è½½ç»„ä»¶æ”¶åˆ°æ–°çš„å‚æ•°æ—¶è°ƒç”¨</li> <li><code>shouldComponentUpdate(object nextProps, object nextState)</code>ï¼šç»„ä»¶åˆ¤æ–­æ˜¯å¦é‡æ–°æ¸²æŸ“æ—¶è°ƒç”¨</li></ul></blockquote> <p>è¿™äº›æ–¹æ³•çš„è¯¦ç»†è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒ<a href="https://facebook.github.io/react/docs/component-specs.html#lifecycle-methods" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo10/index.html" target="_blank" rel="noopener noreferrer"><code>demo10</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼‰ã€‚</p> <blockquote><p>æ—§ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> Hello <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">getInitialState</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1.0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">componentDidMount</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> opacity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>opacity<span class="token punctuation">;</span>
      opacity <span class="token operator">-=</span> <span class="token number">.05</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>opacity <span class="token operator">&lt;</span> <span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        opacity <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">opacity</span><span class="token operator">:</span> opacity
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>opacity<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        Hello </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>world<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>body
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <blockquote><p>æ–°ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// åœ¨è¿™ä¸ªé’©å­å‡½æ•°ä¸­ä¸€èˆ¬ä¼šè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„äº‹</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> opacity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>opacity<span class="token punctuation">;</span>
            opacity <span class="token operator">-=</span> <span class="token number">0.05</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>opacity <span class="token operator">&lt;</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                opacity <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">opacity</span><span class="token operator">:</span> opacity
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ¯éš”0.1ç§’ å°†é€æ˜åº¦å‡å°‘0.05ï¼Œå¹¶ä½¿ç”¨setStateæ›´æ–°opacityé€æ˜åº¦</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div style <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>opacity<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Hello <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç åœ¨<code>hello</code>ç»„ä»¶åŠ è½½ä»¥åï¼Œé€šè¿‡ <code>componentDidMount</code> æ–¹æ³•è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯éš”100æ¯«ç§’ï¼Œå°±é‡æ–°è®¾ç½®ç»„ä»¶çš„é€æ˜åº¦ï¼Œä»è€Œå¼•å‘é‡æ–°æ¸²æŸ“ã€‚</p> <p>å¦å¤–ï¼Œç»„ä»¶çš„<code>style</code>å±æ€§çš„è®¾ç½®æ–¹å¼ä¹Ÿå€¼å¾—æ³¨æ„ï¼Œä¸èƒ½å†™æˆ</p> <blockquote><div class="language-jsx extra-class"><pre class="language-jsx"><code>style<span class="token operator">=</span><span class="token string">&quot;opacity:{this.state.opacity};&quot;</span>
</code></pre></div></blockquote> <p>è€Œè¦å†™æˆ</p> <blockquote><div class="language-jsx extra-class"><pre class="language-jsx"><code>style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>opacity<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div></blockquote> <p>è¿™æ˜¯å› ä¸º <strong>React ç»„ä»¶æ ·å¼</strong>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ç¬¬ä¸€é‡å¤§æ‹¬å·è¡¨ç¤ºè¿™æ˜¯ JavaScript è¯­æ³•ï¼Œç¬¬äºŒé‡å¤§æ‹¬å·è¡¨ç¤ºæ ·å¼å¯¹è±¡ã€‚</p> <h4 id="é‡è¦çš„ç”Ÿå‘½å‘¨æœŸé’©å­-å³å°†åºŸå¼ƒçš„é’©å­"><a href="#é‡è¦çš„ç”Ÿå‘½å‘¨æœŸé’©å­-å³å°†åºŸå¼ƒçš„é’©å­" class="header-anchor">#</a> é‡è¦çš„ç”Ÿå‘½å‘¨æœŸé’©å­&amp;å³å°†åºŸå¼ƒçš„é’©å­</h4> <h5 id="é‡è¦-å¸¸ç”¨çš„"><a href="#é‡è¦-å¸¸ç”¨çš„" class="header-anchor">#</a> é‡è¦ï¼ˆå¸¸ç”¨çš„ï¼‰</h5> <ul><li><code>render</code>ï¼šåˆå§‹åŒ–æ¸²æŸ“æˆ–æ›´æ–°æ¸²æŸ“è°ƒç”¨</li> <li><code>componentDidMount</code>ï¼šç”¨äºåœ¨é¡µé¢ä¸€ä¸Šæ¥å°±è¿›è¡Œçš„ä¸€äº›æ“ä½œï¼Œä¸€èˆ¬åœ¨è¿™ä¸ªé’©å­é‡Œåšä¸€äº›<strong>åˆå§‹åŒ–</strong>çš„äº‹ã€‚æ¯”å¦‚å¼€å¯ç›‘å¬ã€å¼€å¯å®šæ—¶å™¨ã€ ç”¨æ¥å‘é€ajaxè¯·æ±‚</li> <li><code>componentWillUnmount</code>ï¼šåšä¸€äº›æ”¶å°¾å·¥ä½œ, å¦‚: æ¸…ç†å®šæ—¶å™¨</li></ul> <h5 id="å³å°†åºŸå¼ƒ"><a href="#å³å°†åºŸå¼ƒ" class="header-anchor">#</a> å³å°†åºŸå¼ƒ</h5> <ul><li><code>componentWillMount</code></li> <li><code>componentWillReceiveProps</code></li> <li><code>componentWillUpdate</code></li></ul> <h4 id="ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾-æ—§-ç”Ÿå‘½å‘¨æœŸä¸‰ä¸ªé˜¶æ®µ"><a href="#ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾-æ—§-ç”Ÿå‘½å‘¨æœŸä¸‰ä¸ªé˜¶æ®µ" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾ï¼ˆæ—§ï¼‰&amp;ç”Ÿå‘½å‘¨æœŸä¸‰ä¸ªé˜¶æ®µ</h4> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110271130754.png" alt="image-20211027113050692"></p> <p>ã€1ã€‘<code>ReactDOM.render()</code>è§¦å‘---åˆæ¬¡æ¸²æŸ“</p> <ul><li>constructor()</li> <li><code>componentWillMount()</code>ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¼šåœ¨ç‰ˆæœ¬ 16.X åºŸå¼ƒåœ¨ç‰ˆæœ¬ 17 ç§»é™¤</li> <li>render()â€”â€”å¸¸ç”¨ï¼ˆè¿™è‚¯å®šï¼‰</li> <li><code>componentDidMount()</code> â€”â€” <strong>å¸¸ç”¨</strong> <ul><li>ç”¨äºåœ¨é¡µé¢ä¸€ä¸Šæ¥å°±è¿›è¡Œçš„ä¸€äº›æ“ä½œï¼Œä¸€èˆ¬åœ¨è¿™ä¸ªé’©å­é‡Œåšä¸€äº›åˆå§‹åŒ–çš„äº‹ æ¯”å¦‚ï¼š
<ul><li>å¼€å¯å®šæ—¶å™¨</li> <li>å‘é€ç½‘ç»œè¯·æ±‚</li> <li>è®¢é˜…æ¶ˆæ¯</li></ul></li> <li>ã€æ¥è‡ª<code>freecodecamp</code>ã€‘æŸäº›æ—¶å€™ï¼Œå¤§å¤šæ•° web å¼€å‘äººå‘˜éœ€è¦è°ƒç”¨ API æ¥å£æ¥è·å–æ•°æ®ã€‚ å¦‚æœæ­£åœ¨ä½¿ç”¨ Reactï¼ŒçŸ¥é“åœ¨å“ªé‡Œæ‰§è¡Œè¿™ä¸ªåŠ¨ä½œæ˜¯å¾ˆé‡è¦çš„ã€‚æ‰€ä»¥<a href="https://chinese.freecodecamp.org/learn/front-end-development-libraries/react/use-the-lifecycle-method-componentdidmount" target="_blank" rel="noopener noreferrer">React çš„æœ€ä½³å®è·µæ˜¯åœ¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³• <code>componentDidMount()</code> ä¸­å¯¹æœåŠ¡å™¨è¿›è¡Œ API è°ƒç”¨æˆ–ä»»ä½•å…¶å®ƒè°ƒç”¨<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚ å°†ç»„ä»¶è£…è½½åˆ°DOM åä¼šè°ƒç”¨æ­¤ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚
<ul><li>æ­¤å¤„å¯¹ <code>setState()</code> çš„ä»»ä½•è°ƒç”¨éƒ½å°†è§¦å‘ç»„ä»¶çš„<strong>é‡æ–°æ¸²æŸ“</strong>ã€‚ åœ¨æ­¤æ–¹æ³•ä¸­è°ƒç”¨ API å¹¶ç”¨ API è¿”å›çš„æ•°æ®è®¾ç½® state æ—¶ï¼Œä¸€æ—¦æ”¶åˆ°æ•°æ®ï¼Œå®ƒå°†è‡ªåŠ¨è§¦å‘æ›´æ–°ã€‚</li></ul></li></ul></li></ul> <p>ã€2ã€‘ç”±ç»„ä»¶å†…éƒ¨<code>this.setSate()</code>æˆ–çˆ¶ç»„ä»¶ä»<code>render</code>è§¦å‘ â€”æ›´æ–°é˜¶æ®µ</p> <p>å…¶å®å°±æ˜¯ä¸Šé¢æœ€åä¸€ç‚¹è¯´çš„ â€œå¯¹<code>setState</code>çš„ä»»ä½•è°ƒç”¨éƒ½ä¼šè§¦å‘ç»„ä»¶çš„<strong>é‡æ–°æ¸²æŸ“</strong>ï¼ˆå³ä¸ºæ›´æ–°ï¼‰â€</p> <ul><li><code>shouldComponentUpdate()</code></li> <li><code>componentWillUpdate()</code> - å³å°†åºŸå¼ƒ</li> <li><code>render()</code></li> <li><code>componentDidUpdate()</code></li></ul> <p>ã€3ã€‘ç”±<code>ReactDOM.unmountComponentAtNode()</code>è§¦å‘ â€” å¸è½½ç»„ä»¶</p> <ul><li><code>componentWillUnmount()</code> â€”â€”å¸¸ç”¨  ä¸€èˆ¬åœ¨è¿™ä¸ªé’©å­ä¸­åšä¸€äº›æ”¶å°¾çš„äº‹æƒ… ä¾‹å¦‚ï¼š
<ul><li>å…³é—­å®šæ—¶å™¨</li> <li>å–æ¶ˆè®¢é˜…æ¶ˆæ¯</li></ul></li></ul> <h4 id="ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾-æ–°-æ–°ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ"><a href="#ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾-æ–°-æ–°ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾ï¼ˆæ–°ï¼‰&amp;æ–°ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ</h4> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110271442430.png" alt="image-20211027144203366"></p> <p>ã€1ã€‘<code>ReactDOM.render()</code>è§¦å‘---åˆæ¬¡æ¸²æŸ“</p> <ul><li>constructor()</li> <li><code>componentWillMount()</code>ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¼šåœ¨ç‰ˆæœ¬ 16.X åºŸå¼ƒåœ¨ç‰ˆæœ¬ 17 ç§»é™¤</li> <li>render()â€”â€”å¸¸ç”¨ï¼ˆè¿™è‚¯å®šï¼‰</li> <li><code>componentDidMount()</code> â€”â€” <strong>å¸¸ç”¨</strong> ï¼Œå¥½æ¯”â€œäººåˆšå‡ºç”Ÿâ€</li></ul> <p>æ–°å¢ï¼š</p> <ul><li><code>getDerivedStateFromProps</code></li></ul> <p>ã€2ã€‘ç”±ç»„ä»¶å†…éƒ¨<code>this.setSate()</code>æˆ–çˆ¶ç»„ä»¶ä»<code>render</code>è§¦å‘ â€”æ›´æ–°é˜¶æ®µ</p> <ul><li><code>shouldComponentUpdate()</code></li> <li><s><code>componentWillUpdate()</code></s>- åºŸå¼ƒ</li> <li><code>render()</code></li> <li><code>componentDidUpdate()</code></li></ul> <p>æ–°å¢ï¼š</p> <ul><li><code>getDerivedStateFromProps</code></li> <li><code>getSnapshotBeforeUpdate</code></li></ul> <p>ã€3ã€‘ç”±<code>ReactDOM.unmountComponentAtNode()</code>è§¦å‘ â€” å¸è½½ç»„ä»¶</p> <ul><li><code>componentWillUnmount()</code> â€”â€”<strong>å¸¸ç”¨</strong>ï¼Œå¥½æ¯”â€œäººçš„å¯¿å‘½èµ°å‘ç»ˆç‚¹â€</li></ul> <h3 id="react-ajax"><a href="#react-ajax" class="header-anchor">#</a> React Ajax</h3> <h4 id="é€šè¿‡ajaxè¯·æ±‚ä»æœåŠ¡å™¨è·å–æ•°æ®å¹¶ä¼ å…¥ç»„ä»¶"><a href="#é€šè¿‡ajaxè¯·æ±‚ä»æœåŠ¡å™¨è·å–æ•°æ®å¹¶ä¼ å…¥ç»„ä»¶" class="header-anchor">#</a> é€šè¿‡Ajaxè¯·æ±‚ä»æœåŠ¡å™¨è·å–æ•°æ®å¹¶ä¼ å…¥ç»„ä»¶</h4> <p>ç»„ä»¶çš„æ•°æ®æ¥æºï¼Œé€šå¸¸æ˜¯é€šè¿‡ Ajax è¯·æ±‚ä»æœåŠ¡å™¨è·å–ï¼Œå¯ä»¥ä½¿ç”¨ <code>componentDidMount</code> æ–¹æ³•è®¾ç½® Ajax è¯·æ±‚ï¼Œç­‰åˆ°è¯·æ±‚æˆåŠŸï¼Œå†ç”¨ <code>this.setState</code> æ–¹æ³•é‡æ–°æ¸²æŸ“ UI ï¼ˆæŸ¥çœ‹ <a href="https://github.com/ruanyf/react-demos/blob/master/demo11/index.html" target="_blank" rel="noopener noreferrer"><code>demo11</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼‰ã€‚</p> <blockquote><p>æ—§ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> UserGist <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">getInitialState</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">lastGistUrl</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">componentDidMount</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>source<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> lastGist <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isMounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">username</span><span class="token operator">:</span> lastGist<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>login<span class="token punctuation">,</span>
          <span class="token literal-property property">lastGistUrl</span><span class="token operator">:</span> lastGist<span class="token punctuation">.</span>html_url
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token plain-text">'s last gist is
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>lastGistUrl<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">here</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">.
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserGist</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://api.github.com/users/octocat/gists<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>body
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <blockquote><p>æ–°ç‰ˆæœ¬</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">UserGist</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
            <span class="token literal-property property">lastGistUrl</span><span class="token operator">:</span> <span class="token string">''</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>source<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> lastGist <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">username</span><span class="token operator">:</span> lastGist<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>login<span class="token punctuation">,</span>
                <span class="token literal-property property">lastGistUrl</span><span class="token operator">:</span> lastGist<span class="token punctuation">.</span>html_url
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token plain-text">'s last gist is </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>lastGistUrl<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">here</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">.
        	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserGist</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://api.github.com/users/octocat/gists<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç ä½¿ç”¨ jQuery å®Œæˆ Ajax è¯·æ±‚ï¼Œè¿™æ˜¯ä¸ºäº†ä¾¿äºè¯´æ˜ã€‚React æœ¬èº«æ²¡æœ‰ä»»ä½•ä¾èµ–ï¼Œå®Œå…¨å¯ä»¥ä¸ç”¨jQueryï¼Œè€Œä½¿ç”¨å…¶ä»–åº“ã€‚</p> <h4 id="å°†promiseå¯¹è±¡ä¼ å…¥ç»„ä»¶"><a href="#å°†promiseå¯¹è±¡ä¼ å…¥ç»„ä»¶" class="header-anchor">#</a> å°†promiseå¯¹è±¡ä¼ å…¥ç»„ä»¶</h4> <p>æˆ‘ä»¬ç”šè‡³å¯ä»¥æŠŠä¸€ä¸ªPromiseå¯¹è±¡ä¼ å…¥ç»„ä»¶ï¼Œè¯·çœ‹<a href="https://github.com/ruanyf/react-demos/blob/master/demo12/index.html" target="_blank" rel="noopener noreferrer"><code>Demo12</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <blockquote><div class="language-jsx extra-class"><pre class="language-jsx"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">RepoList</span></span>
    <span class="token attr-name">promise</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>$<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">'https://api.github.com/search/repositories?q=javascript&amp;sort=stars'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>body
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <p>ä¸Šé¢ä»£ç ä»<code>Github</code>çš„APIæŠ“å–æ•°æ®ï¼Œç„¶åå°†Promiseå¯¹è±¡ä½œä¸ºå±æ€§ï¼Œä¼ ç»™<code>RepoList</code>ç»„ä»¶ã€‚</p> <p>å¦‚æœPromiseå¯¹è±¡æ­£åœ¨æŠ“å–æ•°æ®ï¼ˆpendingçŠ¶æ€ï¼‰ï¼Œç»„ä»¶æ˜¾ç¤º&quot;æ­£åœ¨åŠ è½½&quot;ï¼›</p> <p>å¦‚æœPromiseå¯¹è±¡æŠ¥é”™ï¼ˆrejectedçŠ¶æ€ï¼‰ï¼Œç»„ä»¶æ˜¾ç¤ºæŠ¥é”™ä¿¡æ¯ï¼›</p> <p>å¦‚æœPromiseå¯¹è±¡æŠ“å–æ•°æ®æˆåŠŸï¼ˆfulfilledçŠ¶æ€ï¼‰ï¼Œç»„ä»¶æ˜¾ç¤ºè·å–çš„æ•°æ®ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">RepoList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">error</span><span class="token operator">:</span> error<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¯·æ±‚ä¸­</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>loading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// è¯·æ±‚å¤±è´¥</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>error <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Error: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>error<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// q</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> repos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">.</span>items<span class="token punctuation">;</span>
            <span class="token keyword">var</span> repoList <span class="token operator">=</span> repos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">repo<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">(</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>repo<span class="token punctuation">.</span>html_url<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>repo<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> (</span><span class="token punctuation">{</span>repo<span class="token punctuation">.</span>stargazers_count<span class="token punctuation">}</span><span class="token plain-text"> stars) </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span>repo<span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Most Popular JavaScript Projects in Github</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>repoList<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>è¯·æ±‚ä¸­</li></ul> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110271608804.png" alt="image-20211027160808722"></p> <ul><li>è¯·æ±‚å¤±è´¥</li></ul> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110271607599.png" alt="image-20211027160738510"></p> <ul><li>è¯·æ±‚æˆåŠŸ</li></ul> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110271607299.png" alt="image-20211027160759180"></p> <h2 id="reactåŸç†"><a href="#reactåŸç†" class="header-anchor">#</a> ReactåŸç†</h2> <h3 id="è™šæ‹Ÿdomä¸dom-diffingç®—æ³•"><a href="#è™šæ‹Ÿdomä¸dom-diffingç®—æ³•" class="header-anchor">#</a> è™šæ‹ŸDOMä¸DOM Diffingç®—æ³•</h3> <blockquote><p><a href="https://zh-hans.reactjs.org/docs/reconciliation.html#the-diffing-algorithm" target="_blank" rel="noopener noreferrer">Diffing ç®—æ³•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>æ¯”å¯¹ä¸¤ä¸ªè™šæ‹ŸDOMæ—¶ä¼šæœ‰ä¸‰ç§æ“ä½œï¼šåˆ é™¤ã€æ›¿æ¢ã€æ›´æ–°</p> <p>å¯¹æ¯”ä¸¤æ£µæ ‘æ—¶ Reactä¼šé¦–å…ˆ<strong>æ¯”è¾ƒä¸¤æ£µæ ‘çš„æ ¹èŠ‚ç‚¹</strong>ï¼Œä¸åŒç±»å‹çš„æ ¹èŠ‚ç‚¹å…ƒç´ ä¼šæœ‰ä¸åŒçš„å½¢æ€ã€‚</p> <ul><li>åˆ é™¤ï¼šnewVnodeä¸å­˜åœ¨</li> <li>æ›¿æ¢ï¼švnodeå’ŒnewVnodeç±»å‹ä¸åŒæˆ–keyä¸åŒ</li> <li>æ›´æ–°ï¼šæœ‰ç›¸åŒç±»å‹å’Œkeyï¼Œä½†vnodeå’ŒnewVnodeä¸åŒ</li></ul> <p>é¦–æ¬¡è°ƒç”¨renderè¿›è¡Œé¡µé¢æ¸²æŸ“ å°†å®¹å™¨èŠ‚ç‚¹ä¸­çš„æ‰€æœ‰DOMå…ƒç´ éƒ½æ›¿æ¢æ‰ï¼Œåç»­è¿›è¡Œæ›´æ–°æ¸²æŸ“æ—¶åˆ™ä¼šä½¿ç”¨Reactçš„diffingç®—æ³•è¿›è¡Œé«˜æ•ˆæ›´æ–°~</p> <h3 id="diffç®—æ³•é«˜æ•ˆåœ¨å“ªé‡Œ"><a href="#diffç®—æ³•é«˜æ•ˆåœ¨å“ªé‡Œ" class="header-anchor">#</a> diffç®—æ³•é«˜æ•ˆåœ¨å“ªé‡Œï¼Ÿ</h3> <p>è¿™ç§è‡ªä¸Šè€Œä¸‹çš„React NodeèŠ‚ç‚¹æ›´æ–°æŒ‰ç†æ¥è¯´æ˜¯å¾ˆç¬¨é‡çš„ ä½¿ç”¨diffç®—æ³•ç»“åˆfiberæ¶æ„ ä½¿æ›´æ–°å˜ä¸ºåˆ†ç‰‡çš„ï¼Œä¸ä¼šä¸€ç›´å æ®ç€JSå¼•æ“ å¯¼è‡´é˜»å¡æ¸²æŸ“çº¿ç¨‹ã€å¡é¡¿</p> <h3 id="reacté¡µé¢æŒ‚è½½è¿‡ç¨‹"><a href="#reacté¡µé¢æŒ‚è½½è¿‡ç¨‹" class="header-anchor">#</a> Reacté¡µé¢æŒ‚è½½è¿‡ç¨‹</h3> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202201191235803.png" alt="image-20220119123500688"></p> <ul><li>ç»„ä»¶è¢«ç§°ä¸º&quot;çŠ¶æ€æœº&quot;, é€šè¿‡æ›´æ–°ç»„ä»¶çš„stateï¼ˆçŠ¶æ€ï¼‰æ¥æ›´æ–°å¯¹åº”çš„é¡µé¢æ˜¾ç¤º(é‡æ–°æ¸²æŸ“ç»„ä»¶ - æ¯æ¬¡<strong>è°ƒç”¨render å°±ä¼šæ¸²æŸ“ç»„ä»¶</strong>)</li></ul> <h2 id="çŠ¶æ€ç®¡ç†-mobx-redux"><a href="#çŠ¶æ€ç®¡ç†-mobx-redux" class="header-anchor">#</a> çŠ¶æ€ç®¡ç†-MobXï¼Œredux</h2> <blockquote><p><a href="https://zh.mobx.js.org/getting-started.html" target="_blank" rel="noopener noreferrer">ååˆ†é’Ÿå…¥é—¨ MobX &amp; React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>æ­é…å®˜æ–¹æ–‡æ¡£&amp;APIæ–‡æ¡£&amp;å®é™…é¡¹ç›®ä¸­çš„ä»£ç é£Ÿç”¨æœ€ä½³~</p></blockquote> <h2 id="ç±»ç»„ä»¶"><a href="#ç±»ç»„ä»¶" class="header-anchor">#</a> ç±»ç»„ä»¶</h2> <h3 id="ç±»ç»„ä»¶è·å–dom"><a href="#ç±»ç»„ä»¶è·å–dom" class="header-anchor">#</a> ç±»ç»„ä»¶è·å–DOM</h3> <h3 id="å¤§ç¥ç»˜å›¾-react-ç”Ÿå‘½å‘¨æœŸ"><a href="#å¤§ç¥ç»˜å›¾-react-ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> <a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">å¤§ç¥ç»˜å›¾ React ç”Ÿå‘½å‘¨æœŸ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>componentWillMounted - æ¸²æŸ“å‰çš„ç”Ÿå‘½å‘¨æœŸâ€”â€”å¯¹åº”å“ªä¸ªé’©å­ï¼Ÿ 22/3/25 å­—èŠ‚äºŒé¢æåˆ°çš„å†…å®¹</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202203251658599.png" alt="image-20220325165806126"></p> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c7b704f45fd435cb4ec579e8f0038ee~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p> <h2 id="react-hooks"><a href="#react-hooks" class="header-anchor">#</a> React Hooks</h2> <h3 id="å‡½æ•°å¼ç»„ä»¶è·å–dom"><a href="#å‡½æ•°å¼ç»„ä»¶è·å–dom" class="header-anchor">#</a> å‡½æ•°å¼ç»„ä»¶è·å–DOM</h3> <h3 id="usememo-usecallback"><a href="#usememo-usecallback" class="header-anchor">#</a> useMemo &amp; useCallback</h3> <h3 id="useeffect"><a href="#useeffect" class="header-anchor">#</a> useEffect</h3> <blockquote><h3 id="è½»æ¾å­¦ä¼š-react-é’©å­-ä»¥-useeffect-ä¸ºä¾‹-é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—"><a href="#è½»æ¾å­¦ä¼š-react-é’©å­-ä»¥-useeffect-ä¸ºä¾‹-é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—" class="header-anchor">#</a> <a href="https://www.ruanyifeng.com/blog/2020/09/react-hooks-useeffect-tutorial.html" target="_blank" rel="noopener noreferrer">è½»æ¾å­¦ä¼š React é’©å­ï¼šä»¥ useEffect() ä¸ºä¾‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3></blockquote> <ul><li></li></ul> <h3 id="usestateä¸userefçš„åŒºåˆ«"><a href="#usestateä¸userefçš„åŒºåˆ«" class="header-anchor">#</a> useStateä¸useRefçš„åŒºåˆ«</h3> <h4 id="useref"><a href="#useref" class="header-anchor">#</a> <a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#useref" target="_blank" rel="noopener noreferrer">useRef<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <ul><li><code>const renderCount = useRef(0)</code>å°†å˜é‡å­˜åœ¨ <code>renderCount.current</code> å±æ€§ä¸­
<ul><li>ç‰¹ç‚¹ï¼šæ”¹å˜è¿™ä¸ªå±æ€§ä¸ä¼šå¼•å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</li></ul></li> <li>åœ¨inputä¸­ä½¿ç”¨ <code>const inputRef = useRef</code> + <code>&lt;input ref={inputRef}&gt;</code> <ul><li><code>inputRef.current</code> å¯ä»¥è·å–åˆ°å¯¹åº”çš„inputå…ƒç´ </li></ul></li></ul> <h4 id="ä¸¤ä¸ªé’©å­çš„åŒºåˆ«"><a href="#ä¸¤ä¸ªé’©å­çš„åŒºåˆ«" class="header-anchor">#</a> ä¸¤ä¸ªé’©å­çš„åŒºåˆ«</h4> <ul><li><p>setStateå‡½æ•°ä¼šæ›´æ–°stateã€‚å®ƒæ¥æ”¶ä¸€ä¸ªæ–°çš„stateå€¼å¹¶<strong>å°†ç»„ä»¶</strong>çš„ä¸€æ¬¡<strong>é‡æ–°æ¸²æŸ“</strong>åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚</p></li> <li><p>refå¯¹è±¡å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseRefä¸ä¼šé€šçŸ¥æˆ‘ä»¬</p> <ul><li>ä¹Ÿå°±æ˜¯è¯´å˜æ›´ <code>.current</code> å±æ€§ä¸ä¼šå¼•å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</li> <li>å½“æˆ‘ä»¬æƒ³å­˜å‚¨ä¸€ä¸ªå€¼å¹¶ä¸å¸Œæœ›æ›´æ–°å€¼çš„æ—¶å€™è§¦å‘é¡µé¢çš„æ¸²æŸ“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨useRef</li></ul></li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/frontend-knowledge-base/knowledgeBase/browser.html" class="prev">
            ğŸ¬æµè§ˆå™¨
          </a></span> <span class="next"><a href="/frontend-knowledge-base/knowledgeBase/coding.html">
            ğŸ²æ‰‹å†™ä»£ç é—®é¢˜(é€ ~è½®~å­~)
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#reactçŸ¥è¯†ä½“ç³»" class="sidebar-link reco-side-reactçŸ¥è¯†ä½“ç³»" data-v-cb1513f6>ReactçŸ¥è¯†ä½“ç³»</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#reactå­¦ä¹ èµ„æº" class="sidebar-link reco-side-reactå­¦ä¹ èµ„æº" data-v-cb1513f6>Reactå­¦ä¹ èµ„æº</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#å…¥é—¨" class="sidebar-link reco-side-å…¥é—¨" data-v-cb1513f6>å…¥é—¨</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#è¿›é˜¶" class="sidebar-link reco-side-è¿›é˜¶" data-v-cb1513f6>è¿›é˜¶</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#reactåŸºç¡€çŸ¥è¯†" class="sidebar-link reco-side-reactåŸºç¡€çŸ¥è¯†" data-v-cb1513f6>ReactåŸºç¡€çŸ¥è¯†</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#html3" class="sidebar-link reco-side-html3" data-v-cb1513f6>HTML3</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#reactdom-render" class="sidebar-link reco-side-reactdom-render" data-v-cb1513f6>ReactDOM.render()</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#jsx" class="sidebar-link reco-side-jsx" data-v-cb1513f6>JSX</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#reacté¢å‘ç»„ä»¶ç¼–ç¨‹" class="sidebar-link reco-side-reacté¢å‘ç»„ä»¶ç¼–ç¨‹" data-v-cb1513f6>Reacté¢å‘ç»„ä»¶ç¼–ç¨‹</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#props" class="sidebar-link reco-side-props" data-v-cb1513f6>Props</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#state" class="sidebar-link reco-side-state" data-v-cb1513f6>State</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#refs" class="sidebar-link reco-side-refs" data-v-cb1513f6>Refs</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#è¡¨å•" class="sidebar-link reco-side-è¡¨å•" data-v-cb1513f6>è¡¨å•</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link reco-side-ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" data-v-cb1513f6>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#react-ajax" class="sidebar-link reco-side-react-ajax" data-v-cb1513f6>React Ajax</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#reactåŸç†" class="sidebar-link reco-side-reactåŸç†" data-v-cb1513f6>ReactåŸç†</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#è™šæ‹Ÿdomä¸dom-diffingç®—æ³•" class="sidebar-link reco-side-è™šæ‹Ÿdomä¸dom-diffingç®—æ³•" data-v-cb1513f6>è™šæ‹ŸDOMä¸DOM Diffingç®—æ³•</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#diffç®—æ³•é«˜æ•ˆåœ¨å“ªé‡Œ" class="sidebar-link reco-side-diffç®—æ³•é«˜æ•ˆåœ¨å“ªé‡Œ" data-v-cb1513f6>diffç®—æ³•é«˜æ•ˆåœ¨å“ªé‡Œï¼Ÿ</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#reacté¡µé¢æŒ‚è½½è¿‡ç¨‹" class="sidebar-link reco-side-reacté¡µé¢æŒ‚è½½è¿‡ç¨‹" data-v-cb1513f6>Reacté¡µé¢æŒ‚è½½è¿‡ç¨‹</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#çŠ¶æ€ç®¡ç†-mobx-redux" class="sidebar-link reco-side-çŠ¶æ€ç®¡ç†-mobx-redux" data-v-cb1513f6>çŠ¶æ€ç®¡ç†-MobXï¼Œredux</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#ç±»ç»„ä»¶" class="sidebar-link reco-side-ç±»ç»„ä»¶" data-v-cb1513f6>ç±»ç»„ä»¶</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#ç±»ç»„ä»¶è·å–dom" class="sidebar-link reco-side-ç±»ç»„ä»¶è·å–dom" data-v-cb1513f6>ç±»ç»„ä»¶è·å–DOM</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#å¤§ç¥ç»˜å›¾-react-ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link reco-side-å¤§ç¥ç»˜å›¾-react-ç”Ÿå‘½å‘¨æœŸ" data-v-cb1513f6>å¤§ç¥ç»˜å›¾ React ç”Ÿå‘½å‘¨æœŸ</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#react-hooks" class="sidebar-link reco-side-react-hooks" data-v-cb1513f6>React Hooks</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#å‡½æ•°å¼ç»„ä»¶è·å–dom" class="sidebar-link reco-side-å‡½æ•°å¼ç»„ä»¶è·å–dom" data-v-cb1513f6>å‡½æ•°å¼ç»„ä»¶è·å–DOM</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#usememo-usecallback" class="sidebar-link reco-side-usememo-usecallback" data-v-cb1513f6>useMemo &amp; useCallback</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#useeffect" class="sidebar-link reco-side-useeffect" data-v-cb1513f6>useEffect</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#è½»æ¾å­¦ä¼š-react-é’©å­-ä»¥-useeffect-ä¸ºä¾‹-é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—" class="sidebar-link reco-side-è½»æ¾å­¦ä¼š-react-é’©å­-ä»¥-useeffect-ä¸ºä¾‹-é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—" data-v-cb1513f6>è½»æ¾å­¦ä¼š React é’©å­ï¼šä»¥ useEffect() ä¸ºä¾‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/react.html#usestateä¸userefçš„åŒºåˆ«" class="sidebar-link reco-side-usestateä¸userefçš„åŒºåˆ«" data-v-cb1513f6>useStateä¸useRefçš„åŒºåˆ«</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/frontend-knowledge-base/assets/js/app.fcf437a8.js" defer></script><script src="/frontend-knowledge-base/assets/js/3.ceeb50c6.js" defer></script><script src="/frontend-knowledge-base/assets/js/1.8451d83f.js" defer></script><script src="/frontend-knowledge-base/assets/js/23.9e124323.js" defer></script>
  </body>
</html>
