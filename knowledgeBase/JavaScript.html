<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>🦄JavaScript | 前端知识库@敲代码的小提琴手</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="logo.jpg">
    <meta name="description" content="前端er的面试必备知识——前端算法与前端面试题！">
    
    <link rel="preload" href="/frontend-knowledge-base/assets/css/0.styles.1e7c64ec.css" as="style"><link rel="preload" href="/frontend-knowledge-base/assets/js/app.fcf437a8.js" as="script"><link rel="preload" href="/frontend-knowledge-base/assets/js/3.ceeb50c6.js" as="script"><link rel="preload" href="/frontend-knowledge-base/assets/js/1.8451d83f.js" as="script"><link rel="preload" href="/frontend-knowledge-base/assets/js/15.79bbd93a.js" as="script"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/10.c53ecfbf.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/11.719e2e4d.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/12.6791d3d2.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/13.d93f6042.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/14.7704fd11.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/16.c4c8517c.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/17.bb85eb87.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/18.8d2fd8ae.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/19.39fed223.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/20.c6713908.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/21.694a1dd3.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/22.7c275bab.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/23.9e124323.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/24.a21b072d.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/25.db0ab649.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/26.ccc2a5ff.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/27.708abdd3.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/4.71c43d04.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/5.93f6240a.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/6.f3f5344e.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/7.76416851.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/8.d0d15fbd.js"><link rel="prefetch" href="/frontend-knowledge-base/assets/js/9.a4cfbc82.js">
    <link rel="stylesheet" href="/frontend-knowledge-base/assets/css/0.styles.1e7c64ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>前端知识库@敲代码的小提琴手</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端er的面试必备知识——前端算法与前端面试题！</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-knowledge-base/" class="home-link router-link-active"><!----> <span class="site-name">前端知识库@敲代码的小提琴手</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontend-knowledge-base/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      more about @敲代码的小提琴手
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/FangzhouSu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  myGithub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/18064101621133" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  myJuejin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/FangzhouSu/frontend-knowledge-base" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  thisRepo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>16</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/frontend-knowledge-base/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      more about @敲代码的小提琴手
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/FangzhouSu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  myGithub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/18064101621133" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  myJuejin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/FangzhouSu/frontend-knowledge-base" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  thisRepo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/frontend-knowledge-base/" class="sidebar-heading clickable router-link-active"><span>Hey!This is 敲代码的小提琴手!</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge-base/" aria-current="page" class="sidebar-link">欢迎来到我的前端知识库！😄</a></li><li><a href="/frontend-knowledge-base/study-way/myStudyProcess.html" class="sidebar-link">我的前端学习之路🤔</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/frontend-knowledge-base/knowledgeBase/start" class="sidebar-heading clickable open"><span>前端知识库</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge-base/knowledgeBase/layout.html" class="sidebar-link">🐴前端基础-layout</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html" aria-current="page" class="active sidebar-link">🦄前端基础-JavaScript</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/network.html" class="sidebar-link">🐅计算机网络</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/browser.html" class="sidebar-link">🐬浏览器</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/react.html" class="sidebar-link">🐧React</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/coding.html" class="sidebar-link">🐲手写代码问题(造~轮~子~)</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/optimize.html" class="sidebar-link">🐕‍🦺性能优化问题</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/experience.html" class="sidebar-link">🐪工作经验汇总</a></li><li><a href="/frontend-knowledge-base/knowledgeBase/interview.html" class="sidebar-link">🐜面试经验</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/frontend-knowledge-base/handbook/start" class="sidebar-heading clickable"><span>前端er必会的数据结构与算法</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge-base/handbook/struct.html" class="sidebar-link">前端必会数据结构</a></li><li><a href="/frontend-knowledge-base/handbook/algorithm.html" class="sidebar-link">前端必会算法技巧</a></li><li><a href="/frontend-knowledge-base/handbook/leetcode.html" class="sidebar-link">推荐刷题内容</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/frontend-knowledge-base/study-everyday/study-everyday" class="sidebar-heading clickable"><span>前端校招er必会的前端知识点</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge-base/study-everyday/22-1-study.html" class="sidebar-link">22年第一季度的每日一题</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">🦄JavaScript</h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="🦄javascript"><a href="#🦄javascript" class="header-anchor">#</a> 🦄JavaScript</h1> <blockquote><p>JS部分的知识需要删减一下呐！好多是初学时期写的XD</p></blockquote> <h2 id="js知识体系"><a href="#js知识体系" class="header-anchor">#</a> JS知识体系</h2> <blockquote><p>前端人吃饭的家伙~ 回头慢慢补充吧</p></blockquote> <ul><li><strong>ES6新增知识</strong> <ul><li>工作中写代码都是ES6语法了，所以这部分很重要~</li> <li>解构赋值</li> <li>新增的API</li></ul></li> <li>JavaScript-API
<ul><li>数组相关</li> <li>字符串相关</li> <li>对象相关
<ul><li>JSON.stringify() <strong>灵活处理不同类型数据</strong>的能力</li></ul></li></ul></li> <li>函数</li> <li>原型</li> <li>作用域、闭包问题</li> <li>浏览器中的JS
<ul><li>DOM API</li> <li>事件循环机制</li></ul></li> <li>异步编程
<ul><li>Promise</li> <li>async await语法糖</li></ul></li> <li>模块化编程</li></ul> <h2 id="js学习资源"><a href="#js学习资源" class="header-anchor">#</a> JS学习资源</h2> <ul><li>《JS高级程序设计（第四版）》</li> <li><a href="https://es6.ruanyifeng.com/?utm_source=gold_browser_extension" target="_blank" rel="noopener noreferrer">ES6 入门教程 - ECMAScript 6入门 (ruanyifeng.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>我更倾向于用这个<strong>带目录</strong>的阅读器读阮大的这本必学书籍——<a href="https://www.bookstack.cn/read/es6-3rd/sidebar.md" target="_blank" rel="noopener noreferrer">ECMAScript 6 入门 - 《阮一峰 ECMAScript 6 (ES6) 标准入门教程 第三版》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><a href="https://juejin.cn/post/6844903974378668039" target="_blank" rel="noopener noreferrer">(建议收藏)原生JS灵魂之问, 请问你能接得住几个？(上) <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer">MDN Web Docs (mozilla.org)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>《你不知道的JS（上、中、下）》</li></ul> <h2 id="js基础"><a href="#js基础" class="header-anchor">#</a> JS基础</h2> <h3 id="_0-1-0-2-0-3-嘛-为什么"><a href="#_0-1-0-2-0-3-嘛-为什么" class="header-anchor">#</a> 0.1 + 0.2 === 0.3 嘛？为什么？</h3> <p>==答==：</p> <ul><li><p>不等于…</p></li> <li><p>本质原因是“<strong>二进制模拟十进制进行运算</strong>时的精度问题”</p></li> <li><p>深入了说说，JS使用Number类型来表示数字（整数/浮点数皆是如此）。遵循 IEEE 754 标准，通过 64 位来表示一个数字（1 + 11 + 52）。将0.1、0.2转换给计算机看要用二进制，这时由于尾数存在无限循环，所以加起来的值是不严格相等的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">0.1</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">0.0001100110011001</span><span class="token operator">...</span><span class="token punctuation">(</span>无限循环<span class="token punctuation">)</span>
<span class="token number">0.2</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">0.0011001100110011</span><span class="token operator">...</span><span class="token punctuation">(</span>无限循环<span class="token punctuation">)</span>
<span class="token comment">// 由于IEEE 754尾数位数限制，需要将后面多余的位截掉 造成了精度损失</span>
</code></pre></div><ul><li>这是一种“精度损失”的现象，可能出现在 <strong>进制转化和对阶运算过程中</strong> <ul><li>只要这两步中产生了精度损失，计算结果肯定会出现偏差</li></ul></li></ul></li></ul> <blockquote><p><a href="https://juejin.cn/post/6844903680362151950" target="_blank" rel="noopener noreferrer">扩展<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <p><strong>为何使用64位表示一个数字？</strong></p> <p>JavaScript使用Number类型表示数字（整数和浮点数），遵循 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2FIEEE_754" target="_blank" rel="noopener noreferrer">IEEE 754<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 标准 通过64位来表示一个数字（1 + 11 + 52）</p> <p>通过图片具体看一下数字在内存中的表示</p> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/16/165e0eb7f4d6c50f~tplv-t2oaga2asx-watermark.awebp" alt="img"></p> <p>图片文字说明</p> <ul><li>第0位：符号位，0表示正数，1表示负数(s)</li> <li>第1位到第11位：储存指数部分（e）</li> <li>第12位到第63位：储存小数部分（即有效数字f）</li></ul></blockquote> <blockquote><p><strong>为什么 x=0.1 能得到 0.1？</strong></p> <p>因为这个 0.1 并<strong>不是真正的0.1</strong>，经过了精度运算</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">0.10000000000000000555</span><span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
<span class="token comment">// 返回 0.1000000000000000，去掉末尾的零后正好为 0.1</span>

<span class="token comment">// 但来一个更高的精度：</span>
<span class="token number">0.1</span><span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0.100000000000000005551</span>
</code></pre></div></blockquote> <blockquote><p><strong>如何解决精度问题？</strong></p> <p>【1】</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> num1Digits <span class="token operator">=</span> <span class="token punctuation">(</span>num1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">const</span> num2Digits <span class="token operator">=</span> <span class="token punctuation">(</span>num2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">const</span> baseNum <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>num1Digits<span class="token punctuation">,</span> num2Digits<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>num1 <span class="token operator">*</span> baseNum <span class="token operator">+</span> num2 <span class="token operator">*</span> baseNum<span class="token punctuation">)</span> <span class="token operator">/</span> baseNum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 缺点：对大数的支持不好</span>
</code></pre></div><p>【2】</p> <p>使用三方库</p></blockquote> <blockquote><p>更深入的<a href="https://www.javascriptc.com/books/nodejs-roadmap/javascript/floating-point-number-0.1-0.2.html" target="_blank" rel="noopener noreferrer">扩展<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>涉及勒更多部分，觉得没吃饱的可以再往下看看</p> <p>一旦你掌握了这个过程，能让你更深刻的认识到其中的存储、运算机制。</p></blockquote> <h3 id="七种基本数据类型-一种引用数据类型"><a href="#七种基本数据类型-一种引用数据类型" class="header-anchor">#</a> 七种基本数据类型，一种引用数据类型</h3> <ul><li><p>写过一篇文章 <a href="https://juejin.cn/post/7015057932135956487" target="_blank" rel="noopener noreferrer">重学数据（类型）、变量、内存<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，</p> <ul><li><p>聊了一下这几个数据类型要如何通过typeof instanceof判定；</p></li> <li><p>聊了一下内存的问题——</p> <ul><li>基本数据类型赋值给变量，变量存在栈中；</li> <li>引用数据类型赋值给变量，变量存在栈中，而对象保存在堆中，变量指向堆~</li></ul> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110311438372.png" alt="image-20211031143811230"></p></li></ul></li> <li><p>基本数据类型</p></li></ul> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202110311039729.png" alt="image-20211031103940566"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    pre <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span><span class="token comment">// 函数作用域中的pre为&quot;hello world&quot;</span>
    cur <span class="token operator">=</span> <span class="token number">666</span><span class="token punctuation">;</span><span class="token comment">// 函数作用域中的cur为666</span>
    <span class="token comment">// 这二位都不会影响到a b</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    a <span class="token operator">=</span> a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    b <span class="token operator">=</span> <span class="token number">666</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1 2</span>
<span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2 666</span>
</code></pre></div><ul><li>引用类型</li></ul> <p>Object</p> <h3 id="运算符优先级"><a href="#运算符优先级" class="header-anchor">#</a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#%E6%B1%87%E6%80%BB%E8%A1%A8" target="_blank" rel="noopener noreferrer">运算符优先级<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h3 id="parseint-parsefloat"><a href="#parseint-parsefloat" class="header-anchor">#</a> <code>parseInt</code> &amp; <code>parseFloat</code></h3> <p>首先明确定义</p> <ul><li><code>parseInt(string, radix)</code> <ul><li>radix范围<strong>2-32</strong>，string不能大于radix</li> <li>例外 <code>parseInt(n, 0) = n</code><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202202081340623.png" alt="image-20220208134006514"></li></ul></li></ul> <p><code>parseInt</code>函数将其第一个参数转换为一个字符串，对该字符串<strong>进行解析</strong>，然后返回一个整数或 <code>NaN</code>。</p> <p>第二个参数为其对应的进制（默认是十进制哈）</p> <blockquote><p>注意如果第一个参数从左到右数，遇到字符就会舍弃字符+字符后面的内容</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'0001'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'00x1111'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 0</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'0011x11'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3</span>
</code></pre></div></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'123xxx'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 先把'123xxx'转换为'123' 将'123'看作5进制数，返回十进制数38 =&gt; 1*5^2 + 2*5^1 + 3*5^0 = 38</span>
</code></pre></div><ul><li><code>parseFloat</code></li></ul> <p><strong><code>parseFloat()</code></strong> 函数解析一个参数（必要时先转换为字符串）并返回一个浮点数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'5556.6www'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 5556.6</span>
</code></pre></div><p>这里一个有趣的应用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;88&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;66&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 将a数组转换为数值型可以简单地这样做</span>
a<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>parseFloat<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// [88,66]这里其实我也不知道为啥可以XD</span>
<span class="token comment">//a.map(parseInt) 返回就是 [88,NaN]🥺</span>
<span class="token comment">// 也可以常规一些~</span>
a<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// .map(x =&gt; parseFloat(x))</span>
</code></pre></div><h3 id="字面量的概念"><a href="#字面量的概念" class="header-anchor">#</a> 字面量的概念</h3> <p>字面量可分为数字字面量、字符串字面量、数组字面量、表达式字面量、对象字面量、函数字面量。</p> <ul><li>数字(Number)字面量 可以是整数或者是小数，或者是科学计数(e)。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">3.14</span>
<span class="token number">123e5</span>
</code></pre></div><ul><li>字符串(String)字面量 是使用单引号或双引号定义的字符串。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;John Doe&quot;</span> 
</code></pre></div><ul><li>表达式字面量：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">6</span>
<span class="token number">5</span> <span class="token operator">*</span> <span class="token number">10</span>
</code></pre></div><ul><li>数组(Array)字面量 定义一个数组：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>对象(Object)字面量 定义一个对象：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&quot;Doe&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token literal-property property">eyeColor</span><span class="token operator">:</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>函数(Function)字面量 定义一个函数：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><ul><li>箭头函数中 使用括号返回对象的字面量形式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//加括号的函数体返回对象字面量表达式：</span>
<span class="token parameter">params</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">foo</span><span class="token operator">:</span> bar<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="for-in-for-of的用法-区别"><a href="#for-in-for-of的用法-区别" class="header-anchor">#</a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in" target="_blank" rel="noopener noreferrer">for…in<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener noreferrer">for…of<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的用法&amp;区别</h3> <ul><li>for in 遍历对象的键
<ul><li>注意：对象原型链上（继承得来）的属性也会被遍历到！</li></ul></li></ul> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202111230949518.png" alt=""></p> <ul><li>for of 遍历可迭代对象 Array Map Set</li></ul> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202111230950252.png" alt="image-20211123095042012"></p> <p>这个好用欸！</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202111230951802.png" alt="image-20211123095138548"></p> <h2 id="array类型相关知识-及常见api"><a href="#array类型相关知识-及常见api" class="header-anchor">#</a> Array类型相关知识，及常见api</h2> <h3 id="改变-不改变原数组的方法"><a href="#改变-不改变原数组的方法" class="header-anchor">#</a> 改变&amp;不改变原数组的方法</h3> <ul><li>改变原数组的方法
<ul><li>增删、改、查</li></ul></li></ul> <blockquote><ul><li>splice() 添加/删除数组元素</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>语法：arrayObject<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span>howmany<span class="token punctuation">,</span>item1<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>itemX<span class="token punctuation">)</span>
<span class="token literal-property property">参数</span><span class="token operator">:</span>
   <span class="token number">1</span><span class="token punctuation">.</span>index：必需。整数，规定添加<span class="token operator">/</span>删除项目的位置，使用负数可从数组结尾处规定位置。
   <span class="token number">2</span><span class="token punctuation">.</span>howmany：可选。要删除的项目数量。如果设置为 <span class="token number">0</span>，则不会删除项目。如果不设置则会删除index及其之后的所有元素。
   <span class="token number">3</span><span class="token punctuation">.</span>item1<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> itemX：可选。向数组添加的新项目。

<span class="token literal-property property">返回值</span><span class="token operator">:</span> 如果有元素被删除<span class="token punctuation">,</span>返回包含被删除项目的新数组。
</code></pre></div><ul><li><p>sort() 数组排序</p></li> <li><p>pop() 删除一个数组中的最后的一个元素</p></li> <li><p>shift() 删除数组的第一个元素</p></li> <li><p>push() 向数组的末尾添加元素</p></li> <li><p>unshift() 向数组的开头添加一个或更多元素</p></li> <li><p>reverse() 颠倒数组中元素的顺序</p></li> <li><p>copyWithin() 指定位置的成员复制到其他位置</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>语法：array<span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token literal-property property">参数</span><span class="token operator">:</span>
   <span class="token number">1</span><span class="token punctuation">.</span>target（必需）：从该位置开始替换数据。如果为负值，表示倒数。
   <span class="token number">2</span><span class="token punctuation">.</span>start（可选）：从该位置开始读取数据，默认为 <span class="token number">0</span>。如果为负值，表示倒数。
   <span class="token number">3</span><span class="token punctuation">.</span>end（可选）：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示倒数。

<span class="token literal-property property">返回值</span><span class="token operator">:</span> 返回当前数组。
</code></pre></div><ul><li>fill() 填充数组</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>语法：array<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>
<span class="token literal-property property">参数</span><span class="token operator">:</span>
   <span class="token number">1</span><span class="token punctuation">.</span>value必需。填充的值。
   <span class="token number">2</span><span class="token punctuation">.</span>start可选。开始填充位置。
   <span class="token number">3.</span><span class="token function">end可选。停止填充位置</span> <span class="token punctuation">(</span>默认为 array<span class="token punctuation">.</span>length<span class="token punctuation">)</span>

<span class="token literal-property property">返回值</span><span class="token operator">:</span> 返回当前数组。
</code></pre></div></blockquote> <ul><li>不改变原数组的方法
<ul><li>查值、合并、拷贝等API</li></ul></li></ul> <blockquote><ul><li>slice() 浅拷贝数组的元素</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>语法：array<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>begin<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token literal-property property">参数</span><span class="token operator">:</span>
   <span class="token number">1.</span><span class="token function">begin</span><span class="token punctuation">(</span>可选<span class="token punctuation">)</span><span class="token operator">:</span> 索引数值<span class="token punctuation">,</span>接受负值，从该索引处开始提取原数组中的元素<span class="token punctuation">,</span>默认值为<span class="token number">0</span>。
   <span class="token number">2.</span><span class="token function">end</span><span class="token punctuation">(</span>可选<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">索引数值</span><span class="token punctuation">(</span>不包括<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">接受负值，在该索引处前结束提取原数组元素，默认值为数组末尾</span><span class="token punctuation">(</span>包括最后一个元素<span class="token punctuation">)</span>。

<span class="token literal-property property">返回值</span><span class="token operator">:</span> 返回一个从开始到结束（不包括结束）选择的数组的一部分浅拷贝到一个新数组对象，且原数组不会被修改。
</code></pre></div><ul><li><p>join() 数组转字符串</p></li> <li><p>concat() 合并两个或多个数组</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>语法：<span class="token keyword">var</span> newArr <span class="token operator">=</span>oldArray<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arrayX<span class="token punctuation">,</span>arrayX<span class="token punctuation">,</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">,</span>arrayX<span class="token punctuation">)</span>
<span class="token literal-property property">参数</span><span class="token operator">:</span>
   <span class="token number">1</span><span class="token punctuation">.</span>arrayX（必须）：该参数可以是具体的值，也可以是数组对象。可以是任意多个。

<span class="token literal-property property">返回值</span><span class="token operator">:</span> 返回返回合并后的新数组。
</code></pre></div><ul><li>indexOf() 查找数组是否存在某个元素</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>语法：array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>searchElement<span class="token punctuation">,</span>fromIndex<span class="token punctuation">)</span>
<span class="token literal-property property">参数</span><span class="token operator">:</span>
   <span class="token number">1.</span><span class="token function">searchElement</span><span class="token punctuation">(</span>必须<span class="token punctuation">)</span><span class="token operator">:</span>被查找的元素
   <span class="token number">2.</span><span class="token function">fromIndex</span><span class="token punctuation">(</span>可选<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">开始查找的位置</span><span class="token punctuation">(</span>不能大于等于数组的长度，返回<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>，接受负值，默认值为<span class="token number">0</span>。

<span class="token literal-property property">返回值</span><span class="token operator">:</span> 返回下标
</code></pre></div><ul><li>lastIndexOf() 查找指定元素在数组中的最后一个位置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>语法：arr<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span>searchElement<span class="token punctuation">,</span>fromIndex<span class="token punctuation">)</span>
<span class="token literal-property property">参数</span><span class="token operator">:</span>
   <span class="token number">1.</span><span class="token function">searchElement</span><span class="token punctuation">(</span>必须<span class="token punctuation">)</span><span class="token operator">:</span> 被查找的元素
   <span class="token number">2.</span><span class="token function">fromIndex</span><span class="token punctuation">(</span>可选<span class="token punctuation">)</span><span class="token operator">:</span> 逆向查找开始位置，默认值数组的长度<span class="token operator">-</span><span class="token number">1</span>，即查找整个数组。

<span class="token literal-property property">返回值</span><span class="token operator">:</span> 方法返回指定元素<span class="token punctuation">,</span>在数组中的最后一个的索引，如果不存在则返回 <span class="token operator">-</span><span class="token number">1</span>。（从数组后面往前查找）
</code></pre></div><ul><li>includes() 查找数组是否包含某个元素</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>语法：array<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>searchElement<span class="token punctuation">,</span>fromIndex<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token literal-property property">参数</span><span class="token operator">:</span>
   <span class="token number">1.</span><span class="token function">searchElement</span><span class="token punctuation">(</span>必须<span class="token punctuation">)</span><span class="token operator">:</span>被查找的元素
   <span class="token number">2.</span><span class="token function">fromIndex</span><span class="token punctuation">(</span>可选<span class="token punctuation">)</span><span class="token operator">:</span>默认值为<span class="token number">0</span>，参数表示搜索的起始位置，接受负值。正值超过数组长度，数组不会被搜索，返回<span class="token boolean">false</span>。负值绝对值超过长数组度，重置从<span class="token number">0</span>开始搜索。

<span class="token literal-property property">返回值</span><span class="token operator">:</span> 返回布尔
</code></pre></div></blockquote> <h3 id="判断是否为数组的方法"><a href="#判断是否为数组的方法" class="header-anchor">#</a> 判断是否为数组的方法</h3> <ul><li>通过Object.prototype.toString.call()做判断
<ul><li>这个考虑较全面，但是用isArray也是ok的~</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Array'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>通过原型链做判断</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>obj<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
</code></pre></div><ul><li>通过construtor来判断</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array
</code></pre></div><ul><li>通过ES6的Array.isArray()做判断</li></ul> <div class="language- extra-class"><pre class="language-text"><code>Array.isArray(obj);
</code></pre></div><ul><li>通过instanceof做判断</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span>
</code></pre></div><ul><li>通过Array.prototype.isPrototypeOf</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre></div><h3 id="array-api总结"><a href="#array-api总结" class="header-anchor">#</a> Array API总结</h3> <blockquote><p>ES5新增的Array API</p> <p><a href="https://www.zhangxinxu.com/wordpress/2013/04/es5%e6%96%b0%e5%a2%9e%e6%95%b0%e7%bb%84%e6%96%b9%e6%b3%95/" target="_blank" rel="noopener noreferrer">张鑫旭大佬的博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p>下面这些内容大部分为红宝书的内容</p></blockquote> <h4 id="_1-创建数组的静态方法-from-of"><a href="#_1-创建数组的静态方法-from-of" class="header-anchor">#</a> 1.创建数组的静态方法 from of</h4> <p>from()用于将 类数组结构转换为数组实例，而 of()用于将一组参数转换为数组实例</p> <h4 id="_2-数组空位"><a href="#_2-数组空位" class="header-anchor">#</a> 2.数组空位</h4> <p>由于行为不一致和存在性能隐患，因此实践中要避免使用数组空位。</p> <p>如果确实需要空位，则可以显式地用 undefined 值代替。</p> <h4 id="_3-length属性"><a href="#_3-length属性" class="header-anchor">#</a> 3.length属性</h4> <p>数组 length 属性的独特之处在于，它不是只读的。通过修改 length 属性，可以从数组末尾删除 / 添加元素</p> <h4 id="_4-数组检测"><a href="#_4-数组检测" class="header-anchor">#</a> 4.数组检测</h4> <p>一个经典的 ECMAScript 问题是判断一个对象是不是数组。在只有一个网页（因而只有一个全局作用域）的情况下，使用 <code>instanceof</code> 操作符就足矣：</p> <blockquote><p>使用 <code>instanceof</code> 的问题是假定只有一个全局执行上下文。如果网页里有多个框架，则可能涉及两 个不同的全局执行上下文，因此就会有两个不同版本的 Array 构造函数。如果要把数组从一个框架传给另一个框架，则这个数组的构造函数将有别于在第二个框架内本地创建的数组。</p></blockquote> <p>为解决这个问题，ECMAScript提供了 <code>Array.isArray()</code>方法。这个方法的目的就是确定一个值是 否为数组，而不用管它是在哪个全局执行上下文中创建的</p> <h4 id="_5-迭代器方法-keys-values-entries"><a href="#_5-迭代器方法-keys-values-entries" class="header-anchor">#</a> 5.迭代器方法 keys values entries</h4> <p>在 ES6 中，Array 的原型上暴露了 3 个用于检索数组内容的方法：keys()、values()和 entries()。keys()返回<strong>数组索引</strong>的迭代器，values()返回<strong>数组元素</strong>的迭代器，而 entries()返回<strong>索引/值对</strong>的迭代器：</p> <p><img src="https://img-blog.csdnimg.cn/1a3256ed51ed4962adf90e49b842d086.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_16,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p> <h4 id="_6-数组复制与填充问题"><a href="#_6-数组复制与填充问题" class="header-anchor">#</a> 6.数组复制与填充问题</h4> <p><img src="https://img-blog.csdnimg.cn/d15476210f1e4b9dbc986137f8d5d056.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_17,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> zeros <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//zeros.fill(填充数字,填充索引起始,填充索引结束前一位);</span>
zeros<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zeros<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[0,7,7,0,0]</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> ints<span class="token punctuation">,</span>
    reset <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=&gt;</span> ints <span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//ints.copyWithin(插入位置的索引,复制的索引起始,复制的索引结束前一位);</span>
ints<span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[0,1,2,3, 0,1,2, 7,8,9]</span>
</code></pre></div><h4 id="_7-数组-字符串"><a href="#_7-数组-字符串" class="header-anchor">#</a> 7.数组-&gt;字符串</h4> <p>得到——以逗号分隔数组值的字符串</p> <ul><li><code>toLocaleString()</code></li> <li><code>toString()</code></li> <li><code>数组.valueOf()</code></li></ul> <p>得到——以传入参数分割数组值的字符串</p> <blockquote><p>而 <code>包装对象实例.valueOf()</code> 则返回包装对象实例对应的原始类型的值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 123</span>
<span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;abc&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div></blockquote> <ul><li><code>join(&quot;xxx&quot;)</code></li></ul> <h4 id="_8-数组的栈方法"><a href="#_8-数组的栈方法" class="header-anchor">#</a> 8.数组的栈方法</h4> <p><img src="https://img-blog.csdnimg.cn/118c90aad04e420ea95dbe5868e2af8a.png" alt="在这里插入图片描述"></p> <h4 id="_9-数组的队列方式"><a href="#_9-数组的队列方式" class="header-anchor">#</a> 9.数组的队列方式</h4> <p>就只有 入队列的方法与栈不同 其他方法是一样的</p> <p>使用<code>Array.prototype.shift()</code>插入到队头</p> <h4 id="_10-数组排序方法-sort"><a href="#_10-数组排序方法-sort" class="header-anchor">#</a> 10.数组排序方法 sort</h4> <p>sort 这个sort有个坑 所以一般不直接用</p> <p><img src="https://img-blog.csdnimg.cn/a4cb8f58a27f482ba15f6124bfaacb7e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_16,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p> <p>注意字符串排序的小细节</p> <p>根据ASCII值来比较 所以小写字母a会在大写字母Z后面</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112011127503.png" alt="image-20211201112720327"></p> <h4 id="_11-数组的操作方法-增加元素-单独切一段元素-插入元素-concat-slice-splice"><a href="#_11-数组的操作方法-增加元素-单独切一段元素-插入元素-concat-slice-splice" class="header-anchor">#</a> 11.数组的操作方法-增加元素 单独切一段元素 插入元素 concat slice splice</h4> <ul><li><code>concat()</code></li></ul> <p><img src="https://img-blog.csdnimg.cn/ae3411e563ea4818af0be79c79571d76.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_15,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p> <p>一个很有意思的用法——用来合并多个数组&amp;数字(例子来自MDN)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> alpha <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> alphaNumeric <span class="token operator">=</span> alpha<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>alphaNumeric<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// results in ['a', 'b', 'c', 1, 2, 3]</span>
<span class="token comment">// 可以用来连接数字/数组</span>
</code></pre></div><ul><li><code>slice()</code></li></ul> <p><img src="https://img-blog.csdnimg.cn/72702c8f27664677964f4c08582cb9dd.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_15,color_FFFFFF,t_70,g_se,x_16" alt="请添加图片描述"></p> <ul><li><code>splice()</code></li></ul> <p><img src="https://img-blog.csdnimg.cn/562f8ba16eb742e39d20baafbd23ba49.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_15,color_FFFFFF,t_70,g_se,x_16" alt="请添加图片描述"></p> <p>简单来说就是删除/插入 然后根据这俩功能自然就可以做出来替换咯~ 来看看JS</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112011000116.png" alt="image-20211201095959983"></p> <h4 id="_12-搜索数组中元素的位置-indexof"><a href="#_12-搜索数组中元素的位置-indexof" class="header-anchor">#</a> 12.搜索数组中元素的位置 indexOf</h4> <blockquote><p>好用~ 做个数组去重 可以用这个API来查元素位置</p></blockquote> <p><img src="https://img-blog.csdnimg.cn/80a68236760b480dbc2ddd50c896d519.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_15,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p> <h4 id="_13-迭代方法-各种高级操作-filter-map-foreach"><a href="#_13-迭代方法-各种高级操作-filter-map-foreach" class="header-anchor">#</a> 13.迭代方法 - 各种高级操作 filter map forEach</h4> <p>超级好用的几个方法！</p> <ul><li><code>every()</code></li> <li><code>some()</code></li> <li><code>filter()</code></li></ul> <p><img src="https://img-blog.csdnimg.cn/ca565154c7664d0a8c01b45a30397477.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_17,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p> <ul><li><code>map()</code></li> <li><code>forEach()</code></li></ul> <p><img src="https://img-blog.csdnimg.cn/b16fc430c789416aaeb99134b28a7cd5.png" alt="请添加图片描述"></p> <h4 id="_14-归并方法-reduce"><a href="#_14-归并方法-reduce" class="header-anchor">#</a> 14.归并方法 reduce</h4> <ul><li><code>reduce()</code></li></ul> <p>这里的reduce的第一个参数 prev要注意</p> <p>如果求和时  一般会给其起名为total 用于存储截至此时的和</p> <p>我比较习惯给它取名叫 acc —— <code>accumulator</code> 累加器~</p> <p><img src="https://img-blog.csdnimg.cn/0ccc715666954883ad908dff58bff2a7.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_15,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p> <h4 id="_15-map集合类型的基本api"><a href="#_15-map集合类型的基本api" class="header-anchor">#</a> 15.Map集合类型的基本API</h4> <p>明确Map实例的格式 为 键值对</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;key1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;val1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;key2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;val2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;key3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;val3&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>set() 添加键值对</li> <li>get() 获得某个键的值</li> <li>has() 查询是否有这个键</li> <li><code>.size()</code> 获取键值对数量</li> <li>delete() 删除某个键值对</li> <li>clear() 清除映射实例中的所有键值对</li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map/entries" target="_blank" rel="noopener noreferrer">entries()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 返回一个新的包含 <code>[key, value]</code> 对的 <code>Iterator</code> 对象，返回的迭代器的迭代顺序与 <code>Map</code> 对象的插入顺序相同。</li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map/forEach" target="_blank" rel="noopener noreferrer">forEach()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 按照插入顺序依次对 <code>Map</code> 中每个键/值对执行一次给定的函数</li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map/values" target="_blank" rel="noopener noreferrer">values()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>它包含按顺序插入Map对象中每个元素的value值。</li></ul> <p>举例：</p> <p><img src="https://img-blog.csdnimg.cn/a78321c557bb42b797bd84877bc5fe04.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pWy5Luj56CB55qE5bCP5o-Q55C05omL,size_18,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p> <p>另外 与Object只能使用数值、字符串、符号作为键不同</p> <p>Map可以使用<strong>任何JS数据类型</strong>作为键！！（这也是为啥ES6要创键这个集合类型）</p> <ul><li><p>另外注意 Map实例对象2个有趣的特性：</p> <ul><li>一个key放入多个value —— 覆盖原先的value</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Adam'</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Adam'</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'Adam'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//88</span>
</code></pre></div><p>可以看出 key是不允许重复的！这也符合哈希表特性</p> <p>但是重复了也不会出错 自动就覆盖掉了</p> <ul><li>值重复就没啥事儿（那肯定的嘛）</li></ul> <p><img src="https://img-blog.csdnimg.cn/b7e9d37dcc56444085727559a46704ef.png" alt="请添加图片描述"></p></li></ul> <h4 id="_16-迭代map实例-按照插入顺序"><a href="#_16-迭代map实例-按照插入顺序" class="header-anchor">#</a> 16.迭代Map实例（按照插入顺序）</h4> <p>又看到了 <code>.entries()</code> 迭代器方法！</p> <p>——可以返回key value</p> <h4 id="_17-set集合类型的基本api"><a href="#_17-set集合类型的基本api" class="header-anchor">#</a> 17.Set集合类型的基本API</h4> <p>跟Map的大多数API 和 行为 都是共有的</p> <p>也是一组key的集合，但<strong>不存储value</strong>。</p> <ul><li>要创建一个<code>Set</code>，需要提供一个<code>Array</code>作为输入，或者直接创建一个空<code>Set</code>：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 空Set</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 含1, 2, 3</span>
<span class="token comment">//其实跟map的初始化方法是一样的 就是初始化内容不同而已</span>
</code></pre></div><p>由于key不能重复，所以，在<code>Set</code>中，key是无法像Map实例中一样 可以覆盖的！</p> <ul><li><code>.size</code> —— set的长度</li> <li><code>has()</code> 判断有没有这个元素</li> <li><code>clear()</code></li> <li><code>add()</code> 与map的set添加一组键值对不同 set只会添加一个独一无二的元素</li></ul> <h4 id="_18-apply方法的使用"><a href="#_18-apply方法的使用" class="header-anchor">#</a> 18.apply方法的使用</h4> <p>通过 <a href="https://www.w3school.com.cn/js/js_function_apply.asp" target="_blank" rel="noopener noreferrer">apply() 方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，您能够编写用于不同对象的方法。（与call()方法非常类似,只有传参时有区别——apply方法传参为对象）</p> <ul><li>方法重用</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">fullName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&quot;调用成功&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">firstName</span><span class="token operator">:</span><span class="token string">&quot;Bill&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&quot;Gates&quot;</span>
<span class="token punctuation">}</span>
person<span class="token punctuation">.</span><span class="token function">fullName</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bill调用成功Gates</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">fullName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">city<span class="token punctuation">,</span> country</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> city <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> country<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">firstName</span><span class="token operator">:</span><span class="token string">&quot;Bill&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&quot;Gates&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 还可以传参进去哈！与call不同于参数的类型 为 数组</span>
person<span class="token punctuation">.</span><span class="token function">fullName</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>person1<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;Seatle&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;USA&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bill Gates,Seatle,USA</span>
</code></pre></div><ul><li>可用于在数组上模拟max方法</li></ul> <p>您可以使用 <code>Math.max()</code> 方法找到（数字列表中的）最大数字：</p> <p>由于 JavaScript 数组没有 max() 方法，因此您可以应用 <code>Math.max.apply()</code> 方法。</p> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 也会返回 3 注意：第一个参数填啥没影响的，本次使用中没他事儿~</span>
</code></pre></div><ul><li>JavaScript 严格模式</li></ul> <p>在 JavaScript 严格模式下，如果 apply() 方法的第一个参数不是对象，则它将成为被调用函数的所有者（对象）。</p> <p>在“非严格”模式下，它成为全局对象。</p> <h4 id="_19-浅复制数组的一部分到同一数组的另一位置-copywithin"><a href="#_19-浅复制数组的一部分到同一数组的另一位置-copywithin" class="header-anchor">#</a> 19.浅复制数组的一部分到同一数组的另一位置 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/copyWithin" target="_blank" rel="noopener noreferrer">copyWithin()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p><code>copyWithin()</code> 方法浅复制数组的一部分到同一数组中的另一个位置，并返回它，不会改变原数组的长度。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> array1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// copy to index 0 the element at index 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array1<span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: Array [&quot;d&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]</span>

<span class="token comment">// copy to index 1 all elements from index 3 to the end</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array1<span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: Array [&quot;d&quot;, &quot;d&quot;, &quot;e&quot;, &quot;d&quot;, &quot;e&quot;]</span>
</code></pre></div><p>神奇的方法~</p> <p>为啥用呢 看看JS数据结构与算法中怎么说~</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112011125372.png" alt="image-20211201112543252"></p> <h4 id="_20-array-of-创建新数组-复制一维数组的方法"><a href="#_20-array-of-创建新数组-复制一维数组的方法" class="header-anchor">#</a> 20.<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/of" target="_blank" rel="noopener noreferrer">Array.of()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>创建新数组，复制一维数组的方法</h4> <p><code>Array.of()</code> 方法创建一个具有可变数量参数的新数组实例，而不考虑参数的数量或类型。</p> <p><code>Array.of()</code> 和 <code>Array</code> 构造函数之间的区别在于处理整数参数：<code>Array.of(7)</code> 创建一个具有单个元素 <strong>7</strong> 的数组，而 <strong><code>Array(7)</code></strong> 创建一个长度为7的空数组（**注意：**这是指一个有7个空位(empty)的数组，而不是由7个<code>undefined</code>组成的数组）。</p> <div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// [7]</span>
Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>

<span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// [ , , , , , , ]</span>
<span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [1, 2, 3]</span>
</code></pre></div><p>可以用来浅复制一个数组<img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112011121232.png" alt="image-20211201112108110"></p> <p>官方文档中没有提到用of方法进行复制的操作</p> <p>但是雀氏可以~ 下面额尝试可以清楚看出来复制为浅复制！</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112011124307.png" alt="image-20211201112428211"></p> <h3 id="经典数组去重"><a href="#经典数组去重" class="header-anchor">#</a> 经典数组去重</h3> <blockquote><p>22/3/20 美团一面碰到一个极为刁钻的去重</p> <h3 id="带有nan-的数组去重"><a href="#带有nan-的数组去重" class="header-anchor">#</a> 带有<code>NaN</code> <code>{}</code>的数组去重</h3> <blockquote><p>聊了四十分钟的项目&amp;基础 本来说写两道题 没想到一道题都没写完美 凉凉的赶脚~</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'666'</span><span class="token punctuation">,</span> <span class="token string">'666'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">uniq</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="最开始的错误思想"><a href="#最开始的错误思想" class="header-anchor">#</a> 最开始的错误思想</h4> <p><strong>——仅能用于基本数据类型的查重</strong></p> <p>用了三种思路 【1】Set数据结构快捷完成，【2】排序后冒泡比较，【3】用每轮查找都用 <code>indexOf</code>进行比对</p> <p>发现有个坑没排掉 要<strong>对<code>{}</code> <code>NaN</code>这俩不属于基本数据类型的元素 进行单独的去重处理</strong> 在牛客的OJ上一紧张把这事儿给忘了</p> <blockquote><p>经过测试，<code>indexOf</code>效率最高</p> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/26/16f423b56fc0c430~tplv-t2oaga2asx-watermark.awebp" alt="img"></p></blockquote> <p>正解👇</p> <ul><li><p>利用 <code>hasOwnProperty + filter + 额外存储空间</code></p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">666</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">666</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">,</span> <span class="token string">'666'</span><span class="token punctuation">,</span> <span class="token string">'666'</span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                            
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">uniq</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> uniqObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> uniqItem <span class="token operator">=</span> <span class="token keyword">typeof</span> item <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> uniqObj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>uniqItem<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> uniqObj<span class="token punctuation">[</span>uniqItem<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// obj[attr] = true 返回true obj[attr] = false 返回false 22/3/20的sfz并不知道这个知识点，，，</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">uniq</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 测试成功~ 爽~~</span>
</code></pre></div></li></ul></li></ul></blockquote> <p>可以写一下经典的  <a href="https://leetcode-cn.com/problems/contains-duplicate/" target="_blank" rel="noopener noreferrer">217. 存在重复元素<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>我的题解——<a href="https://leetcode-cn.com/problems/contains-duplicate/solution/xue-xi-ji-hua-shu-ju-jie-gou-ru-men-mei-ho9wm/" target="_blank" rel="noopener noreferrer">【数据结构入门每日刷题打卡1/33】暴力遍历、哈希表、排序（拓展了下手写快排 注释贼清楚！） - 存在重复元素 - 力扣（LeetCode） (leetcode-cn.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p><a href="https://juejin.cn/post/6844903981311852557" target="_blank" rel="noopener noreferrer">数组去重12种方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - 这边里利用对象实现去重的思路挺有意思的 亮点是不用辅助数组 直接在原数组上操作 数组熟练度++</p></blockquote> <h4 id="利用辅助对象模拟哈希表-不借助辅助数组-在原数组上直接去重"><a href="#利用辅助对象模拟哈希表-不借助辅助数组-在原数组上直接去重" class="header-anchor">#</a> 利用辅助对象模拟哈希表+（不借助辅助数组）在原数组上直接去重</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> cur <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">// 如果当前遍历到的元素之前碰到过，进入逻辑把它从arr中删了</span>
            <span class="token comment">// 01 删除重复元素法一</span>
            arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 导致数组塌陷——用i--的方式规避数组塌陷！</span>
            <span class="token comment">// 删除重复元素法二</span>
            <span class="token comment">// arr[i]=arr[arr.length-1];// 重复元素的坑给数组最后一个元素勒</span>
            <span class="token comment">// arr.length--;// 删除最后一项</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2 4 6</span>
            <span class="token comment">// 02 对重复元素进行操作之后 手动将索引值-1 保证数组的每一项都被遍历~</span>
            i<span class="token operator">--</span><span class="token punctuation">;</span><span class="token comment">// 注意！删了这个元素之后它之后的数组元素都提前勒！要倒回去一个索引获得原本的下一个数组元素。</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token comment">// 跳过obj[cur] = cur，给i加上1 进入下一轮循环（其实这句不加也无所谓，给对象重复赋值也没啥影响~）</span>
        <span class="token punctuation">}</span>
        obj<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token operator">=</span>cur<span class="token punctuation">;</span><span class="token comment">// 给obj新增键值对；属性名和属性值是一样的</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">unique</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 法一答案 [12, 1, 3, 88, 66, 9] 法二答案 [12, 1, 66, 3, 9, 88] </span>
</code></pre></div><h3 id="经典数组乱序"><a href="#经典数组乱序" class="header-anchor">#</a> 经典数组乱序</h3> <h4 id="前端面试-算法篇-数组乱序"><a href="#前端面试-算法篇-数组乱序" class="header-anchor">#</a> <a href="https://www.cnblogs.com/wisewrong/p/10517532.html" target="_blank" rel="noopener noreferrer">前端面试(算法篇) - 数组乱序<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <blockquote><p>写得挺好的 搭配 <a href="https://leetcode-cn.com/problems/shuffle-an-array/" target="_blank" rel="noopener noreferrer">384. 打乱数组<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 食用更佳</p> <p>首先是伪随机的两种方法</p></blockquote> <ul><li><strong>随机取数</strong></li></ul> <p>从原数组中随机抽取一个数，然后使用 splice 删掉该元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getRandomArrElement</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 生成随机 index</span>
        <span class="token keyword">let</span> randomIdx <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// splice 返回的是一个数组</span>
        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>randomIdx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre></div><p>上面生成随机 index 用到了按位右移操作符 &gt;&gt;</p> <p>当后面的操作数是 0 的时候，该语句的结果就和 Math.floor() 一样，是向下取整</p> <p>但位操作符是在数值表示的最底层执行操作，因此速度更快</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 按位右移</span>
<span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span>

<span class="token comment">// Math.floor</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token comment">/* 这两种写法的结果是一样的，但位操作的效率更高 */</span>
</code></pre></div><ul><li><strong>通过 sort 乱序</strong></li></ul> <p>首先认识一下 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" target="_blank" rel="noopener noreferrer"><code>Array.prototype.sort()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 不了解的查看下 这个必须滚瓜烂熟</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'0'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">,</span> <span class="token string">'9'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0.5</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>但这并不是真正的乱序</strong>，计算机的 random 函数因为循环周期的存在，无法生成真正的随机数（力扣那题用这个方法也跑不通XD）</p> <ul><li><strong>Fisher–Yates shuffle 洗牌算法</strong></li></ul> <blockquote><p>这个方法太漂亮勒！</p> <p>另外这个作者的写法也很漂亮！棒！</p></blockquote> <p>洗牌算法的思路是：</p> <p>【1】<strong>先从数组末尾开始，选取最后一个元素，与数组中随机一个位置的元素交换位置</strong></p> <p>【2】<strong>然后在已经排好的最后一个元素以外的位置中，随机产生一个位置，让该位置元素与倒数第二个元素进行交换</strong></p> <p>以此类推，打乱整个数组的顺序</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> len<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// 获得随机数</span>
    <span class="token comment">// 交换位置</span>
    <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">[</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>再结合 ES6 的解构赋值，使用洗牌算法就更方便了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">shuffle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> m <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> i<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        i <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> m<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="经典数组扁平化"><a href="#经典数组扁平化" class="header-anchor">#</a> 经典数组扁平化</h3> <h4 id="【1】暴力tostring"><a href="#【1】暴力tostring" class="header-anchor">#</a> 【1】暴力<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/toString" target="_blank" rel="noopener noreferrer">toString<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p><code>arr.toString().split(',').map((item) =&gt; parseInt(item))</code></p> <p>嗯 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/toString" target="_blank" rel="noopener noreferrer"><code>Array.prototype.toString()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 能这么用是我没想到的</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112101040113.png" alt="image-20211210104037900"></p> <p>再遍历下数组对数组元素挨个Number()一下 字符串-&gt;整数</p> <h4 id="【2】递归实现-妙啊"><a href="#【2】递归实现-妙啊" class="header-anchor">#</a> 【2】递归实现（妙啊！）</h4> <ul><li>不使用API来打平多维数组</li></ul> <blockquote><p>参考：红宝书</p> <p>结合下面的过程看 很清晰~</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112110020345.png" alt="image-20211211002051241"></p></blockquote> <blockquote><p>本算法的递归调用边界和平常力扣（做二叉树/链表）遇到的不太相似（设置一个退出条件）</p> <p>本算法中，只有前面的if else执行完了，才会弹出递归调用栈~</p> <p>理解这一点 就很好想了！</p> <blockquote><p>另外，递归出口（弹栈时机）——<code>return xxx;</code></p> <p>把这个点想好，也是理解递归问题的关键！</p></blockquote></blockquote> <p>【2】出递归调用栈时 0插入结果数组（<code>return flattenedArray</code>——[0]）</p> <p>然后的一维元素没有进入递归调用栈 1 2插入结果数组</p> <p>【3】将函数flatten([3,[4,5]], [0,1,2]) 插入递归调用栈</p> <p>【4】调用flatten([3,[4,5]], [0,1,2]) 时 3插入结果数组</p> <p>【5】将函数flatten([4,5],[0,1,2,3]) 插入递归调用栈</p> <p>【6】出递归调用栈时 4 5插入结果数组（<code>return flattenedArray</code>——[4,5]）</p> <p>最终flatten([3,[4,5]], [0,1,2])弹出递归调用栈（这块儿上面的图不太对哈！）（<code>return flattenedArray</code>——[0,1,2,3,4,5]）</p> <p>然后的一维元素没有进入递归调用栈 插入结果数组6</p> <ul><li>限定打平到第几层嵌套递归</li></ul> <blockquote><p>参考 红宝书</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112101023106.png" alt="image-20211210102302950"></p></blockquote> <h4 id="【3】调api嘛-不丢人"><a href="#【3】调api嘛-不丢人" class="header-anchor">#</a> 【3】调API嘛 不丢人</h4> <ul><li>调用ES2019的新API flat~~</li></ul> <p><code>arr.flat(Infinity)</code>可以扁平化不管多深的多维数组~</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112101044876.png" alt="image-20211210104430763"></p> <ul><li>还有一个没咋见过的flatMap()操作hhh</li></ul> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202112101051544.png" alt="image-20211210105104415"></p> <h3 id="经典数组排序"><a href="#经典数组排序" class="header-anchor">#</a> 经典数组排序</h3> <blockquote><p>知识点：V8中sort函数的实现机制</p> <p><code>sort()</code> 方法用<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FIn-place_algorithm" target="_blank" rel="noopener noreferrer">原地算法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对数组的元素进行排序，并返回数组。默认排序顺序是在将元素转换为字符串，然后比较它们的UTF-16代码单元值序列时构建的</p> <p>— MDN</p></blockquote> <blockquote><p>关于 <code>Array.prototype.sort()</code>  ，ES 规范并没有指定具体的算法，在 V8 引擎中，  <strong>7.0 版本之前</strong> ，数组长度小于10时， <code>Array.prototype.sort()</code> 使用的是<strong>插入排序</strong>，否则用快速排序。</p> <p>在 V8 引擎 <strong>7.0 版本之后</strong> 就舍弃了快速排序，因为它不是稳定的排序算法，在最坏情况下，时间复杂度会降级到 O(n^2^)。</p> <p>于是采用了一种混合排序的算法：<strong>TimSort</strong> 。</p> <p>这种功能算法最初用于Python语言中，严格地说它不属于以上10种排序算法中的任何一种，属于一种混合排序算法：</p> <p>在数据量小的子数组中使用<strong>插入排序</strong>，然后再使用<strong>归并排序</strong>将有序的子数组进行合并排序，时间复杂度为 <code>O(nlogn)</code> 。</p> <p>作者：an_371e
链接：https://www.jianshu.com/p/a557e9006186
来源：简书</p></blockquote> <h2 id="object类型相关知识-及常见api"><a href="#object类型相关知识-及常见api" class="header-anchor">#</a> Object类型相关知识，及常见api</h2> <h3 id="object-prototype-tostring"><a href="#object-prototype-tostring" class="header-anchor">#</a> <code>Object.prototype.toString()</code></h3> <ul><li>判断引用数据类型的最佳方案！！！
<ul><li>面试很可能会考察这部分内容！</li></ul></li></ul> <p><img src="https://raw.githubusercontent.com/FangzhouSu/blog-image/main/202203261808805.png" alt="image-20220326180858725"></p> <ul><li><code>RefExp</code>和<code>Array</code>的显式原型上都重写了<code>toString</code>这个方法 所以我们用的时候必须得重新调用Object原型链上的方法！！</li></ul> <h3 id="对象的基本概念"><a href="#对象的基本概念" class="header-anchor">#</a> 对象的基本概念</h3> <blockquote><p>来自蚂蚁成电校园行分享会</p></blockquote> <blockquote><p>对象是非常重要的概念</p></blockquote> <p>我们把对象理解为：<strong>存放属性的容器</strong></p> <ul><li><p>常用的内置对象：Math <strong>JSON</strong> Map Set Array</p> <ul><li><p>JSON是序列化传输数据的方式（是一个数据格式）</p> <ul><li><p><code>JSON.stringify()</code> 方法将一个 JavaScript 对象或值<strong>转换为 JSON 字符串</strong></p> <ul><li><div class="language-JS extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;{&quot;x&quot;:5,&quot;y&quot;:6}&quot;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;[3,&quot;false&quot;,false]&quot;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;{&quot;x&quot;:[10,null,null,null]}&quot;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2006</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: &quot;&quot;2006-01-02T15:04:05.000Z&quot;&quot;</span>
</code></pre></div></li></ul></li> <li><p><code>JSON.parse()</code> 方法用来<strong>解析JSON字符串</strong>，构造由字符串描述的JavaScript值或对象</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token string">'{&quot;result&quot;:true, &quot;count&quot;:42}'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: 42</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: true</span>
</code></pre></div></li></ul></li></ul></li></ul></li> <li><p>宿主对象</p> <ul><li>浏览器宿主：Window、History、Location</li> <li>Node宿主：global等</li></ul></li></ul> <h3 id="javascript-tostring-方法"><a href="#javascript-tostring-方法" class="header-anchor">#</a> JavaScript toString() 方法</h3> <p>toString方法在Object的显示原型上，其他对象对toString方法进行了重写~</p> <p><img src="https://raw.githubusercontent.com/FangzhouSu/blog-image/main/202111181911262.png" alt="image-20211118191137192"></p> <p><code>toString()</code> 方法可把一个 Number 对象转换为一个字符串，并返回结果。</p> <p>语法</p> <div class="language-js extra-class"><pre class="language-js"><code>NumberObject<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>radix<span class="token punctuation">)</span><span class="token comment">// radix就是指进制数</span>
</code></pre></div><h4 id="比较有趣的一个点"><a href="#比较有趣的一个点" class="header-anchor">#</a> 比较有趣的一个点</h4> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202111181842996.png" alt="image-20211118184251915"></p> <blockquote><p>小数居然算是<code>Number Object</code>…？</p></blockquote> <p>答疑：看了下MDN <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/toString" target="_blank" rel="noopener noreferrer">Number.prototype.toString()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 得知——</p> <ul><li>(10) 是 <strong>numObj</strong>  10不是</li> <li>(0.6) 是 numObj 0.6也是numObj</li></ul> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202111181910721.png" alt="image-20211118191027604"></p> <blockquote><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 输出 '10'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 输出 '17'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">17.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Uncaught SyntaxError: Invalid or unexpected token</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">17.2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出 '17.2'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">17.2</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出 '17.2'</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 输出 '110'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">254</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出 'fe'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出 '-1010'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0xff</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 '-11111111'</span>
</code></pre></div><p>又来了个神奇的操作</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">10.</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 输出&quot;10&quot;  </span>
</code></pre></div><p>听前辈说这个是因为 . 指代不明确</p></blockquote> <ul><li>利用这个方法 配合 <a href="https://www.runoob.com/jsref/jsref-substr.html" target="_blank" rel="noopener noreferrer"><code>substr()</code>方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可以实现<strong>随机验证码生成</strong></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 以36进制将随机数转换为随机字符串，从得到的随机字符串的第二位开始拿10个字符~根本重复不了！</span>
</code></pre></div><p>以36进制将随机数转换为随机字符串，从得到的随机字符串的第二位开始拿10个字符~根本重复不了！</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202111181847459.png" alt="image-20211118184717386"></p> <h2 id="函数、类相关"><a href="#函数、类相关" class="header-anchor">#</a> 函数、类相关</h2> <h3 id="常见api"><a href="#常见api" class="header-anchor">#</a> 常见API</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener noreferrer">Function.prototype.call() - JavaScript | MDN (mozilla.org)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>call()</code> 方法使用一个<strong>指定的 <code>this</code> 值</strong>和单独给出的一个或多个<strong>参数</strong>来调用一个函数。</p> <p><strong>注意：<strong>该方法的语法和作用与 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener noreferrer"><code>apply()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法类似，只有一个区别，就是 <code>call()</code> 方法接受的是</strong>一个参数列表</strong>，而 <code>apply()</code> 方法接受的是<strong>一个包含多个参数的数组</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Product</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Food</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Product</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//  Object { name: &quot;cheese&quot;, price: 5 }</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> <span class="token string">'food'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Food</span><span class="token punctuation">(</span><span class="token string">'cheese'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// &quot;cheese&quot;</span>
</code></pre></div><h5 id="function-prototype-apply-javascript-mdn"><a href="#function-prototype-apply-javascript-mdn" class="header-anchor">#</a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener noreferrer">Function.prototype.apply() - JavaScript | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h5> <p><strong><code>apply()</code></strong> 方法调用一个具有给定<code>this</code>值的函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// expected output: 7</span>

<span class="token keyword">const</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// expected output: 2</span>
</code></pre></div><h5 id="function-prototype-bind-javascript-mdn"><a href="#function-prototype-bind-javascript-mdn" class="header-anchor">#</a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="noopener noreferrer">Function.prototype.bind() - JavaScript | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h5> <p><code>bind()</code> 方法创建一个新的函数，在 <code>bind()</code> 被调用时，这个新函数的 <code>this</code> 被指定为 <code>bind()</code> 的第一个参数，而其余参数将作为新函数的参数，供调用时使用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getX</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> unboundGetX <span class="token operator">=</span> module<span class="token punctuation">.</span>getX<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 42</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unboundGetX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The function gets invoked at the global scope expected output: undefined</span>
<span class="token comment">// expected output: undefined</span>

<span class="token keyword">const</span> boundGetX <span class="token operator">=</span> <span class="token function">unboundGetX</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">boundGetX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// expected output: 42</span>
</code></pre></div><p>继承问题</p> <blockquote><p>通过原型链实现子类对父类的继承</p> <p><code>Child.prototype = new Father();</code></p> <p>别忘了修正Child类显示原型的<code>constructor</code></p> <p><code>Child.prototype.constructor = Child</code></p></blockquote> <h3 id="继承模式"><a href="#继承模式" class="header-anchor">#</a> 继承模式</h3> <ul><li><p>原型链继承 : 得到方法</p> <ul><li>通过<code>Child.prototype = new Parent()</code>继承父函数 从而继承了属性与方法</li> <li>缺点：通过Child构造的对象 的原型对象 的 <code>constructor</code> 属性指向Parent！这不好！
<ul><li>我们需要让子类型的原型的 <code>constructor</code>  指向子类型 才对！</li> <li>这个问题可以通过 <code>Child.prototype.constructor = Child;</code> 来修正constructor属性</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 子类型的原型指向父类型实例</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child<span class="token punctuation">;</span><span class="token comment">// 修正constructor属性</span>
<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//有test()</span>
</code></pre></div></li> <li><p>借用构造函数 : 得到属性</p> <ul><li>通过 <code>Parent.call(this,name,age)</code> 继承（调用父类型构造函数）</li> <li>缺点：获得父类型的方法很麻烦！还得借助call方法一个个地弄 <code>Parent.func.call(this,参数)</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">xxx</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>xxx <span class="token operator">=</span> xxx<span class="token punctuation">}</span>
<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">xxx<span class="token punctuation">,</span>yyy</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> xxx<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//借用构造函数   this.Parent(xxx)</span>
    <span class="token comment">// 相当于 this.Parent(xxx)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//child.xxx为'a', 但child没有test()</span>
</code></pre></div></li> <li><p>组合</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">xxx</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>xxx <span class="token operator">=</span> xxx<span class="token punctuation">}</span>
<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">xxx<span class="token punctuation">,</span>yyy</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> xxx<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//借用构造函数   this.Parent(xxx)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到test()</span>
<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//child.xxx为'a', 也有test()</span>
</code></pre></div></li></ul> <h3 id="js实现继承的最佳实践"><a href="#js实现继承的最佳实践" class="header-anchor">#</a> JS实现继承的最佳实践</h3> <blockquote><p>使用 原型链结合构造函数</p> <p>在父类型属性有很多条时 使用 <code>Parent.call(this,父函数属性)</code> 让子类型继承</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">attribute<span class="token punctuation">,</span>other</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>attribute <span class="token operator">=</span> attribute<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>other <span class="token operator">=</span> other<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">output</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;此方法位于Parent的显式原型中  Child构造函数继承了我 所以Child的实例对象可以顺着隐式原型连找到这个对象（在Object对象上）&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">attribute<span class="token punctuation">,</span> other</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>attribute<span class="token punctuation">,</span>other<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 继承父类型的属性</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 原型链继承！让子类型的显式原型指向父类型的实例！</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child<span class="token punctuation">;</span><span class="token comment">// 出于严谨 这里修正constructor属性 要不然Child的显式原型的constructor就是Parent了 这就很奇怪！</span>
<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ['a', 'b']</span>
child<span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/73bdd1e607af4508870095cf0d8ffd98.png" alt="在这里插入图片描述"></p> <p>上面的属性的输出有些问题</p> <p>JS继承最佳实践完整版输出如下：</p> <p><img src="https://img-blog.csdnimg.cn/12053e2fc0e9454696d32fcf45227495.png" alt="在这里插入图片描述"></p> <p>好吧上面的还是不全 有点小问题——</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child<span class="token punctuation">;</span><span class="token comment">// 出于严谨 这里修正constructor属性 要不然Child的显式原型的constructor就是Parent了 这就很奇怪！</span>
<span class="token comment">// 修正完 constructor指向Child构造函数</span>
</code></pre></div><h3 id="this关键字"><a href="#this关键字" class="header-anchor">#</a> this关键字</h3> <blockquote><p><code>this</code> 会作为变量<strong>一直向上级词法作用域查找</strong>，直至找到为止</p> <p>-<a href="https://cn.vuejs.org/v2/guide/instance.html" target="_blank" rel="noopener noreferrer">Vue官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h4 id="coderwhy文章"><a href="#coderwhy文章" class="header-anchor">#</a> coderwhy<a href="https://mp.weixin.qq.com/s/hYm0JgBI25grNG_2sCRlTA" target="_blank" rel="noopener noreferrer">文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p>优先级从低到高</p> <ul><li>默认绑定
<ul><li>没有被绑定到某个对象上进行调用
<ul><li>this指向window（严格模式下报错）</li></ul></li></ul></li> <li>隐式绑定
<ul><li>通过某个对象进行调用</li></ul></li> <li>显式绑定
<ul><li>call apply bind</li></ul></li> <li>new绑定
<ul><li>new Function()</li></ul></li></ul> <blockquote><h4 id="【神三元】原生js灵魂之问-中-检验自己是否真的熟悉javascript-掘金-juejin-cn"><a href="#【神三元】原生js灵魂之问-中-检验自己是否真的熟悉javascript-掘金-juejin-cn" class="header-anchor">#</a> <a href="https://juejin.cn/post/6844903986479251464#heading-42" target="_blank" rel="noopener noreferrer">【神三元】原生JS灵魂之问(中)，检验自己是否真的熟悉JavaScript？ - 掘金 (juejin.cn)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4></blockquote> <p>其实JS中的this是一个非常简单的东西，只需要理解它的执行规则就OK。</p> <p>在这里不想像其他博客一样展示太多的代码例子弄得天花乱坠， 反而不易理解。</p> <p>call/apply/bind可以显式绑定, 这里就不说了。</p> <p>主要这些场隐式绑定的场景讨论:</p> <ol><li>全局上下文</li> <li>直接调用函数</li> <li>对象.方法的形式调用</li> <li>DOM事件绑定(特殊)</li> <li>new构造函数绑定</li> <li>箭头函数</li></ol> <h4 id="_1-全局上下文"><a href="#_1-全局上下文" class="header-anchor">#</a> 1. 全局上下文</h4> <p>全局上下文默认this指向window, 严格模式下指向undefined。</p> <h4 id="_2-直接调用函数"><a href="#_2-直接调用函数" class="header-anchor">#</a> 2. 直接调用函数</h4> <p>比如:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> func <span class="token operator">=</span> obj<span class="token punctuation">.</span>a<span class="token punctuation">;</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这种情况是直接调用。this相当于全局上下文的情况。</p> <h4 id="_3-对象-方法的形式调用"><a href="#_3-对象-方法的形式调用" class="header-anchor">#</a> 3. 对象.方法的形式调用</h4> <p>还是刚刚的例子，我如果这样写:</p> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这就是<code>对象.方法</code>的情况，this指向<strong>这个对象</strong></p> <h4 id="_4-dom事件绑定"><a href="#_4-dom事件绑定" class="header-anchor">#</a> 4. DOM事件绑定</h4> <p>onclick和addEventerListener中 this 默认指向绑定事件的元素。</p> <p>IE比较奇异，使用attachEvent，里面的this默认指向window。</p> <h4 id="_5-new-构造函数"><a href="#_5-new-构造函数" class="header-anchor">#</a> 5. new+构造函数</h4> <p>此时构造函数中的this指向实例对象。</p> <h4 id="_6-箭头函数"><a href="#_6-箭头函数" class="header-anchor">#</a> 6. 箭头函数？</h4> <p>箭头函数没有this, 因此也不能绑定。里面的this会指向当前最近的非箭头函数的this，找不到就是window(严格模式是undefined)。比如:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token function-variable function">do</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">do</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 找到最近的非箭头函数a，a现在绑定着obj, 因此箭头函数中的this是obj</span>
复制代码
</code></pre></div><blockquote><p>优先级: new  &gt; call、apply、bind  &gt; 对象.方法 &gt; 直接调用。</p></blockquote> <p>作者：神三元
链接：https://juejin.cn/post/6844903986479251464
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p> <h4 id="一道输出题引发的对箭头函数绑定的this的思考"><a href="#一道输出题引发的对箭头函数绑定的this的思考" class="header-anchor">#</a> 一道输出题引发的对箭头函数绑定的this的思考</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'name'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token function-variable function">s</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> s<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sayHello <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// A</span>
<span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'B'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">sayHello</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// A</span>
</code></pre></div><p>函数中的this与定义时所处的上下文绑定，且不能被改变， 箭头函数this指向取决于它外层找到的离它最近的第一个非箭头函数的this。所以一直是A，且不能改变（apply,call都不行）——</p> <blockquote><p>因为箭头函数没有自己的this指针，通过 <code>call()</code> <em>或</em> <code>apply()</code> 方法调用一个函数时，只能传递参数（<strong>不能绑定this</strong>---译者注），他们的第一个参数会被忽略。（这种现象<u>对于bind方法同样成立</u>---译者注）</p></blockquote> <h4 id="mdn文档学习"><a href="#mdn文档学习" class="header-anchor">#</a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener noreferrer">MDN文档学习<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p><strong>箭头函数没有自己的this指针，探究其通过 call 或 apply 调用后的局限性</strong></p> <blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener noreferrer">Function.prototype.call()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>call()</code> 方法<strong>使用一个指定的 <code>this</code> 值</strong>和单独给出的一个或多个参数来<strong>调用一个函数</strong>。</p> <p>该方法的语法和作用与 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener noreferrer"><code>apply()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法类似，只有一个区别，就是 <code>call()</code> 方法接受的是<strong>一个参数列表</strong>，而 <code>apply()</code> 方法接受的是<strong>一个包含多个参数的数组</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>thisArg</li></ul> <p>可选的。<strong>在 <em><code>function</code></em> 函数运行时使用的 <code>this</code> 值。</strong></p> <blockquote><p>请注意，<code>this</code>可能不是该方法看到的实际值：如果这个函数处于<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode" target="_blank" rel="noopener noreferrer">非严格模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下，则指定为 <code>null</code> 或 <code>undefined</code> 时会自动替换为指向全局对象，原始值会被包装。</p></blockquote> <ul><li>arg1, arg2, ...</li></ul> <p>指定的参数列表。</p></blockquote> <p>由于 箭头函数没有自己的this指针，通过 <code>call()</code> <em>或</em> <code>apply()</code> 方法调用一个函数时，只能传递参数（<strong>不能绑定this</strong>---译者注），他们的第一个参数会被忽略。（这种现象<u>对于bind方法同样成立</u>---译者注）</p> <p>举个例子就知道了</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> adder <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    
    <span class="token function-variable function">add</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>base<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// thisArg未指定则默认指向全局对象adder</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">addThruCall</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token number">666</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>base<span class="token punctuation">;</span><span class="token comment">// 如果这里是个普通函数，则进行call时，将给b这个对象调用f方法，base为666</span>
        <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>adder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2(adder.base + 1)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>adder<span class="token punctuation">.</span><span class="token function">addThruCall</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2(依然是adder.base（而不是b.） + 1)</span>
</code></pre></div><h4 id="阮大教程-偏基础-偏底层原理-例子很简单"><a href="#阮大教程-偏基础-偏底层原理-例子很简单" class="header-anchor">#</a> 阮大教程 偏基础，偏底层原理，例子很简单</h4> <p>this指向<strong>函数运行时所在的环境</strong>，那么为什么this关键字有这样的作用？函数的运行环境是如何决定的？看看阮一峰大大写得这篇文章，你会有新的感悟！（真的让我对内存、对象等知识都有了新的认识！）</p> <p><a href="https://www.ruanyifeng.com/blog/2018/06/javascript-this.html" target="_blank" rel="noopener noreferrer">【阮大】JavaScript 的 this 原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>粘一下this的定义：</p> <blockquote><p>由于函数可以在不同的运行环境执行，所以需要有一种机制，能够在函数体内部获得当前的<strong>运行环境</strong>（context）。所以，<code>this</code>就出现了，它的设计目的就是<strong>在函数体内部，指代函数当前的运行环境</strong>。</p></blockquote> <h5 id="这篇文章中例子很多-做完以后面试题应该是不怕了"><a href="#这篇文章中例子很多-做完以后面试题应该是不怕了" class="header-anchor">#</a> 这篇文章中例子很多，做完以后面试题应该是不怕了！</h5> <p><a href="https://note.youdao.com/ynoteshare/index.html?id=b2fab3b044aa90033395df0c8c9ca3a4&amp;type=note&amp;_time=1634385217314" target="_blank" rel="noopener noreferrer">this到底指向哪里？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>在JavaScript中<code>this</code>的指向总是让人很困惑，它到底指的啥？。<code>this</code>在不同的执行环境，不同的用法下会有所不同，以下分几种情况，讨论<code>this</code>的指向。</p> <ul><li><h5 id="this在全局作用域中"><a href="#this在全局作用域中" class="header-anchor">#</a> this在全局作用域中</h5></li> <li><h5 id="this在函数-function-里"><a href="#this在函数-function-里" class="header-anchor">#</a> this在函数(function)里</h5></li> <li><h5 id="在构造函数里的this指向"><a href="#在构造函数里的this指向" class="header-anchor">#</a> 在构造函数里的this指向</h5></li> <li><h5 id="在事件处理器-event-handler-中this的指向"><a href="#在事件处理器-event-handler-中this的指向" class="header-anchor">#</a> 在事件处理器(event handler)中this的指向</h5></li></ul></blockquote> <blockquote><p>总结：</p> <ul><li>对于函数中的<code>this</code>，通过查看<code>()</code>左边所属的对象去确定，真的很好用。</li> <li>实质上，<code>this</code>是在创建函数的执行环境时，在创建阶段确定的，因此，弄透执行环境，去思考执行环境创建阶段的<code>this</code>的指向，<code>this</code>的指向就不会弄错了</li></ul> <blockquote><p>雀氏！在使用new关键字创建对象时，其中一步就是“构造函数内部的this被赋值为这个创建好的新对象（即this指向新对象）”（参考红宝书）</p> <p><img src="https://img-blog.csdnimg.cn/2e9199be6e1d40df92a1d69246930628.png" alt="在这里插入图片描述"></p></blockquote></blockquote> <h5 id="深入理解js函数中this指针的指向"><a href="#深入理解js函数中this指针的指向" class="header-anchor">#</a> <a href="https://www.cnblogs.com/zjjDaily/p/9482958.html" target="_blank" rel="noopener noreferrer">深入理解JS函数中this指针的指向<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h5> <blockquote><p>又是一篇前辈的文章，例子和情景都很全面！</p></blockquote> <blockquote><p>小结：</p> <p>函数在执行时，会在函数体内部自动生成一个this指针。谁<strong>直接调用产生这个this指针的函数</strong>，this就指向谁。</p> <p>由于js是采用的静态作用域（也叫词法作用域），这就意味着函数的执行依赖于<strong>函数定义的时候</strong>所产生（而不是函数调用的时候产生）的<strong>变量作用域</strong>。</p> <p>在全局作用域中“定义”一个函数的时候，只会创建包含全局作用域的作用域链。只有“执行”该函数的时候，才会复制创建时的作用域，并将当前函数的局部作用域放在作用域链的顶端。</p> <p>去取变量值的时候，首先看本函数里有没有该值，如果没有再到函数定义的外部去找</p></blockquote> <h4 id="javascript中arguments0表示的是什么-https-www-zhihu-com-question-21466212"><a href="#javascript中arguments0表示的是什么-https-www-zhihu-com-question-21466212" class="header-anchor">#</a> [JavaScript中arguments<a href="">0</a>表示的是什么？](https://www.zhihu.com/question/21466212)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token function-variable function">method</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token comment">// 输出1</span>
obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">// 输出3</span>
</code></pre></div><p>为啥这里的this指向了arguments呢？因为在Javascript里，数组只不过使用数字做属性名的方法，也就是说：<code>arguments[0]()</code>的意思，和<code>arguments.0()</code>的意思差不多（<strong>当然这么写是不允许的</strong>），你更可以这么理解：</p> <div class="language-js extra-class"><pre class="language-js"><code>arguments <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token operator">:</span> fn<span class="token punctuation">,</span> <span class="token comment">//也就是 functon() {alert(this.length)} </span>
    <span class="token number">1</span><span class="token operator">:</span> 第二个参数<span class="token punctuation">,</span> <span class="token comment">//没有 </span>
    <span class="token number">2</span><span class="token operator">:</span> 第三个参数<span class="token punctuation">,</span> <span class="token comment">//没有</span>
    <span class="token operator">...</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">//只有一个参数</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>变式 输出10</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token function-variable function">method</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token comment">// 输出10——全局的length</span>
</code></pre></div><ul><li>变式 输出5</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> fn
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 输出5 fn中的this绑定的是obj</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token function-variable function">method</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token comment">// fn.call(this)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
</code></pre></div><h4 id="箭头函数与this"><a href="#箭头函数与this" class="header-anchor">#</a> 箭头函数与this~</h4> <h5 id="_1-箭头函数与普通函数的区别"><a href="#_1-箭头函数与普通函数的区别" class="header-anchor">#</a> 1.箭头函数与普通函数的区别?</h5> <blockquote><p>1.箭头函数的参数只有一个时，可以省略小括号（但是！这里最好是<a href="https://github.com/lin-123/javascript#arrows--paren-wrap" target="_blank" rel="noopener noreferrer">带上括号<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>哦！），函数里面的执行语句只有一条时，可以省略花括号（但是！如果回调函数没有return 则<a href="https://github.com/lin-123/javascript#arrows--implicit-return" target="_blank" rel="noopener noreferrer">最好加上大括号<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ——减少副作用）
2.箭头函数本身没有this，它会<strong>继承作用域链上一层的this</strong>
3.箭头函数不能使用call, bind, apply来改变this指向</p></blockquote> <ul><li>写法不一样</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>普通函数存在变量提升的现象 箭头函数只会被提升变量</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 普通函数</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 箭头函数</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//报错 foo is not a function</span>
<span class="token keyword">let</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>箭头函数不能作为构造函数使用
<ul><li>函数中没有prototype属性</li> <li>this也不是自己的this</li> <li>这怎么new呐~</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token keyword">let</span> xiao_ming <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'小明'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xiao_ming<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//undefined</span>
</code></pre></div><ul><li>两者this的指向不同</li></ul> <p>普通函数的this指向的是谁调用该函数就指向谁</p> <p>箭头函数的this指向的是定义时上下文的this值（哪儿定义的 this就绑的哪儿），如果没有上下文环境对象，那么就指向最外层对象window。</p> <ul><li>箭头函数的arguments指向它的父级函数所在作用域的arguments</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token function-variable function">foo1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>

<span class="token comment">//[Arguments] { '0': 'test' }</span>
<span class="token comment">//[Arguments] { '0': 'test' }</span>
</code></pre></div><ul><li>箭头函数没有new.target</li></ul> <p>先说明下new.target是干嘛的，这家伙是用来检测函数是否被当做构造函数使用，他会返回一个指向构造函数的引用。</p> <p>因为箭头函数不能当做构造函数使用，自然是没有new.target的。</p> <h4 id="this指向哪里"><a href="#this指向哪里" class="header-anchor">#</a> this指向哪里？</h4> <blockquote><p>其实this指向的问题情况并不多，但是它在不同的执行条件下可能会绑定（指向）不同的对象，如果想要再深入了解，可以看一下coderwhy的<a href="https://mp.weixin.qq.com/s/hYm0JgBI25grNG_2sCRlTA" target="_blank" rel="noopener noreferrer">这篇文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li>普通函数中：this-&gt;window</li> <li>定时器中：this-&gt;window</li> <li>构造函数中：this-&gt;当前实例化的对象</li> <li>事件处理函数中：this-&gt;事件触发对象</li> <li>在 js 中一般理解就是<strong>谁调用这个 this 就指向谁</strong></li></ul> <h2 id="原型、原型链"><a href="#原型、原型链" class="header-anchor">#</a> 原型、原型链</h2> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8966f2402a64e0d8c92a48548eb6bda~tplv-k3u1fbpfcp-watermark.awebp?" alt="image.png"></p> <h3 id="prototype-proto-constructor的作用"><a href="#prototype-proto-constructor的作用" class="header-anchor">#</a> prototype <code>__proto__</code> constructor的作用</h3> <ul><li>prototype</li></ul> <p>用来挂载方法~</p> <ul><li><code>__proto__</code></li> <li>constructor</li></ul> <h3 id="获取对象原型的方法"><a href="#获取对象原型的方法" class="header-anchor">#</a> 获取对象原型的方法</h3> <p>每一个构造函数的内部都有一个 prototype 属性，它的属性值是一个对象，这个对象包含了可以由该构造函数的所有实例共享的属性和方法。</p> <p>当使用构造函数新建一个对象后，在这个对象的内部将包含一个指针，这个<strong>指针</strong><u>指向构造函数的 prototype 属性对应的值</u>，在 ES5 中这个指针被称为对象的原型。</p> <p>浏览器中实现了 <code>__proto__</code> 属性来访问这个属性，但是最好不要使用这个属性，因为它不是规范中规定的。</p> <p>ES5 中<strong>新增了一个 <code>Object.getPrototypeOf()</code> 方法，可以通过这个方法来获取对象的原型</strong>。</p> <h3 id="判断属性是否属于原型链的属性"><a href="#判断属性是否属于原型链的属性" class="header-anchor">#</a> 判断属性是否属于原型链的属性</h3> <p>使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty" target="_blank" rel="noopener noreferrer"><code>hasOwnProperty()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法来判断属性是否属于原型链的属性：</p> <blockquote><p><code>hasOwnProperty()</code> 方法会返回一个布尔值，指示对象自身属性中是否具有指定的属性（也就是，是否有指定的<strong>键</strong>）。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">iterate</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">var</span> res<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>
           res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token operator">+</span><span class="token string">': '</span><span class="token operator">+</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>这不比判断原型链啥的省脑子hh（当然方法还是得顺着原型链找咯）</p> <h4 id="object-prototype-isprototypeof"><a href="#object-prototype-isprototypeof" class="header-anchor">#</a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/isPrototypeOf" target="_blank" rel="noopener noreferrer">Object.prototype.isPrototypeOf()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p><code>isPrototypeOf()</code> 方法用于测试一个对象是否存在于另一个对象的原型链上。</p> <blockquote><p><code>isPrototypeOf()</code> 与 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="noopener noreferrer"><code>instanceof</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 运算符不同。在表达式 &quot;<code>object instanceof AFunction</code>&quot;中，<code>object</code> 的原型链是针对 <code>AFunction.prototype</code> 进行检查的，而不是针对 <code>AFunction</code> 本身。</p></blockquote> <p>本示例展示了 <code>Baz.prototype</code>, <code>Bar.prototype</code>, <code>Foo.prototype</code> 和 <code>Object.prototype</code> 在 <code>baz</code> 对象的原型链上：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token class-name">Bar</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Baz</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Bar</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> baz <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Baz</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Bar</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="闭包、作用域相关-面试手写题常客"><a href="#闭包、作用域相关-面试手写题常客" class="header-anchor">#</a> 闭包、作用域相关（面试手写题常客）</h2> <h3 id="对闭包scope的理解"><a href="#对闭包scope的理解" class="header-anchor">#</a> 对闭包<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Scope" target="_blank" rel="noopener noreferrer">Scope<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的理解</h3> <p>另外之前写过一篇入门级的文章 <a href="https://juejin.cn/post/7013941043116638239" target="_blank" rel="noopener noreferrer">从函数提升谈到闭包~<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>闭包是指<strong>有权访问另一个函数作用域中变量</strong>的函数，创建闭包的最常见的方式就是在一个函数内创建另一个函数，创建的函数可以访问到当前函数的局部变量。</p> <ul><li>比如，函数 A 内部有一个函数 B，函数 B 可以访问到函数 A 中的变量，那么函数 B 就是闭包。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span>
  window<span class="token punctuation">.</span><span class="token function-variable function">B</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre></div><p>在 JS 中，闭包存在的意义就是让我们可以间接访问函数内部的变量。</p> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202111230915179.png" alt="image-20211123091543037"></p> <ul><li>经典面试题：循环中使用闭包解决 var 定义函数的问题</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>首先因为 <code>setTimeout</code> 是个异步函数，所以会先把循环全部执行完毕，这时候 <code>i</code> 就是 6 了，所以会输出一堆 6。解决办法有三种：</p> <ul><li>第一种是使用闭包的方式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> j <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上述代码中，首先使用了立即执行函数将 <code>i</code> 传入函数内部，这个时候值就被固定在了参数 <code>j</code> 上面不会改变，当下次执行 <code>timer</code> 这个闭包的时候，就可以使用外部函数的变量 <code>j</code>，从而达到目的。</p> <ul><li>第二种就是使用 <code>setTimeout</code> 的第三个参数，这个参数会被当成 <code>timer</code> 函数的参数传入。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    i
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>第三种就是使用 <code>let</code> 定义 <code>i</code> 了来解决问题了，这个也是最为推荐的方式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="闭包何时被销毁-垃圾回收机制"><a href="#闭包何时被销毁-垃圾回收机制" class="header-anchor">#</a> 闭包何时被销毁？-垃圾回收机制</h3> <p>研究闭包的时候很好奇，啥时候闭包被销毁？</p> <p>最终结论-如果没有特殊的垃圾回收算法（暂时没有搜索到有这种算法）会造成闭包常驻！除非手动设置为null 否则就会造成内存泄露！</p> <p>查阅官方文档——</p> <blockquote><p>高级语言解释器嵌入了“垃圾回收器”，它的主要工作是跟踪内存的分配和使用，以便当分配的内存不再使用时，自动释放它。这只能是一个近似的过程，因为要知道是否仍然需要某块内存是<a href="http://en.wikipedia.org/wiki/Decidability_(logic)" target="_blank" rel="noopener noreferrer">无法判定的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（无法通过某种算法解决）。</p> <p>“垃圾回收实现只能有限制的解决一般问题，垃圾回收算法主要依赖于引用的概念。”</p></blockquote> <p>举个例子（来自官方文档，我加了一些注释）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 下面提到的&quot;这个对象&quot; 即为 {a:{b:2}}</span>
<span class="token comment">// 两个对象被创建，一个作为另一个的属性被引用，另一个被分配给变量o</span>
<span class="token comment">// 很显然，没有一个可以被垃圾收集</span>

<span class="token keyword">var</span> o2 <span class="token operator">=</span> o<span class="token punctuation">;</span> <span class="token comment">// o2变量是第二个对“这个对象”的引用</span>

o <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token comment">// 现在，“这个对象”只有一个o2变量的引用了，“这个对象”的原始引用o（原来是对象{a:{b:2}}，现在是个数值型，直接扔栈里就可以了！）已经没有</span>

<span class="token keyword">var</span> oa <span class="token operator">=</span> o2<span class="token punctuation">.</span>a<span class="token punctuation">;</span> <span class="token comment">// 引用“这个对象”的a属性</span>
               <span class="token comment">// 现在，“这个对象”有两个引用了，一个是o2，一个是oa</span>

o2 <span class="token operator">=</span> <span class="token string">&quot;yo&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 虽然最初的对象现在已经是零引用了，可以被垃圾回收了</span>
           <span class="token comment">// 但是它的属性a的对象还在被oa引用，所以还不能回收</span>

oa <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// a属性的那个对象现在也是零引用了</span>
           <span class="token comment">// 它可以被垃圾回收了</span>
</code></pre></div><h3 id="对作用域、作用域链的理解"><a href="#对作用域、作用域链的理解" class="header-anchor">#</a> 对作用域、作用域链的理解</h3> <h5 id="_1-全局作用域和函数作用域"><a href="#_1-全局作用域和函数作用域" class="header-anchor">#</a> 1）全局作用域和函数作用域</h5> <p>（1）全局作用域</p> <ul><li>最外层函数和最外层函数外面定义的变量拥有全局作用域</li> <li>所有未定义直接赋值的变量自动声明为全局作用域</li> <li>所有window对象的属性拥有全局作用域</li> <li>全局作用域有<strong>很大的弊端</strong>，过多的全局作用域变量会污染全局命名空间，容易引起命名冲突。</li></ul> <p>（2）函数作用域</p> <ul><li>函数作用域声明在函数内部的变量，一般只有固定的代码片段可以访问到</li> <li>作用域是分层的，内层作用域可以访问外层作用域，反之不行</li></ul> <h5 id="_2-块级作用域"><a href="#_2-块级作用域" class="header-anchor">#</a> 2）块级作用域</h5> <ul><li>使用ES6中新增的let和const指令可以声明块级作用域，块级作用域可以在函数中创建也可以在一个代码块中创建（由<code>{ }</code>包裹的代码片段）</li> <li>let和const声明的变量不会有变量提升，也不可以重复声明</li> <li>在循环中比较适合绑定块级作用域，这样就可以把声明的计数器变量限制在循环内部。</li></ul> <h5 id="_3-作用域链"><a href="#_3-作用域链" class="header-anchor">#</a> 3）<strong>作用域链：</strong></h5> <p>在当前作用域中查找所需变量，但是该作用域没有这个变量，那这个变量就是自由变量。如果在自己作用域找不到该变量就去父级作用域查找，依次向上级作用域查找，直到访问到window对象就被终止，这一层层的关系就是作用域链。</p> <p>作用域链的作用是<strong>保证对执行环境有权访问的所有变量和函数的有序访问，通过作用域链，可以访问到外层环境的变量和函数。</strong></p> <p>作用域链的本质上是一个指向变量对象的指针列表。变量对象是一个包含了执行环境中所有变量和函数的对象。作用域链的前端始终都是当前执行上下文的变量对象。全局执行上下文的变量对象（也就是全局对象）始终是作用域链的最后一个对象。</p> <p>当查找一个变量时，如果当前执行环境中没有找到，可以沿着作用域链向后查找。</p> <h3 id="对执行上下文的理解"><a href="#对执行上下文的理解" class="header-anchor">#</a> 对执行上下文的理解</h3> <h5 id="_1-执行上下文类型"><a href="#_1-执行上下文类型" class="header-anchor">#</a> 1. 执行上下文类型</h5> <p><strong>（1）全局执行上下文</strong></p> <p>任何<strong>不在函数内部的</strong>都是全局执行上下文，它首先会<strong>创建一个全局的window对象</strong>，并且<strong>设置this的值等于这个全局对象</strong>，一个程序中只有一个全局执行上下文。</p> <p><strong>（2）函数执行上下文</strong></p> <p>当一个函数被调用时，就会为该函数创建一个新的执行上下文，函数的上下文可以有任意多个。</p> <h5 id="_2-执行上下文栈"><a href="#_2-执行上下文栈" class="header-anchor">#</a> 2. 执行上下文栈</h5> <ul><li><strong>JavaScript引擎</strong>使用执行上下文栈来管理执行上下文</li> <li>当JavaScript执行代码时，首先遇到全局代码，会【1】创建一个全局执行上下文并且压入执行栈中，每当遇到一个函数调用，就会【2】为该函数创建一个新的执行上下文并压入栈顶，<strong>引擎会执行位于执行上下文栈顶的函数</strong>，当函数执行完成之后，【3】执行上下文从栈中弹出，【4】继续执行下一个上下文。当所有的代码都执行完毕之后，从【5】栈中弹出全局执行上下文。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'Hello World!'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inside first function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1</span>
  <span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Again inside first function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inside second function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//执行顺序</span>
<span class="token comment">//先执行second(),再执行first()-这里存疑 虽说second函数确实是在栈顶吧！</span>
</code></pre></div><h5 id="_3-创建执行上下文"><a href="#_3-创建执行上下文" class="header-anchor">#</a> 3. 创建执行上下文</h5> <p>创建执行上下文有两个阶段：<strong>创建阶段</strong>和<strong>执行阶段</strong></p> <p><strong>1）创建阶段</strong></p> <p>（1）<strong>this绑定</strong></p> <ul><li>在全局执行上下文中，this指向全局对象（window对象）</li> <li>在函数执行上下文中，<strong>this指向取决于函数如何调用</strong>。如果它<strong>被一个引用对象调用，那么 this 会被设置成那个对象</strong>（<code>let func = new Fn()</code>这里构造函数中的this就被设置为这个实例对象了！），否则 this 的值被设置为全局对象或者 undefined</li></ul> <blockquote><p>下面这俩没听说过的说</p> <p>（2）<strong>创建词法环境组件</strong></p> <ul><li>词法环境是一种有<strong>标识符——变量映射</strong>的数据结构，标识符是指变量/函数名，变量是对实际对象或原始数据的引用。</li> <li>词法环境的内部有两个组件：<strong>加粗样式</strong>：环境记录器:用来储存变量个函数声明的实际位置<strong>外部环境的引用</strong>：可以访问父级作用域</li></ul> <p>（3）<strong>创建变量环境组件</strong></p> <ul><li>变量环境也是一个词法环境，其环境记录器持有变量声明语句在执行上下文中创建的绑定关系。</li></ul></blockquote> <p><strong>2）执行阶段</strong></p> <p>此阶段会<strong>完成对变量的分配</strong>，最后执行完代码。</p> <p><strong>简单来说执行上下文就是指：</strong></p> <p>在执行一点JS代码之前，需要先<strong>解析代码</strong>。解析的时候会【1】先创建一个全局执行上下文环境，先【2】把代码中即将执行的变量、函数声明都拿出来，【3】变量先赋值为undefined，【4】函数先声明好可使用。这一步执行完了，才【5】开始正式的执行程序。</p> <p>在一个函数执行之前，也会创建一个函数执行上下文环境，跟全局执行上下文类似，不过函数执行上下文会多出this、arguments和函数的参数。</p> <ul><li>全局上下文：变量定义，函数声明</li> <li>函数上下文：变量定义，函数声明，<code>this</code>，<code>arguments</code></li></ul> <h3 id="静态作用域的两道基础题"><a href="#静态作用域的两道基础题" class="header-anchor">#</a> 静态作用域的两道基础题</h3> <h4 id="面试题考察静态性-面试题1"><a href="#面试题考察静态性-面试题1" class="header-anchor">#</a> 面试题考察静态性-面试题1</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 10</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">show</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 打印10</span>
</code></pre></div><p>记住一句话——</p> <p><strong>在其他函数中被调用不影响x在打印语句中的值</strong>（x在一开始定义的时候就确定了 打印的x是全局中的（毕竟是在人家全局那里调用的函数show嘛~））</p> <blockquote><p>21/10/17 更新 感觉可以用执行上下文来解释？毕竟涉及到了函数调用，很动态~</p> <p><img src="https://img-blog.csdnimg.cn/ff59c44a23bb42559efe8cb41512d7c8.png" alt="在这里插入图片描述"></p></blockquote> <blockquote><p>21/10/31更新</p> <p>又见到了一次这道题</p> <p>感觉上面的说法可能有一定道理，但是作用域的“静态性”才是最权威解释——在调用一个函数时，要找到它最开始被创建时的位置，进行寻值</p></blockquote> <h4 id="作用域链面试题-沿着作用域链找某个变量-面试题2"><a href="#作用域链面试题-沿着作用域链找某个变量-面试题2" class="header-anchor">#</a> 作用域链面试题~沿着作用域链找某个变量-面试题2</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token comment">//function(){console.log(fn)}</span>
    <span class="token keyword">var</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;找不到我吧~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">fn2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span><span class="token comment">// 报错 fn2 is not defined</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fn2<span class="token punctuation">)</span><span class="token comment">//function(){...}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>首先 第二行的打印是 fn对象（人家顺着作用域链就能轻松找到位于全局作用域中的fn咯~）</p></li> <li><p>第十一行 报错 来看看fn2的心路历程</p> <ul><li>先在fn2构造函数的函数作用域中找 没有定义过fn2！</li> <li>再去全局作用域里找 全局变量也没它这号变量！</li> <li>再去同级的函数作用域里找找行么？
<ul><li>不行！😂</li></ul></li></ul></li> <li><p>第十二行 打印fn2对象 加上this 表示obj对象 obj对象拥有这个fn2函数啊 没问题~</p></li></ul> <h2 id="异步编程"><a href="#异步编程" class="header-anchor">#</a> 异步编程</h2> <h3 id="promise异步输出问题-依次输出1-2-3-end"><a href="#promise异步输出问题-依次输出1-2-3-end" class="header-anchor">#</a> promise异步输出问题-依次输出1 2 3 end</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">promise1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">promise2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">promise3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> promiseList <span class="token operator">=</span> <span class="token punctuation">[</span>promise1<span class="token punctuation">,</span> promise2<span class="token punctuation">,</span> promise3<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 法1 用async await</span>
<span class="token comment">// const promiseChain = async(promiseList) =&gt; {</span>
<span class="token comment">// 	for (let promise of promiseList) {</span>
<span class="token comment">// 		const res = await promise();</span>
<span class="token comment">// 		console.log(res);</span>
<span class="token comment">// 	}</span>
<span class="token comment">// }</span>

<span class="token comment">// 使用立即执行函数（如果不让改25行这里的代码的话）</span>
<span class="token comment">// function promiseChain(promiseList) {</span>
<span class="token comment">// 	return (async () =&gt; {</span>
<span class="token comment">// 		for (let promise of promiseList) {</span>
<span class="token comment">// 			// console.log(promise);</span>
<span class="token comment">// 			const res = await promise();</span>
<span class="token comment">// 			console.log(res);</span>
<span class="token comment">// 		}</span>
<span class="token comment">// 	})();</span>
<span class="token comment">// }</span>

<span class="token comment">// 法二 使用reduce 创造回调链</span>
<span class="token keyword">const</span> <span class="token function-variable function">promiseChain</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> promiseList<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevPromise<span class="token punctuation">,</span> curPromise<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> prevPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      index <span class="token operator">&amp;&amp;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">curPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 这两行一个意思 45行的方法更加秀~</span>
  <span class="token comment">// return Promise.resolve(res).then(console.log)</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 整体流程如下——</span>
<span class="token comment">// return promise1()</span>
<span class="token comment">// 	.then((res) =&gt; {</span>
<span class="token comment">// 		console.log(res);</span>
<span class="token comment">// 		return promise2();</span>
<span class="token comment">// 	})</span>
<span class="token comment">// 	.then((res) =&gt; {</span>
<span class="token comment">// 		console.log(res);</span>
<span class="token comment">// 		return promise3();</span>
<span class="token comment">// 	})</span>
<span class="token comment">// 	.then((res) =&gt; {</span>
<span class="token comment">// 		console.log(res);</span>
<span class="token comment">// 	});</span>


<span class="token function">promiseChain</span><span class="token punctuation">(</span>promiseList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行完毕'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="promise的使用方法-理解"><a href="#promise的使用方法-理解" class="header-anchor">#</a> Promise的使用方法&amp;理解</h3> <p>Promise本身是<strong>同步的立即执行函数</strong>， 当在executor中执行resolve或者reject的时候, 此时是异步操作， 会先执行then/catch等，当主栈完成后，才会去调用resolve/reject中存放的方法执行，打印的时候，是打印的返回结果，一个Promise实例。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'settimeout'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>
<span class="token comment">// 输出顺序: script start-&gt;promise1-&gt;promise1 end-&gt;script end-&gt;promise2-&gt;settimeout</span>
</code></pre></div><p>当JS主线程执行到Promise对象时：</p> <ul><li>promise1.then() 的回调就是一个 task
<ul><li>promise1 是 resolved或rejected: 那这个 task 就会放入当前事件循环回合的 microtask queue（微任务队列）</li> <li>promise1 是 pending: 这个 task 就会放入 事件循环的未来的某个(可能下一个)回合的 microtask queue 中</li></ul></li> <li>setTimeout 的回调也是个 task ，它会被放入 macrotask queue（宏任务队列） 即使是 0ms 的情况</li></ul> <h4 id="promise调用机制总结"><a href="#promise调用机制总结" class="header-anchor">#</a> Promise调用机制总结</h4> <p><img src="https://gitee.com/su-fangzhou/blog-image/raw/master/202201121541408.png" alt="image-20220112154118171"></p> <h3 id="async、await相关"><a href="#async、await相关" class="header-anchor">#</a> async、await相关</h3> <h4 id="理解-javascript-的-async-await"><a href="#理解-javascript-的-async-await" class="header-anchor">#</a> <a href="https://segmentfault.com/a/1190000007535316" target="_blank" rel="noopener noreferrer">理解 JavaScript 的 async/await<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p>简单来说</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>如果await等到的不是一个 Promise 对象，那 await 表达式的运算结果就是它等到的东西。

如果await等到的是一个 Promise 对象，await 就忙起来了，它会阻塞后面的代码，等着 Promise 对象 resolve，然后得到 resolve 的值，作为 await 表达式的运算结果。
</code></pre></div></blockquote> <p>举例，用 <code>setTimeout</code> 模拟耗时的异步操作，先来看看不用 async/await 会怎么写</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">takeLongTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;long_time_value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">takeLongTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;got&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果改用 async/await 呢，会是这样</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">takeLongTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;long_time_value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> v <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">takeLongTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token comment">// console.log(&quot;async end&quot;);</span>
<span class="token punctuation">}</span>

<span class="token operator">/</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>单一的 Promise 链并不能发现 async/await 的优势，但是，如果需要处理由多个 Promise 组成的 then 链的时候，优势就能体现出来了（很有意思，Promise 通过 then 链来解决多层回调的问题，现在又用 async/await 来进一步优化它）。</p> <p>假设一个业务，分多个步骤完成，每个步骤都是异步的，而且依赖于上一个步骤的结果。我们仍然用 <code>setTimeout</code> 来模拟异步操作：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 传入参数 n，表示这个函数执行的时间（毫秒）
 * 执行的结果是 n + 200，这个值将用于下一步骤
 */</span>
<span class="token keyword">function</span> <span class="token function">takeLongTime</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">step1</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">step1 with </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">takeLongTime</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">step2</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">step2 with </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">takeLongTime</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">step3</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">step3 with </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">takeLongTime</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在用 Promise 方式来实现这三个步骤的处理</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">doIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&quot;doIt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> time1 <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token function">step1</span><span class="token punctuation">(</span>time1<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">time2</span> <span class="token operator">=&gt;</span> <span class="token function">step2</span><span class="token punctuation">(</span>time2<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">time3</span> <span class="token operator">=&gt;</span> <span class="token function">step3</span><span class="token punctuation">(</span>time3<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">result is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&quot;doIt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">doIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// c:\var\test&gt;node --harmony_async_await .</span>
<span class="token comment">// step1 with 300</span>
<span class="token comment">// step2 with 500</span>
<span class="token comment">// step3 with 700</span>
<span class="token comment">// result is 900</span>
<span class="token comment">// doIt: 1507.251ms</span>
</code></pre></div><p>输出结果 <code>result</code> 是 <code>step3()</code> 的参数 <code>700 + 200</code> = <code>900</code>。<code>doIt()</code> 顺序执行了三个步骤，一共用了 <code>300 + 500 + 700 = 1500</code> 毫秒，和 <code>console.time()/console.timeEnd()</code> 计算的结果一致。</p> <p>如果用 async/await 来实现呢，会是这样</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">doIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&quot;doIt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> time1 <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> time2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">step1</span><span class="token punctuation">(</span>time1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> time3 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">step2</span><span class="token punctuation">(</span>time2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">step3</span><span class="token punctuation">(</span>time3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">result is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&quot;doIt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">doIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>结果和之前的 Promise 实现是一样的，但是这个代码看起来是不是清晰得多，==几乎跟同步代码一样==</p> <h4 id="async-函数的含义和用法"><a href="#async-函数的含义和用法" class="header-anchor">#</a> <a href="http://www.ruanyifeng.com/blog/2015/05/async.html" target="_blank" rel="noopener noreferrer">async 函数的含义和用法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p><img src="C:%5CUsers%5Csfz1130%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220327004851338.png" alt="image-20220327004851338"></p> <h3 id="xhr、fetch相关-ajax"><a href="#xhr、fetch相关-ajax" class="header-anchor">#</a> xhr、fetch相关（AJAX）</h3> <h2 id="浏览器中的javascript"><a href="#浏览器中的javascript" class="header-anchor">#</a> 浏览器中的JavaScript</h2> <blockquote><p>DOM核心API部分来自 蚂蚁前端校园行，虽然现在的开发都是脱离DOM，基于虚拟DOM进行开发，但是基础知识还是要了解的！毕竟VDOM也是要转换为DOM的~</p></blockquote> <h3 id="dom核心api-1"><a href="#dom核心api-1" class="header-anchor">#</a> DOM核心API-1</h3> <blockquote><p>获取DOM中的节点</p></blockquote> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/getElementById" target="_blank" rel="noopener noreferrer"><code>document.getElementById('id')</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelector" target="_blank" rel="noopener noreferrer"><code>document.querySelector('selecotrs')</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>id、class
<ul><li><code>querySelector('#root')</code></li></ul></li> <li>更高级一些——标签名、CSS属性值
<ul><li><code>querySelector(input[name = 'login'])</code>name属性为login的input元素</li></ul></li></ul></li></ul> <h3 id="dom核心api-2"><a href="#dom核心api-2" class="header-anchor">#</a> DOM核心API-2</h3> <blockquote><p>动态地创建节点并插入到DOM中</p></blockquote> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style" target="_blank" rel="noopener noreferrer"><code>element.style.xxx</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>(MDN里甚至没有中文ORZ)
<ul><li>设置获取元素的属性</li></ul></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createElement" target="_blank" rel="noopener noreferrer"><code>document.createElement(要创建的标签名称/类名)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/appendChild" target="_blank" rel="noopener noreferrer"><code>node.appendChild(子节点)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>将子节点追加给父节点</li></ul></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/innerHTML" target="_blank" rel="noopener noreferrer"><code>Element.innerHTML</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="dom核心api-3"><a href="#dom核心api-3" class="header-anchor">#</a> DOM核心API-3</h3> <blockquote><p>获取/设置元素的样式</p></blockquote> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getAttribute" target="_blank" rel="noopener noreferrer"><code>element.getAttribute(name)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/setAttribute" target="_blank" rel="noopener noreferrer"><code>element.setAttribute('属性名称', '属性的值/新值')</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="dom核心api-4"><a href="#dom核心api-4" class="header-anchor">#</a> DOM核心API-4</h3> <blockquote><p>监听事件</p></blockquote> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener" target="_blank" rel="noopener noreferrer"><code>target.addEventListener()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h3> <ul><li>注册事件方法1
<ul><li>内容HTML和交互JS绑定在一起了，这样不好~（比较古老的写法）</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>btn<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>onclick = &quot;eventLog('onclick')&quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">eventLog</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'触发的事件是：'</span> <span class="token operator">+</span> type<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li><strong>注册事件的方法2</strong> <ul><li>不用给标签加事件，直接用JS获取标签对应的元素然后使用 <code>addEventListener</code>（这个用得真的超级多！）</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">eventLog</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'触发的事件是：'</span> <span class="token operator">+</span> type<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">eventLog</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>常见事件</p> <ul><li>鼠标点击事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>onclick <span class="token operator">=</span> <span class="token string">&quot;回调函数&quot;</span>
</code></pre></div><ul><li>鼠标移入移出事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>onmouseover <span class="token operator">=</span> <span class="token string">&quot;回调函数&quot;</span>
onmouseout <span class="token operator">=</span> <span class="token string">&quot;回调函数&quot;</span>
</code></pre></div><ul><li>文本改变事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>onchange <span class="token operator">=</span> <span class="token string">&quot;回调函数&quot;</span><span class="token punctuation">;</span><span class="token comment">// 经常用onchange来监听输入框中的改变</span>
</code></pre></div><ul><li>键盘输入事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>oninput <span class="token operator">=</span> <span class="token string">&quot;回调函数&quot;</span><span class="token punctuation">;</span><span class="token comment">// 用这个监听全局的键盘键入</span>
</code></pre></div><ul><li>输入框（光标）focus（聚焦）事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>onfocus <span class="token operator">=</span> <span class="token string">&quot;回调函数&quot;</span>
</code></pre></div><ul><li>输入框（光标）blur失焦事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>onblur <span class="token operator">=</span> <span class="token string">&quot;回调函数&quot;</span>
</code></pre></div></li> <li><p>虽然我们现在侦听事件一般用<code>addEventListener(‘xxx’, 回调函数)</code>吧~（不包括框架！）但是原生的JS操作DOM还是要理解咧！</p> <ul><li>因为追溯根源，框架就是帮助我们操作了DOM文档对象模型，后期性能优化的了解上这个必不可少！</li></ul></li></ul> <h3 id="bom相关"><a href="#bom相关" class="header-anchor">#</a> BOM相关</h3> <p>浏览器对象模型（Browser Object Model）的核心是 window 对象。是每个浏览器⼚商在浏览器上提供的，提供与浏览器交互的⽅法和接⼝（⽐如，跳转⻚⾯，获取窗⼝⼤⼩，获 取历史记录，获取当前页面URL，获取⽂档节点等）
⼤部分我们常⽤的接⼝都是相同的调⽤⽅式，但是浏览器他们底层实现的⽅式会不同。</p> <h4 id="dom注册事件的三种方法"><a href="#dom注册事件的三种方法" class="header-anchor">#</a> DOM注册事件的三种方法</h4> <ul><li>method01 页面元素（标签）提供的事件属性</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">myClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>xx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>method02 使用DOM对象的事件属性</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 给指定元素添加事件监听器</span>
btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> myClick<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">myClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    xxx
<span class="token punctuation">}</span>
</code></pre></div><ul><li>method03 事件监听器</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 给指定元素添加事件监听器</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    xxx
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="事件的冒泡与捕获"><a href="#事件的冒泡与捕获" class="header-anchor">#</a> 事件的冒泡与捕获</h3> <p>借鉴了<a href="https://827652549.github.io/my-book/?utm_source=gold_browser_extension#/javascript/questions?id=%e5%86%92%e6%b3%a1%e5%92%8c%e6%8d%95%e8%8e%b7" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>可以通过addEventListener()的第三个参数来确定捕获还是冒泡，第一个参数是要绑定的事件，第二个参数是回调函数，第三个参数默认是false，代表<strong>事件冒泡阶段</strong>调用事件处理函数，如果设置成true，则在<strong>事件捕获阶段</strong>调用处理函数。</p></blockquote> <p><strong>冒泡：</strong></p> <p>点<a href="https://www.w3school.com.cn/tiy/t.asp?f=event_stoppropagation" target="_blank" rel="noopener noreferrer">这个demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>试试看</p> <p>还可以点<a href="https://fangzhousu.github.io/JS-30Demos/25_Event-Capture-Propagation-Bubbling-and-Once/index-billSu.html" target="_blank" rel="noopener noreferrer">JS30中第25个demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>微软提出了事件冒泡的事件流，事件会<strong>从最内层的元素开始发生</strong>，一直向上层传播，直到<strong>document对象</strong>。p元素上发生click事件的顺序应该是<code>p -&gt; body -&gt; html -&gt; document</code></p> <p><strong>捕获：</strong></p> <p>网景提出了事件捕获的事件流，事件捕获相反，事件会<strong>从最外层开始发生</strong>，直到最具体的元素。p元素上发生click事件的顺序应该是<code>document -&gt; html -&gt; body -&gt; div -&gt; p</code></p> <p>W3C制定了统一的标准，<strong>先捕获再冒泡</strong>。</p> <h4 id="更极端的情况"><a href="#更极端的情况" class="header-anchor">#</a> 更极端的情况</h4> <blockquote><p>牢记：<strong>先捕获再冒泡</strong></p></blockquote> <p>在浏览器中，如果父子元素<strong>都设置了捕获和冒泡</strong>的输出，当点击子元素时：</p> <ul><li>先捕获父元素</li> <li>子元素输出<strong>先注册的事件</strong> <ul><li>捕获先注册-&gt;输出捕获</li> <li>冒泡先注册-&gt;输出冒泡</li></ul></li> <li>再输出父元素的冒泡事件</li></ul> <h3 id="事件冒泡与阻止事件冒泡-与捕获"><a href="#事件冒泡与阻止事件冒泡-与捕获" class="header-anchor">#</a> 事件冒泡与阻止事件冒泡（与捕获）</h3> <p>看<a href="https://www.w3school.com.cn/tiy/t.asp?f=event_stoppropagation" target="_blank" rel="noopener noreferrer">这个demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>使用</p> <div class="language-js extra-class"><pre class="language-js"><code>event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 阻止冒泡</span>
</code></pre></div><h4 id="阻止点击事件"><a href="#阻止点击事件" class="header-anchor">#</a> 阻止点击事件</h4> <div class="language-js extra-class"><pre class="language-js"><code>event<span class="token punctuation">.</span><span class="token function">defaultPrevented</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 阻止点击事件</span>
event<span class="token punctuation">.</span><span class="token function">cancelable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 这样也可以？！</span>
</code></pre></div><blockquote><p>图如果看不了的话 直接访问图片链接也ok</p> <p>https://gitee.com/su-fangzhou/blog-image/raw/master/202111150020231.png</p></blockquote> <p><img src="https://raw.githubusercontent.com/FangzhouSu/blog-image/main/202204162317536.png" alt="image-20220416231655214"></p> <h2 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h2> <h2 id="es6、es7、es2020新增内容"><a href="#es6、es7、es2020新增内容" class="header-anchor">#</a> ES6、ES7、ES2020新增内容</h2> <h3 id=""><a href="#" class="header-anchor">#</a> <code>?.</code> <code>??</code></h3> <ul><li><p><strong>可选链</strong>操作符( <strong><code>?.</code></strong> )</p> <ul><li>可选链操作符( <strong><code>?.</code></strong> )允许读取位于连接对象链深处的属性的值，而不必明确验证链中的每个引用是否有效。<code>?.</code> 操作符的功能类似于 <code>.</code> 链式操作符，不同之处在于，在引用为空(<a href="https://wiki.developer.mozilla.org/en-US/docs/Glossary/nullish" target="_blank" rel="noopener noreferrer">nullish<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ) (<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer"><code>null</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或者 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer"><code>undefined</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) 的情况下不会引起错误，该表达式短路返回值</li></ul></li> <li><p><strong>空值合并操作符</strong>（<strong><code>??</code></strong>）</p> <p>只有当左侧为null和undefined时，才会返回右侧的数</p> <p>空值合并操作符（<code>??</code>）是一个逻辑操作符，当左侧的操作数为 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer"><code>null</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或者 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer"><code>undefined</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 时，返回其右侧操作数，否则返回左侧操作数。</p> <p>与<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_Operators#Logical_OR_2" target="_blank" rel="noopener noreferrer">逻辑或操作符（<code>||</code>）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>不同，逻辑或操作符会在左侧操作数为<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy" target="_blank" rel="noopener noreferrer">假值<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>时返回右侧操作数。也就是说，如果使用 <code>||</code> 来为某些变量设置默认值，可能会遇到意料之外的行为。比如为假值（例如，<code>''</code> 或 <code>0</code>）时。见下面的例子。</p></li></ul> <h3 id="babel-es6语法转换器-https-babeljs-io-repl-browsers-defaults-2c-not-ie-11-2c-not-ie-mob-11-build-builtins-false-corejs-3-6-spec-false-loose-false-code-lz-dyuwlgbahgtjef4ig0bmaaazoglaxqg4aowgaohhabmbxayxaapgo670i6aybkrapmhsiaairderia-debug-false-forcealltransforms-true-shippedproposals-false-circlecirepo-evaluate-false-filesize-false-timetravel-false-sourcetype-module-linewrap-true-presets-env-2creact-2cstage-2-prettier-false-targets-version-7-16-12-externalplugins-assumptions"><a href="#babel-es6语法转换器-https-babeljs-io-repl-browsers-defaults-2c-not-ie-11-2c-not-ie-mob-11-build-builtins-false-corejs-3-6-spec-false-loose-false-code-lz-dyuwlgbahgtjef4ig0bmaaazoglaxqg4aowgaohhabmbxayxaapgo670i6aybkrapmhsiaairderia-debug-false-forcealltransforms-true-shippedproposals-false-circlecirepo-evaluate-false-filesize-false-timetravel-false-sourcetype-module-linewrap-true-presets-env-2creact-2cstage-2-prettier-false-targets-version-7-16-12-externalplugins-assumptions" class="header-anchor">#</a> [Babel - ES6语法转换器](https://babeljs.io/repl#?browsers=defaults%2C not ie 11%2C not ie_mob 11&amp;build=&amp;builtIns=false&amp;corejs=3.6&amp;spec=false&amp;loose=false&amp;code_lz=DYUwLgBAhgTjEF4IG0BMAaAzOgLAXQG4AoWGAOhhABMBXAYxAApGo670I6aYBKRAPmhsIAaiRdeRIA&amp;debug=false&amp;forceAllTransforms=true&amp;shippedProposals=false&amp;circleciRepo=&amp;evaluate=false&amp;fileSize=false&amp;timeTravel=false&amp;sourceType=module&amp;lineWrap=true&amp;presets=env%2Creact%2Cstage-2&amp;prettier=false&amp;targets=&amp;version=7.16.12&amp;externalPlugins=&amp;assumptions={})</h3> <h3 id="map数据结构"><a href="#map数据结构" class="header-anchor">#</a> Map数据结构</h3> <blockquote><p><a href="https://es6.ruanyifeng.com/#docs/set-map#Map" target="_blank" rel="noopener noreferrer">阮大的ES6教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h5 id="初始化map"><a href="#初始化map" class="header-anchor">#</a> 初始化map</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 熟悉的《有效的括号》 hhh</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;[&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;{&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>键值对不多可以用<code>map.set(key, value)</code></p> <h5 id="题目中-map的键的类型是字符型-所以可以用startswith-xxx-方法来判断其前缀是否为xxx"><a href="#题目中-map的键的类型是字符型-所以可以用startswith-xxx-方法来判断其前缀是否为xxx" class="header-anchor">#</a> 题目中 map的键的类型是字符型，所以可以用startsWith(xxx)方法来判断其前缀是否为xxx</h5> <p>碰到一道力扣 <a href="https://leetcode-cn.com/problems/map-sum-pairs/" target="_blank" rel="noopener noreferrer">677. 键值映射<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，用到了字符串的这个API，很有趣也很实用！</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">MapSum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">MapSum</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">insert</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">MapSum</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prefix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> s <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// string</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>prefix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 如果s开头是prefix，返回true</span>
            res <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_30分钟掌握es6-es2015核心内容-上"><a href="#_30分钟掌握es6-es2015核心内容-上" class="header-anchor">#</a> <a href="https://segmentfault.com/a/1190000004365693" target="_blank" rel="noopener noreferrer">30分钟掌握ES6/ES2015核心内容（上）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <blockquote><p>好文一篇 推荐~</p></blockquote> <h2 id="js坑点"><a href="#js坑点" class="header-anchor">#</a> JS坑点</h2> <blockquote><p>一些 JS的坑…</p></blockquote> <h3 id="连续赋值问题"><a href="#连续赋值问题" class="header-anchor">#</a> 连续赋值问题</h3> <blockquote><p>@<a href="https://juejin.cn/post/7060174677846523912" target="_blank" rel="noopener noreferrer">淦！五行代码，难倒几十个前端群的小伙伴<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>@<a href="https://blog.csdn.net/qq_33692349/article/details/103943242?utm_source=app&amp;app_version=4.16.0&amp;code=app_1562916241&amp;uLinkId=usr1mkqgl919blen" target="_blank" rel="noopener noreferrer">javascript面试题，关于连续赋值let a = {n: 1}; let b = a; a.x = a = {n: 2}; 的坑<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p>需要结合JS引擎对堆内存和栈内存的管理来理解</p></blockquote> <p>这个经典面试题如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>  

a<span class="token punctuation">.</span>x <span class="token operator">=</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 这句的执行顺序是关键！！</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {n: 2}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { n: 1, x: {n: 2} }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>【1】首先要明确基本概念</p> <blockquote><ul><li>赋值运算符 <code>=</code> 是从右向左运算的（依次将等号右侧的值赋值给等号左侧的）
<ul><li>例如 var a = 1 + 2; 先计算了等号右边1+2，将右边的结果3赋值给了a；</li></ul></li> <li>而我们都知道编程语言的运算顺序都是从左往右的，所以上题的执行顺序是——
<ul><li>a.x = a</li> <li>a = { n: 2 }</li></ul></li></ul></blockquote> <p>【2】这个问题还可以从一个角度来考虑——<strong>连等为右结合性</strong></p> <blockquote><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gyzpl5qx6gj30wa0u0gpy.jpg" alt="image-20220203014846074"></p> <p>上述问题可以看成—— a.x = ( a = {n:2} )</p></blockquote> <p>【3】最后一个关键</p> <blockquote><p><code>.</code>运算符的优先级高于<code>=</code>，所以上述代码会先在a对象处创建x属性</p></blockquote> <p>【4】上述代码核心处三行代码对应的图（来自 juejin 速冻🐟）——</p> <blockquote><div class="language-js extra-class"><pre class="language-js"><code>line <span class="token number">1</span>
<span class="token keyword">let</span> a <span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
</code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30cdb79b3dcb4822a504b24d3ca1fcde~tplv-k3u1fbpfcp-watermark.awebp" alt="image-20220203013454493"></p> <div class="language-js extra-class"><pre class="language-js"><code>line <span class="token number">2</span>
<span class="token keyword">let</span> prevA<span class="token operator">=</span>a  
</code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3144008866334fb1900d0ea73979b0b9~tplv-k3u1fbpfcp-watermark.awebp" alt="image-20220203013615974"></p> <div class="language-js extra-class"><pre class="language-js"><code>line3
a<span class="token punctuation">.</span>x<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/483afc9f76244acbb6290478f0ea271b~tplv-k3u1fbpfcp-watermark.awebp" alt="image-20220203013134637"></p></blockquote></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/frontend-knowledge-base/knowledgeBase/layout.html" class="prev">
            🐴前端基础-layout
          </a></span> <span class="next"><a href="/frontend-knowledge-base/knowledgeBase/network.html">
            🐅计算机网络
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#js知识体系" class="sidebar-link reco-side-js知识体系" data-v-cb1513f6>JS知识体系</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#js学习资源" class="sidebar-link reco-side-js学习资源" data-v-cb1513f6>JS学习资源</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#js基础" class="sidebar-link reco-side-js基础" data-v-cb1513f6>JS基础</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#_0-1-0-2-0-3-嘛-为什么" class="sidebar-link reco-side-_0-1-0-2-0-3-嘛-为什么" data-v-cb1513f6>0.1 + 0.2 === 0.3 嘛？为什么？</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#七种基本数据类型-一种引用数据类型" class="sidebar-link reco-side-七种基本数据类型-一种引用数据类型" data-v-cb1513f6>七种基本数据类型，一种引用数据类型</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#运算符优先级" class="sidebar-link reco-side-运算符优先级" data-v-cb1513f6>运算符优先级</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#parseint-parsefloat" class="sidebar-link reco-side-parseint-parsefloat" data-v-cb1513f6>parseInt &amp; parseFloat</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#字面量的概念" class="sidebar-link reco-side-字面量的概念" data-v-cb1513f6>字面量的概念</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#for-in-for-of的用法-区别" class="sidebar-link reco-side-for-in-for-of的用法-区别" data-v-cb1513f6>for…in for…of的用法&amp;区别</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#array类型相关知识-及常见api" class="sidebar-link reco-side-array类型相关知识-及常见api" data-v-cb1513f6>Array类型相关知识，及常见api</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#改变-不改变原数组的方法" class="sidebar-link reco-side-改变-不改变原数组的方法" data-v-cb1513f6>改变&amp;不改变原数组的方法</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#判断是否为数组的方法" class="sidebar-link reco-side-判断是否为数组的方法" data-v-cb1513f6>判断是否为数组的方法</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#array-api总结" class="sidebar-link reco-side-array-api总结" data-v-cb1513f6>Array API总结</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#经典数组去重" class="sidebar-link reco-side-经典数组去重" data-v-cb1513f6>经典数组去重</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#带有nan-的数组去重" class="sidebar-link reco-side-带有nan-的数组去重" data-v-cb1513f6>带有NaN {}的数组去重</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#经典数组乱序" class="sidebar-link reco-side-经典数组乱序" data-v-cb1513f6>经典数组乱序</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#经典数组扁平化" class="sidebar-link reco-side-经典数组扁平化" data-v-cb1513f6>经典数组扁平化</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#经典数组排序" class="sidebar-link reco-side-经典数组排序" data-v-cb1513f6>经典数组排序</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#object类型相关知识-及常见api" class="sidebar-link reco-side-object类型相关知识-及常见api" data-v-cb1513f6>Object类型相关知识，及常见api</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#object-prototype-tostring" class="sidebar-link reco-side-object-prototype-tostring" data-v-cb1513f6>Object.prototype.toString()</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#对象的基本概念" class="sidebar-link reco-side-对象的基本概念" data-v-cb1513f6>对象的基本概念</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#javascript-tostring-方法" class="sidebar-link reco-side-javascript-tostring-方法" data-v-cb1513f6>JavaScript toString() 方法</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#函数、类相关" class="sidebar-link reco-side-函数、类相关" data-v-cb1513f6>函数、类相关</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#常见api" class="sidebar-link reco-side-常见api" data-v-cb1513f6>常见API</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#继承模式" class="sidebar-link reco-side-继承模式" data-v-cb1513f6>继承模式</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#js实现继承的最佳实践" class="sidebar-link reco-side-js实现继承的最佳实践" data-v-cb1513f6>JS实现继承的最佳实践</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#this关键字" class="sidebar-link reco-side-this关键字" data-v-cb1513f6>this关键字</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#原型、原型链" class="sidebar-link reco-side-原型、原型链" data-v-cb1513f6>原型、原型链</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#prototype-proto-constructor的作用" class="sidebar-link reco-side-prototype-proto-constructor的作用" data-v-cb1513f6>prototype __proto__ constructor的作用</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#获取对象原型的方法" class="sidebar-link reco-side-获取对象原型的方法" data-v-cb1513f6>获取对象原型的方法</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#判断属性是否属于原型链的属性" class="sidebar-link reco-side-判断属性是否属于原型链的属性" data-v-cb1513f6>判断属性是否属于原型链的属性</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#闭包、作用域相关-面试手写题常客" class="sidebar-link reco-side-闭包、作用域相关-面试手写题常客" data-v-cb1513f6>闭包、作用域相关（面试手写题常客）</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#对闭包scope的理解" class="sidebar-link reco-side-对闭包scope的理解" data-v-cb1513f6>对闭包Scope的理解</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#闭包何时被销毁-垃圾回收机制" class="sidebar-link reco-side-闭包何时被销毁-垃圾回收机制" data-v-cb1513f6>闭包何时被销毁？-垃圾回收机制</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#对作用域、作用域链的理解" class="sidebar-link reco-side-对作用域、作用域链的理解" data-v-cb1513f6>对作用域、作用域链的理解</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#对执行上下文的理解" class="sidebar-link reco-side-对执行上下文的理解" data-v-cb1513f6>对执行上下文的理解</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#静态作用域的两道基础题" class="sidebar-link reco-side-静态作用域的两道基础题" data-v-cb1513f6>静态作用域的两道基础题</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#异步编程" class="sidebar-link reco-side-异步编程" data-v-cb1513f6>异步编程</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#promise异步输出问题-依次输出1-2-3-end" class="sidebar-link reco-side-promise异步输出问题-依次输出1-2-3-end" data-v-cb1513f6>promise异步输出问题-依次输出1 2 3 end</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#promise的使用方法-理解" class="sidebar-link reco-side-promise的使用方法-理解" data-v-cb1513f6>Promise的使用方法&amp;理解</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#async、await相关" class="sidebar-link reco-side-async、await相关" data-v-cb1513f6>async、await相关</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#xhr、fetch相关-ajax" class="sidebar-link reco-side-xhr、fetch相关-ajax" data-v-cb1513f6>xhr、fetch相关（AJAX）</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#浏览器中的javascript" class="sidebar-link reco-side-浏览器中的javascript" data-v-cb1513f6>浏览器中的JavaScript</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#dom核心api-1" class="sidebar-link reco-side-dom核心api-1" data-v-cb1513f6>DOM核心API-1</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#dom核心api-2" class="sidebar-link reco-side-dom核心api-2" data-v-cb1513f6>DOM核心API-2</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#dom核心api-3" class="sidebar-link reco-side-dom核心api-3" data-v-cb1513f6>DOM核心API-3</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#dom核心api-4" class="sidebar-link reco-side-dom核心api-4" data-v-cb1513f6>DOM核心API-4</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#事件" class="sidebar-link reco-side-事件" data-v-cb1513f6>事件</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#bom相关" class="sidebar-link reco-side-bom相关" data-v-cb1513f6>BOM相关</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#事件的冒泡与捕获" class="sidebar-link reco-side-事件的冒泡与捕获" data-v-cb1513f6>事件的冒泡与捕获</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#事件冒泡与阻止事件冒泡-与捕获" class="sidebar-link reco-side-事件冒泡与阻止事件冒泡-与捕获" data-v-cb1513f6>事件冒泡与阻止事件冒泡（与捕获）</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#正则表达式" class="sidebar-link reco-side-正则表达式" data-v-cb1513f6>正则表达式</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#es6、es7、es2020新增内容" class="sidebar-link reco-side-es6、es7、es2020新增内容" data-v-cb1513f6>ES6、ES7、ES2020新增内容</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#" class="sidebar-link reco-side-" data-v-cb1513f6>?. ??</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#babel-es6语法转换器-https-babeljs-io-repl-browsers-defaults-2c-not-ie-11-2c-not-ie-mob-11-build-builtins-false-corejs-3-6-spec-false-loose-false-code-lz-dyuwlgbahgtjef4ig0bmaaazoglaxqg4aowgaohhabmbxayxaapgo670i6aybkrapmhsiaairderia-debug-false-forcealltransforms-true-shippedproposals-false-circlecirepo-evaluate-false-filesize-false-timetravel-false-sourcetype-module-linewrap-true-presets-env-2creact-2cstage-2-prettier-false-targets-version-7-16-12-externalplugins-assumptions" class="sidebar-link reco-side-babel-es6语法转换器-https-babeljs-io-repl-browsers-defaults-2c-not-ie-11-2c-not-ie-mob-11-build-builtins-false-corejs-3-6-spec-false-loose-false-code-lz-dyuwlgbahgtjef4ig0bmaaazoglaxqg4aowgaohhabmbxayxaapgo670i6aybkrapmhsiaairderia-debug-false-forcealltransforms-true-shippedproposals-false-circlecirepo-evaluate-false-filesize-false-timetravel-false-sourcetype-module-linewrap-true-presets-env-2creact-2cstage-2-prettier-false-targets-version-7-16-12-externalplugins-assumptions" data-v-cb1513f6>Babel - ES6语法转换器</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#map数据结构" class="sidebar-link reco-side-map数据结构" data-v-cb1513f6>Map数据结构</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#_30分钟掌握es6-es2015核心内容-上" class="sidebar-link reco-side-_30分钟掌握es6-es2015核心内容-上" data-v-cb1513f6>30分钟掌握ES6/ES2015核心内容（上）</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#js坑点" class="sidebar-link reco-side-js坑点" data-v-cb1513f6>JS坑点</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend-knowledge-base/knowledgeBase/JavaScript.html#连续赋值问题" class="sidebar-link reco-side-连续赋值问题" data-v-cb1513f6>连续赋值问题</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/frontend-knowledge-base/assets/js/app.fcf437a8.js" defer></script><script src="/frontend-knowledge-base/assets/js/3.ceeb50c6.js" defer></script><script src="/frontend-knowledge-base/assets/js/1.8451d83f.js" defer></script><script src="/frontend-knowledge-base/assets/js/15.79bbd93a.js" defer></script>
  </body>
</html>
